/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var kt=Object.create;var V=Object.defineProperty,wt=Object.defineProperties,Tt=Object.getOwnPropertyDescriptor,Pt=Object.getOwnPropertyDescriptors,Lt=Object.getOwnPropertyNames,Re=Object.getOwnPropertySymbols,Dt=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var Ge=(t,e,s)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,N=(t,e)=>{for(var s in e||(e={}))Fe.call(e,s)&&Ge(t,s,e[s]);if(Re)for(var s of Re(e))Mt.call(e,s)&&Ge(t,s,e[s]);return t},ye=(t,e)=>wt(t,Pt(e)),Be=t=>V(t,"__esModule",{value:!0});var It=(t,e)=>{Be(t);for(var s in e)V(t,s,{get:e[s],enumerable:!0})},Ot=(t,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Lt(e))!Fe.call(t,a)&&a!=="default"&&V(t,a,{get:()=>e[a],enumerable:!(s=Tt(e,a))||s.enumerable});return t},L=t=>Ot(Be(V(t!=null?kt(Dt(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var I=(t,e,s)=>new Promise((a,i)=>{var o=l=>{try{c(s.next(l))}catch(m){i(m)}},n=l=>{try{c(s.throw(l))}catch(m){i(m)}},c=l=>l.done?a(l.value):Promise.resolve(l.value).then(o,n);c((s=s.apply(t,e)).next())});It(exports,{default:()=>We});var ut=L(require("obsidian"));var ke={lightStyle:"minimal-light",darkStyle:"minimal-dark",lightScheme:"minimal-oxygen-light",darkScheme:"minimal-oxygen-dark",editorFont:"",lineHeight:1.5,lineWidth:40,lineWidthWide:50,maxWidth:88,textNormal:16,textSmall:13,imgGrid:!1,imgWidth:"img-default-width",tableWidth:"table-default-width",iframeWidth:"iframe-default-width",mapWidth:"map-default-width",chartWidth:"chart-default-width",colorfulHeadings:!1,colorfulFrame:!1,colorfulActiveStates:!1,trimNames:!0,labeledNav:!1,fullWidthMedia:!0,bordersToggle:!0,minimalStatus:!0,focusMode:!1,underlineInternal:!0,underlineExternal:!0,folding:!0,lineNumbers:!1,readableLineLength:!1,devBlockWidth:!1,customPresets:[],enableCustomPresets:!0};var et=L(require("obsidian"));var K=L(require("obsidian"));function Ye(t,e){let a=t.createEl("div",{cls:"setting-item setting-item-heading"}).createEl("div",{cls:"setting-item-info"});a.createEl("div",{text:"Color scheme",cls:"setting-item-name"});let i=a.createEl("div",{cls:"setting-item-description"});i.appendChild(createEl("span",{text:"To create a custom color scheme use the "})),i.appendChild(createEl("a",{text:"Style Settings",href:"obsidian://show-plugin?id=obsidian-style-settings"})),i.appendText(" plugin. See "),i.appendChild(createEl("a",{text:"documentation",href:"https://minimal.guide/features/color-schemes"})),i.appendText(" for details."),new K.Setting(t).setName("Light mode color scheme").setDesc("Preset color options for light mode.").addDropdown(o=>{o.addOption("minimal-oxygen-light","Oxygen").addOption("minimal-minimal-light","Minimal").addOption("minimal-atom-light","Atom").addOption("minimal-ayu-light","Ayu").addOption("minimal-catppuccin-light","Catppuccin").addOption("minimal-eink-light","E-ink (beta)").addOption("minimal-everforest-light","Everforest").addOption("minimal-flexoki-light","Flexoki").addOption("minimal-gruvbox-light","Gruvbox").addOption("minimal-macos-light","macOS").addOption("minimal-nord-light","Nord").addOption("minimal-rose-pine-light","Ros\xE9 Pine").addOption("minimal-notion-light","Sky").addOption("minimal-solarized-light","Solarized").addOption("minimal-things-light","Things"),e.settings.customPresets.length>0&&(o.addOption("","\u2500\u2500\u2500\u2500\u2500\u2500 Custom Presets \u2500\u2500\u2500\u2500\u2500\u2500"),e.settings.customPresets.sort((n,c)=>n.name.localeCompare(c.name)).forEach(n=>{o.addOption(`minimal-custom-${n.id}`,n.name)})),o.setValue(e.settings.lightScheme).onChange(n=>{e.settings.lightScheme=n,e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS()})}),new K.Setting(t).setName("Light mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown(o=>o.addOption("minimal-light","Default").addOption("minimal-light-white","All white").addOption("minimal-light-tonal","Low contrast").addOption("minimal-light-contrast","High contrast").setValue(e.settings.lightStyle).onChange(n=>{e.settings.lightStyle=n,e.saveData(e.settings),document.body.classList.contains("theme-light")&&e.updateLightStyle()})),new K.Setting(t).setName("Dark mode color scheme").setDesc("Preset colors options for dark mode.").addDropdown(o=>{o.addOption("minimal-oxygen-dark","Oxygen").addOption("minimal-minimal-dark","Minimal").addOption("minimal-atom-dark","Atom").addOption("minimal-ayu-dark","Ayu").addOption("minimal-catppuccin-dark","Catppuccin").addOption("minimal-dracula-dark","Dracula").addOption("minimal-eink-dark","E-ink (beta)").addOption("minimal-everforest-dark","Everforest").addOption("minimal-flexoki-dark","Flexoki").addOption("minimal-gruvbox-dark","Gruvbox").addOption("minimal-macos-dark","macOS").addOption("minimal-nord-dark","Nord").addOption("minimal-rose-pine-dark","Ros\xE9 Pine").addOption("minimal-notion-dark","Sky").addOption("minimal-solarized-dark","Solarized").addOption("minimal-things-dark","Things"),e.settings.customPresets.length>0&&(o.addOption("","\u2500\u2500\u2500\u2500\u2500\u2500 Custom Presets \u2500\u2500\u2500\u2500\u2500\u2500"),e.settings.customPresets.sort((n,c)=>n.name.localeCompare(c.name)).forEach(n=>{o.addOption(`minimal-custom-${n.id}`,n.name)})),o.setValue(e.settings.darkScheme).onChange(n=>{e.settings.darkScheme=n,e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS()})}),new K.Setting(t).setName("Dark mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown(o=>o.addOption("minimal-dark","Default").addOption("minimal-dark-tonal","Low contrast").addOption("minimal-dark-black","True black").setValue(e.settings.darkStyle).onChange(n=>{e.settings.darkStyle=n,e.saveData(e.settings),document.body.classList.contains("theme-dark")&&e.updateDarkStyle()}))}var x=L(require("obsidian"));function Ue(t,e){t.createEl("br");let a=t.createEl("div",{cls:"setting-item setting-item-heading"}).createEl("div",{cls:"setting-item-info"});a.createEl("div",{text:"Features",cls:"setting-item-name"});let i=a.createEl("div",{cls:"setting-item-description"});i.appendChild(createEl("span",{text:"See "})),i.appendChild(createEl("a",{text:"documentation",href:"https://minimal.guide"})),i.appendText(" for details."),new x.Setting(t).setName("Text labels for primary navigation").setDesc("Navigation items in the left sidebar uses text labels.").addToggle(o=>o.setValue(e.settings.labeledNav).onChange(n=>{e.settings.labeledNav=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Colorful window frame").setDesc("The top area of the app uses your accent color.").addToggle(o=>o.setValue(e.settings.colorfulFrame).onChange(n=>{e.settings.colorfulFrame=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Colorful active states").setDesc("Active file and menu items use your accent color.").addToggle(o=>o.setValue(e.settings.colorfulActiveStates).onChange(n=>{e.settings.colorfulActiveStates=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Colorful headings").setDesc("Headings use a different color for each size.").addToggle(o=>o.setValue(e.settings.colorfulHeadings).onChange(n=>{e.settings.colorfulHeadings=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Minimal status bar").setDesc("Turn off to use full-width status bar.").addToggle(o=>o.setValue(e.settings.minimalStatus).onChange(n=>{e.settings.minimalStatus=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Trim file names in sidebars").setDesc("Use ellipses to fit file names on a single line.").addToggle(o=>o.setValue(e.settings.trimNames).onChange(n=>{e.settings.trimNames=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Workspace borders").setDesc("Display divider lines between workspace elements.").addToggle(o=>o.setValue(e.settings.bordersToggle).onChange(n=>{e.settings.bordersToggle=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Focus mode").setDesc("Hide tab bar and status bar, hover to display. Can be toggled via hotkey.").addToggle(o=>o.setValue(e.settings.focusMode).onChange(n=>{e.settings.focusMode=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Underline internal links").setDesc("Show underlines on internal links.").addToggle(o=>o.setValue(e.settings.underlineInternal).onChange(n=>{e.settings.underlineInternal=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Underline external links").setDesc("Show underlines on external links.").addToggle(o=>o.setValue(e.settings.underlineExternal).onChange(n=>{e.settings.underlineExternal=n,e.saveData(e.settings),e.refresh()})),new x.Setting(t).setName("Maximize media").setDesc("Images and videos fill the width of the line.").addToggle(o=>o.setValue(e.settings.fullWidthMedia).onChange(n=>{e.settings.fullWidthMedia=n,e.saveData(e.settings),e.refresh()}))}var H=L(require("obsidian"));function ze(t,e){t.createEl("br");let a=t.createEl("div",{cls:"setting-item setting-item-heading"}).createEl("div",{cls:"setting-item-info"});a.createEl("div",{text:"Layout",cls:"setting-item-name"});let i=a.createEl("div",{cls:"setting-item-description"});i.appendChild(createEl("span",{text:"These options can also be defined on a per-file basis, see "})),i.appendChild(createEl("a",{text:"documentation",href:"https://minimal.guide/features/block-width"})),i.appendText(" for details."),new H.Setting(t).setName("Image grids").setDesc("Turn consecutive images into columns \u2014 to make a new row, add an extra line break between images.").addToggle(o=>o.setValue(e.settings.imgGrid).onChange(n=>{e.settings.imgGrid=n,e.saveData(e.settings),e.refresh()})),new H.Setting(t).setName("Chart width").setDesc("Default width for chart blocks.").addDropdown(o=>o.addOption("chart-default-width","Default").addOption("chart-wide","Wide line width").addOption("chart-max","Maximum line width").addOption("chart-100","100% pane width").setValue(e.settings.chartWidth).onChange(n=>{e.settings.chartWidth=n,e.saveData(e.settings),e.refresh()})),new H.Setting(t).setName("Iframe width").setDesc("Default width for iframe blocks.").addDropdown(o=>o.addOption("iframe-default-width","Default").addOption("iframe-wide","Wide line width").addOption("iframe-max","Maximum line width").addOption("iframe-100","100% pane width").setValue(e.settings.iframeWidth).onChange(n=>{e.settings.iframeWidth=n,e.saveData(e.settings),e.refresh()})),new H.Setting(t).setName("Image width").setDesc("Default width for image blocks.").addDropdown(o=>o.addOption("img-default-width","Default").addOption("img-wide","Wide line width").addOption("img-max","Maximum line width").addOption("img-100","100% pane width").setValue(e.settings.imgWidth).onChange(n=>{e.settings.imgWidth=n,e.saveData(e.settings),e.refresh()})),new H.Setting(t).setName("Map width").setDesc("Default width for map blocks.").addDropdown(o=>o.addOption("map-default-width","Default").addOption("map-wide","Wide line width").addOption("map-max","Maximum line width").addOption("map-100","100% pane width").setValue(e.settings.mapWidth).onChange(n=>{e.settings.mapWidth=n,e.saveData(e.settings),e.refresh()})),new H.Setting(t).setName("Table width").setDesc("Default width for table and Dataview blocks.").addDropdown(o=>o.addOption("table-default-width","Default").addOption("table-wide","Wide line width").addOption("table-max","Maximum line width").addOption("table-100","100% pane width").setValue(e.settings.tableWidth).onChange(n=>{e.settings.tableWidth=n,e.saveData(e.settings),e.refresh()}))}var _=L(require("obsidian"));function Ve(t,e){t.createEl("br"),t.createEl("div",{text:"Typography",cls:"setting-item setting-item-heading"}),new _.Setting(t).setName("Text font size").setDesc("Used for the main text (default 16).").addText(s=>s.setPlaceholder("16").setValue((e.settings.textNormal||"")+"").onChange(a=>{e.settings.textNormal=parseFloat(a),e.saveData(e.settings),e.setFontSize()})),new _.Setting(t).setName("Small font size").setDesc("Used for text in the sidebars and tabs (default 13).").addText(s=>s.setPlaceholder("13").setValue((e.settings.textSmall||"")+"").onChange(a=>{e.settings.textSmall=parseFloat(a),e.saveData(e.settings),e.refresh()})),new _.Setting(t).setName("Line height").setDesc("Line height of text (default 1.5).").addText(s=>s.setPlaceholder("1.5").setValue((e.settings.lineHeight||"")+"").onChange(a=>{e.settings.lineHeight=parseFloat(a),e.saveData(e.settings),e.refresh()})),new _.Setting(t).setName("Normal line width").setDesc("Number of characters per line (default 40).").addText(s=>s.setPlaceholder("40").setValue((e.settings.lineWidth||"")+"").onChange(a=>{e.settings.lineWidth=parseInt(a.trim()),e.saveData(e.settings),e.refresh()})),new _.Setting(t).setName("Wide line width").setDesc("Number of characters per line for wide elements (default 50).").addText(s=>s.setPlaceholder("50").setValue((e.settings.lineWidthWide||"")+"").onChange(a=>{e.settings.lineWidthWide=parseInt(a.trim()),e.saveData(e.settings),e.refresh()})),new _.Setting(t).setName("Maximum line width %").setDesc("Percentage of space inside a pane that a line can fill (default 88).").addText(s=>s.setPlaceholder("88").setValue((e.settings.maxWidth||"")+"").onChange(a=>{e.settings.maxWidth=parseInt(a.trim()),e.saveData(e.settings),e.refresh()})),new _.Setting(t).setName("Editor font").setDesc("Overrides the text font defined in Obsidian Appearance settings when in edit mode.").addText(s=>s.setPlaceholder("").setValue((e.settings.editorFont||"")+"").onChange(a=>{e.settings.editorFont=a,e.saveData(e.settings),e.refresh()}))}var X=L(require("obsidian"));var we=class{static generateCSS(e,s){let a=s==="light"?e.light:e.dark,i=s==="light"?"theme-light":"theme-dark",o=`minimal-custom-${e.id}`,n=`.${i}.${o} {
`,c=a.base.h,l=a.base.s,m=a.base.l,d=a.accent.h,r=a.accent.s,h=a.accent.l,p=s==="light",g=m>50,k=`hsl(${c}, ${l}%, ${m}%)`,b=`hsl(${c}, ${l}%, ${g?Math.max(0,m-5):Math.min(100,m+5)}%)`,P=`hsl(${c}, ${l}%, ${g?Math.max(0,m-10):Math.min(100,m+10)}%)`,C=g?Math.max(0,m-15):Math.min(100,m+15),v=g?Math.max(0,m-10):Math.min(100,m+10),E=g?Math.max(0,m-5):Math.min(100,m+5),A=`hsl(${c}, ${l}%, ${C}%)`,fe=`hsl(${c}, ${l}%, ${v}%)`,G=`hsl(${c}, ${l}%, ${E}%)`,B=g?15:85,ve=g?25:75,Y=g?35:65,pe=g?30:70,se=`hsl(${c}, ${Math.max(0,l-10)}%, ${B}%)`,ae=`hsl(${c}, ${Math.max(0,l-20)}%, ${ve}%)`,U=`hsl(${c}, ${Math.max(0,l-10)}%, ${Y}%)`,ft=`hsl(${c}, ${Math.max(0,l-10)}%, ${pe}%)`,vt=`hsla(${d}, 50%, 40%, 30%)`,pt="rgba(255, 177, 80, 0.3)",Ct=p?"white":"black",bt=($,w,S)=>{$=$/360,w=w/100,S=S/100;let W=(z,xe,M)=>(M<0&&(M+=1),M>1&&(M-=1),M<1/6?z+(xe-z)*6*M:M<1/2?xe:M<2/3?z+(xe-z)*(2/3-M)*6:z);if(w===0)return[S,S,S];let ie=S<.5?S*(1+w):S+w-S*w,Ee=2*S-ie,Et=W(Ee,ie,$+1/3),xt=W(Ee,ie,$),yt=W(Ee,ie,$-1/3);return[Et,xt,yt]},[Ce,be,Se]=bt(d,r,h),St=.2126*(Ce<=.03928?Ce/12.92:Math.pow((Ce+.055)/1.055,2.4))+.7152*(be<=.03928?be/12.92:Math.pow((be+.055)/1.055,2.4))+.0722*(Se<=.03928?Se/12.92:Math.pow((Se+.055)/1.055,2.4))>.5?"black":"white";return n+=`  --base-h: ${c};
`,n+=`  --base-s: ${l}%;
`,n+=`  --base-l: ${m}%;
`,n+=`
`,n+=`  --accent-h: ${d};
`,n+=`  --accent-s: ${r}%;
`,n+=`  --accent-l: ${h}%;
`,n+=`
`,n+=`  --bg1: ${k};
`,n+=`  --bg2: ${b};
`,n+=`  --bg-tab: ${b};
`,n+=`  --bg3: ${P};
`,n+=`
`,n+=`  --ui1: ${A};
`,n+=`  --ui2: ${fe};
`,n+=`  --ui3: ${G};
`,n+=`
`,n+=`  --tx1: ${se};
`,n+=`  --tx2: ${ae};
`,n+=`  --tx3: ${U};
`,n+=`  --tx4: ${ft};
`,n+=`
`,n+=`  --hl1: ${vt};
`,n+=`  --hl2: ${pt};
`,n+=`
`,n+=`  --sp1: ${Ct};
`,n+=`
`,n+=`  --text-on-accent: ${St};
`,a.colors&&["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2","red","orange","yellow","green","cyan","blue","purple","pink"].forEach(w=>{var W;let S=(W=a.colors)==null?void 0:W[w];if(S)switch(w){case"bg1":case"bg2":case"bg3":case"ui1":case"ui2":case"ui3":case"tx1":case"tx2":case"tx3":case"tx4":case"hl1":case"hl2":n+=`  --${w}: ${S};
`;break;default:n+=`  --color-${w}: ${S};
`;break}}),n+=`}
`,n}};function Ke(t){t=t.replace("#","");let e=parseInt(t.substr(0,2),16)/255,s=parseInt(t.substr(2,2),16)/255,a=parseInt(t.substr(4,2),16)/255,i=Math.max(e,s,a),o=Math.min(e,s,a),n=0,c=0,l=(i+o)/2;if(i!==o){let m=i-o;switch(c=l>.5?m/(2-i-o):m/(i+o),i){case e:n=(s-a)/m+(s<a?6:0);break;case s:n=(a-e)/m+2;break;case a:n=(e-s)/m+4;break}n/=6}return{h:Math.round(n*360),s:Math.round(c*100),l:Math.round(l*100)}}function u(t){let e=t.h/360,s=t.s/100,a=t.l/100,i=(m,d,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?m+(d-m)*6*r:r<1/2?d:r<2/3?m+(d-m)*(2/3-r)*6:m),o,n,c;if(s===0)o=n=c=a;else{let m=a<.5?a*(1+s):a+s-a*s,d=2*a-m;o=i(d,m,e+1/3),n=i(d,m,e),c=i(d,m,e-1/3)}let l=m=>{let d=Math.round(m*255).toString(16);return d.length===1?"0"+d:d};return`#${l(o)}${l(n)}${l(c)}`}function Te(t){return/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/.test(t)}function Je(t){let e=document.createElement("div");return e.className="custom-preset-swatch",e.style.cssText=`
    display: inline-block;
    width: 20px;
    height: 20px;
    border-radius: 3px;
    border: 1px solid var(--background-modifier-border);
    margin-right: 8px;
    background: linear-gradient(45deg, 
      ${u(t.light.base)} 0%, 
      ${u(t.light.accent)} 50%, 
      ${u(t.dark.base)} 100%);
    vertical-align: middle;
  `,e}function Pe(t){return t.trim().replace(/[<>:"/\\|?*]/g,"")}function Le(t){return Pe(t).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").substring(0,50)}function je(t){return/^[a-z0-9-]+$/.test(t)&&t.length>0&&t.length<=50}function qe(t,e,s){return!e.some(a=>a.id===t&&a.id!==s)}var y=class{static generatePresetCSS(e,s){return we.generateCSS(e,s)}static validatePresetId(e,s,a){return je(e)&&qe(e,s,a)}static sanitizePresetName(e){return Pe(e)}static createPreset(e,s="",a=[]){let i=this.sanitizePresetName(e);if(!i)throw new Error("Preset name cannot be empty");let o=Le(i),n=1;for(;!this.validatePresetId(o,a);)o=`${Le(i)}-${n}`,n++;return{id:o,name:i,author:s.trim(),version:"1.0.0",light:{base:{h:210,s:2,l:96},accent:{h:200,s:80,l:50},colors:{}},dark:{base:{h:210,s:2,l:13},accent:{h:200,s:80,l:50},colors:{}}}}static updatePreset(e,s,a){let i=a.find(n=>n.id===e);if(!i)throw new Error(`Preset with ID "${e}" not found`);let o=N(N({},i),s);if(s.id&&s.id!==e&&!this.validatePresetId(s.id,a,e))throw new Error(`Preset ID "${s.id}" is invalid or already exists`);if(s.name&&(o.name=this.sanitizePresetName(s.name),!o.name))throw new Error("Preset name cannot be empty");return o}static deletePreset(e,s){return s.filter(a=>a.id!==e)}static exportPresetAsJSON(e){return JSON.stringify(e,null,2)}static importPresetFromJSON(e){try{let s=JSON.parse(e);if(!s.id||!s.name||!s.light||!s.dark)throw new Error("Invalid preset format: missing required fields");if(!s.light.base||!s.light.accent||!s.dark.base||!s.dark.accent)throw new Error("Invalid preset format: missing base or accent colors");let a=o=>o&&typeof o.h=="number"&&o.h>=0&&o.h<=360&&typeof o.s=="number"&&o.s>=0&&o.s<=100&&typeof o.l=="number"&&o.l>=0&&o.l<=100;if(!a(s.light.base)||!a(s.light.accent)||!a(s.dark.base)||!a(s.dark.accent))throw new Error("Invalid preset format: HSL values out of range");let i={id:this.sanitizePresetName(s.id),name:this.sanitizePresetName(s.name),author:s.author||"",version:s.version||"1.0.0",light:{base:s.light.base,accent:s.light.accent,colors:s.light.colors||{}},dark:{base:s.dark.base,accent:s.dark.accent,colors:s.dark.colors||{}}};if(!i.id||!i.name)throw new Error("Invalid preset format: ID or name is empty after sanitization");return i}catch(s){throw s instanceof SyntaxError?new Error("Invalid JSON format"):s}}static getPresetById(e,s){return s.find(a=>a.id===e)}static isPresetActive(e,s,a){return s===`minimal-custom-${e}`||a===`minimal-custom-${e}`}static generatePresetPreview(e){var s,a,i,o;return{light:[u(e.light.base),u(e.light.accent),((s=e.light.colors)==null?void 0:s.bg1)||u(e.light.base),((a=e.light.colors)==null?void 0:a.tx1)||u(ye(N({},e.light.base),{l:Math.max(0,e.light.base.l-30)}))],dark:[u(e.dark.base),u(e.dark.accent),((i=e.dark.colors)==null?void 0:i.bg1)||u(e.dark.base),((o=e.dark.colors)==null?void 0:o.tx1)||u(ye(N({},e.dark.base),{l:Math.min(100,e.dark.base.l+30)}))]}}};var D=L(require("obsidian"));function oe(t,e){let s=e.base.h,a=e.base.s,i=e.base.l,o=e.accent.h,n=e.accent.s,c=e.accent.l,l=i>50,m={red:"#e74c3c",orange:"#e67e22",yellow:"#f39c12",green:"#27ae60",cyan:"#16a085",blue:"#3498db",purple:"#9b59b6",pink:"#e91e63"};if(m[t])return m[t];let d,r,h;switch(t){case"bg1":return u({h:s,s:a,l:i});case"bg2":return h=l?Math.max(0,i-5):Math.min(100,i+5),u({h:s,s:a,l:h});case"bg3":return h=l?Math.max(0,i-10):Math.min(100,i+10),u({h:s,s:a,l:h});case"ui1":return h=l?Math.max(0,i-15):Math.min(100,i+15),u({h:s,s:a,l:h});case"ui2":return h=l?Math.max(0,i-10):Math.min(100,i+10),u({h:s,s:a,l:h});case"ui3":return h=l?Math.max(0,i-5):Math.min(100,i+5),u({h:s,s:a,l:h});case"tx1":return r=Math.max(0,a-10),h=l?Math.max(0,i-87):Math.min(100,i+77),u({h:s,s:r,l:h});case"tx2":return r=Math.max(0,a-20),h=l?Math.max(0,i-53):Math.min(100,i+45),u({h:s,s:r,l:h});case"tx3":return r=Math.max(0,a-10),h=l?Math.max(0,i-78):Math.min(100,i+30),u({h:s,s:r,l:h});case"tx4":return r=Math.max(0,a-10),h=l?Math.max(0,i-48):Math.min(100,i+40),u({h:s,s:r,l:h});case"hl1":return u({h:o,s:50,l:40});case"hl2":return"#ffb150";default:return"#000000"}}function De(t,e,s){let a=t.createEl("div",{cls:"hsl-controls"}),i=N({},e),o=a.createEl("div",{cls:"color-preview-wrapper"});o.style.position="relative",o.style.display="inline-block";let n=o.createEl("div",{cls:"color-preview"});n.style.backgroundColor=u(i),n.style.cursor="pointer",n.title="Click to pick a color with hex input";let c=o.createEl("input",{type:"color"});c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.opacity="0",c.style.cursor="pointer",c.value=u(i);let l=()=>{let C=u(i);n.style.backgroundColor=C,c.value=C};c.onchange=()=>{let C=Ke(c.value);i.h=C.h,i.s=C.s,i.l=C.l,d.value=C.h.toString(),r.textContent=C.h.toString(),p.value=C.s.toString(),g.textContent=C.s.toString(),b.value=C.l.toString(),P.textContent=C.l.toString(),l(),s(i)};let m=a.createEl("div",{cls:"hsl-control"});m.createEl("label",{text:"Hue"});let d=m.createEl("input",{type:"range"});d.min="0",d.max="360";let r=m.createEl("span",{text:e.h.toString()});d.value=e.h.toString(),d.oninput=()=>{i.h=parseInt(d.value),r.textContent=i.h.toString(),l(),s(i)};let h=a.createEl("div",{cls:"hsl-control"});h.createEl("label",{text:"Saturation"});let p=h.createEl("input",{type:"range"});p.min="0",p.max="100";let g=h.createEl("span",{text:e.s.toString()});p.value=e.s.toString(),p.oninput=()=>{i.s=parseInt(p.value),g.textContent=i.s.toString(),l(),s(i)};let k=a.createEl("div",{cls:"hsl-control"});k.createEl("label",{text:"Lightness"});let b=k.createEl("input",{type:"range"});b.min="0",b.max="100";let P=k.createEl("span",{text:e.l.toString()});b.value=e.l.toString(),b.oninput=()=>{i.l=parseInt(b.value),P.textContent=i.l.toString(),l(),s(i)}}function Me(t,e,s,a,i,o){let n=t.createEl("div",{cls:"color-override collapsible-item"}),c=n.createEl("div",{cls:"override-header"}),l=c.createEl("input",{type:"checkbox"});c.createEl("label",{text:e});let m=c.createEl("div",{cls:"color-input-wrapper"});m.style.position="relative";let d=m.createEl("div",{cls:"color-preview-swatch"});d.style.width="2rem",d.style.height="2rem",d.style.borderRadius="50%",d.style.border="2px solid var(--background-modifier-border)",d.style.cursor="pointer";let r=m.createEl("input",{type:"color"});r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.opacity="0",r.style.cursor="pointer",r.disabled=!0;let h=null,p=g=>{d.style.backgroundColor=g,r.value=g};if(a[s])l.checked=!0,r.disabled=!1,p(a[s]),h=a[s];else{let g=oe(s,i);p(g),h=g}return r.onclick=()=>{if(!l.checked){l.checked=!0,r.disabled=!1;let g=h||a[s]||oe(s,i);a[s]=g,p(g),h=g,o()}},l.onchange=()=>{if(l.checked){r.disabled=!1;let g=h||a[s]||oe(s,i);a[s]=g,p(g),h=g}else r.disabled=!0,h=a[s]||h,delete a[s];o()},r.onchange=()=>{Te(r.value)&&(a[s]=r.value,h=r.value,p(r.value),o())},r.oninput=()=>{Te(r.value)&&(a[s]=r.value,h=r.value,p(r.value),o())},n}var J=class extends D.Modal{constructor(e,s,a,i){super(e);this.plugin=s,this.isEditing=a!==null,this.preset=a||this.createDefaultPreset(),this.onSave=i}createDefaultPreset(){return y.createPreset("New Preset","",this.plugin.settings.customPresets)}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("preset-editor-modal"),e.createEl("div",{cls:"modal-header"}).createEl("h2",{text:this.isEditing?"Edit Preset":"Create New Preset"});let a=e.createEl("div",{cls:"modal-section"});new D.Setting(a).setName("Preset name").setDesc("A unique name for your color preset").addText(r=>{this.nameInput=r.inputEl,r.setValue(this.preset.name).setPlaceholder("Enter preset name").onChange(h=>{this.preset.name=h,this.updatePreview()})}),new D.Setting(a).setName("Author (optional)").setDesc("Your name or the creator of this preset").addText(r=>{this.authorInput=r.inputEl,r.setValue(this.preset.author||"").setPlaceholder("Enter author name").onChange(h=>{this.preset.author=h})});let i=e.createEl("div",{cls:"modes-container"}),o=i.createEl("div",{cls:"mode-section"});o.createEl("h3",{text:"Light Mode"}),this.buildModeContent(o,"light");let n=i.createEl("div",{cls:"mode-section"});n.createEl("h3",{text:"Dark Mode"}),this.buildModeContent(n,"dark");let c=e.createEl("div",{cls:"modal-section"});c.createEl("h3",{text:"Preview"}),this.previewSwatch=c.createEl("div",{cls:"preview-swatch"}),this.updatePreview();let l=e.createEl("div",{cls:"modal-footer"}),m=l.createEl("button",{text:"Cancel",cls:"mod-cta"});m.onclick=()=>this.close();let d=l.createEl("button",{text:this.isEditing?"Update":"Create",cls:"mod-cta"});d.onclick=()=>this.savePreset()}buildModeContent(e,s){e.empty();let a=s==="light"?this.preset.light:this.preset.dark,i=e.createEl("div",{cls:"color-section"}),o=s==="light"?"Light Theme Colors":"Dark Theme Colors";i.createEl("h3",{text:o});let n=i.createEl("div",{cls:"color-group"});n.createEl("label",{text:"Base Color"}),De(n,a.base,v=>{s==="light"?this.preset.light.base=v:this.preset.dark.base=v,this.updatePreview()});let c=i.createEl("div",{cls:"color-group"});c.createEl("label",{text:"Accent Color"}),De(c,a.accent,v=>{s==="light"?this.preset.light.accent=v:this.preset.dark.accent=v,this.updatePreview()});let l=e.createEl("div",{cls:"color-section"}),m=l.createEl("div",{cls:"collapsible-header"});m.createEl("h4",{text:"Advanced Overrides (Optional)"});let d=m.createEl("button",{cls:"collapse-toggle"});(0,D.setIcon)(d,"chevron-down"),a.colors||(a.colors={});let r=[],h=["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2"],p=["Background 1","Background 2","Background 3","UI 1","UI 2","UI 3","Text 1","Text 2","Text 3","Text 4","Highlight 1","Highlight 2"];h.forEach((v,E)=>{let A=Me(l,p[E],v,a.colors,a,()=>this.updatePreview());r.push(A),A.style.display="none"}),d.onclick=()=>{let v=r[0].style.display==="none";r.forEach(E=>E.style.display=v?"flex":"none"),(0,D.setIcon)(d,v?"chevron-up":"chevron-down")};let g=e.createEl("div",{cls:"color-section"}),k=g.createEl("div",{cls:"collapsible-header"});k.createEl("h4",{text:"Syntax Colors (Optional)"});let b=k.createEl("button",{cls:"collapse-toggle"});(0,D.setIcon)(b,"chevron-down");let P=["red","orange","yellow","green","cyan","blue","purple","pink"],C=[];P.forEach(v=>{let E=Me(g,v.charAt(0).toUpperCase()+v.slice(1),v,a.colors,a,()=>this.updatePreview());C.push(E),E.style.display="none"}),b.onclick=()=>{let v=C[0].style.display==="none";C.forEach(E=>E.style.display=v?"flex":"none"),(0,D.setIcon)(b,v?"chevron-up":"chevron-down")}}updatePreview(){this.previewSwatch.empty();let e=this.preset.light,s=this.preset.dark,a=u(e.base),i=u(e.accent),o=u(s.base),n=u(s.accent),c=this.previewSwatch.createEl("div",{cls:"preview-row"});c.createEl("div",{text:"Light Mode",cls:"preview-label"});let l=c.createEl("div",{cls:"preview-colors"}),m=l.createEl("div",{cls:"preview-color"});m.style.background=a;let d=l.createEl("div",{cls:"preview-color"});d.style.background=i;let r=this.previewSwatch.createEl("div",{cls:"preview-row"});r.createEl("div",{text:"Dark Mode",cls:"preview-label"});let h=r.createEl("div",{cls:"preview-colors"}),p=h.createEl("div",{cls:"preview-color"});p.style.background=o;let g=h.createEl("div",{cls:"preview-color"});g.style.background=n}savePreset(){try{if(!this.preset.name.trim())throw new Error("Preset name is required");this.isEditing||(this.preset.id=y.createPreset(this.preset.name,this.preset.author||"",this.plugin.settings.customPresets).id),this.onSave(this.preset),this.close()}catch(e){console.error("Error saving preset:",e)}}onClose(){let{contentEl:e}=this;e.empty()}};var ne=L(require("obsidian"));var j=class extends ne.Modal{constructor(e,s,a){super(e);this.parsedPreset=null;this.plugin=s,this.onImport=a}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("preset-import-modal"),e.createEl("div",{cls:"modal-header"}).createEl("h2",{text:"Import Custom Preset"}),e.createEl("div",{cls:"modal-section"}).createEl("p",{text:"Paste a JSON preset below. You can export presets from this plugin or create them manually following the correct format."});let i=e.createEl("div",{cls:"modal-section"});i.createEl("h3",{text:"JSON Preset Data"}),new ne.Setting(i).setName("Preset JSON").setDesc("Paste the complete JSON preset data here").addTextArea(m=>{this.textArea=m.inputEl,this.textArea.addClass("preset-json-input"),m.setPlaceholder("Paste JSON preset data here...").onChange(d=>this.parseJSON(d))});let o=e.createEl("div",{cls:"modal-section"});o.createEl("h3",{text:"Preview"}),this.previewContainer=o.createEl("div",{cls:"preview-container"}),this.previewContainer.createEl("p",{text:"Enter valid JSON to see a preview of the preset",cls:"preview-placeholder"}),e.createEl("div",{cls:"modal-section error-section hidden"}).createEl("div",{cls:"error-message"});let c=e.createEl("div",{cls:"modal-footer"}),l=c.createEl("button",{text:"Cancel",cls:"mod-cta"});l.onclick=()=>this.close(),this.importButton=c.createEl("button",{text:"Import Preset",cls:"mod-cta"}),this.importButton.disabled=!0,this.importButton.onclick=()=>this.importPreset()}parseJSON(e){let s=this.contentEl.querySelector(".error-section"),a=this.contentEl.querySelector(".error-message");if(this.parsedPreset=null,this.importButton.disabled=!0,s.addClass("hidden"),this.previewContainer.empty(),!e.trim()){this.previewContainer.createEl("p",{text:"Enter valid JSON to see a preview of the preset",cls:"preview-placeholder"});return}try{if(this.parsedPreset=y.importPresetFromJSON(e),this.plugin.settings.customPresets.find(o=>o.id===this.parsedPreset.id))throw new Error(`A preset with ID "${this.parsedPreset.id}" already exists. Please rename the preset.`);this.showPreview(this.parsedPreset),this.importButton.disabled=!1}catch(i){a.textContent=i instanceof Error?i.message:"Invalid JSON format",s.removeClass("hidden"),this.previewContainer.createEl("p",{text:"Fix the JSON errors above to see a preview",cls:"preview-error"})}}showPreview(e){this.previewContainer.empty();let s=this.previewContainer.createEl("div",{cls:"preset-info"}),a=s.createEl("div",{cls:"info-row"});if(a.createEl("strong",{text:"Name: "}),a.createEl("span",{text:e.name}),e.author){let U=s.createEl("div",{cls:"info-row"});U.createEl("strong",{text:"Author: "}),U.createEl("span",{text:e.author})}let i=s.createEl("div",{cls:"info-row"});i.createEl("strong",{text:"Version: "}),i.createEl("span",{text:e.version||"1.0.0"});let o=s.createEl("div",{cls:"info-row"});o.createEl("strong",{text:"ID: "}),o.createEl("span",{text:e.id,cls:"preset-id"});let n=this.previewContainer.createEl("div",{cls:"color-preview-section"});n.createEl("h4",{text:"Color Preview"});let c=n.createEl("div",{cls:"mode-toggle"}),l=c.createEl("button",{text:"Light Mode",cls:"mode-btn active"}),m=c.createEl("button",{text:"Dark Mode",cls:"mode-btn"}),d=n.createEl("div",{cls:"swatch-container"}),r=d.createEl("div",{cls:"mode-swatches active"}),h=r.createEl("div",{cls:"color-swatch"});h.style.backgroundColor=`hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`,h.title=`Base: hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`;let p=r.createEl("div",{cls:"color-swatch"});p.style.backgroundColor=`hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`,p.title=`Accent: hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`;let g=d.createEl("div",{cls:"mode-swatches"}),k=g.createEl("div",{cls:"color-swatch"});k.style.backgroundColor=`hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`,k.title=`Base: hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`;let b=g.createEl("div",{cls:"color-swatch"});b.style.backgroundColor=`hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`,b.title=`Accent: hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`,l.onclick=()=>{l.classList.add("active"),m.classList.remove("active"),r.classList.add("active"),g.classList.remove("active")},m.onclick=()=>{m.classList.add("active"),l.classList.remove("active"),g.classList.add("active"),r.classList.remove("active")};let P=this.previewContainer.createEl("div",{cls:"color-details-section"});P.createEl("h4",{text:"Color Values"});let C=P.createEl("div",{cls:"mode-details"});C.createEl("h5",{text:"Light Mode"});let v=C.createEl("div",{cls:"color-detail"}),E=v.createEl("div",{cls:"detail-swatch"});E.style.backgroundColor=`hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`,v.createEl("span",{text:"Base: "}),v.createEl("span",{text:`hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`});let A=C.createEl("div",{cls:"color-detail"}),fe=A.createEl("div",{cls:"detail-swatch"});fe.style.backgroundColor=`hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`,A.createEl("span",{text:"Accent: "}),A.createEl("span",{text:`hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`});let G=P.createEl("div",{cls:"mode-details"});G.createEl("h5",{text:"Dark Mode"});let B=G.createEl("div",{cls:"color-detail"}),ve=B.createEl("div",{cls:"detail-swatch"});ve.style.backgroundColor=`hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`,B.createEl("span",{text:"Base: "}),B.createEl("span",{text:`hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`});let Y=G.createEl("div",{cls:"color-detail"}),pe=Y.createEl("div",{cls:"detail-swatch"});pe.style.backgroundColor=`hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`,Y.createEl("span",{text:"Accent: "}),Y.createEl("span",{text:`hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`});let se=Object.keys(e.light.colors||{}).length,ae=Object.keys(e.dark.colors||{}).length;(se>0||ae>0)&&this.previewContainer.createEl("div",{cls:"overrides-info"}).createEl("p",{text:`Custom overrides: ${se} light mode, ${ae} dark mode`})}importPreset(){this.parsedPreset&&(this.onImport(this.parsedPreset),this.close())}onClose(){let{contentEl:e}=this;e.empty()}};var Xe=L(require("obsidian")),q=class extends Xe.Modal{constructor(e,s,a,i="Yes",o="Cancel"){super(e);this.title=s,this.message=a,this.confirmText=i,this.cancelText=o}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.title}),e.createEl("p",{text:this.message});let s=e.createDiv("modal-button-container");s.style.display="flex",s.style.gap="10px",s.style.justifyContent="flex-end",s.style.marginTop="20px",s.createEl("button",{text:this.cancelText,cls:"mod-cta"}).addEventListener("click",()=>{this.close(),this.resolve(!1)});let i=s.createEl("button",{text:this.confirmText,cls:"mod-cta"});i.style.backgroundColor="var(--interactive-accent)",i.style.color="var(--text-on-accent)",i.addEventListener("click",()=>{this.close(),this.resolve(!0)}),i.focus()}onClose(){let{contentEl:e}=this;e.empty()}static show(e,s,a,i="Yes",o="Cancel"){return I(this,null,function*(){return new Promise(n=>{let c=new q(e,s,a,i,o);c.resolve=n,c.open()})})}};function Ze(t,e,s,a){if(new X.Setting(t).setName("Enable custom presets").setDesc("Allow creation and use of custom color presets").addToggle(i=>i.setValue(e.settings.enableCustomPresets).onChange(o=>{e.settings.enableCustomPresets=o,e.saveData(e.settings),a()})),!!e.settings.enableCustomPresets)if(new X.Setting(t).setName("Create new preset").setDesc("Design a custom color scheme from scratch").addExtraButton(i=>i.setIcon("plus").setTooltip("Create new preset").onClick(()=>Qe(s,e,null,a))),new X.Setting(t).setName("Import preset").setDesc("Import a preset from JSON data").addExtraButton(i=>i.setIcon("download").setTooltip("Import preset").onClick(()=>_t(s,e,a))),e.settings.customPresets.length>0){let i=t.createEl("div",{cls:"custom-presets-list"});e.settings.customPresets.sort((o,n)=>o.name.localeCompare(n.name)).forEach(o=>{At(i,o,s,e,a)})}else t.createEl("div",{cls:"custom-presets-empty"}).createEl("p",{text:"No custom presets yet. Create your first preset to get started!",cls:"empty-message"})}function At(t,e,s,a,i){let o=t.createEl("div",{cls:"custom-preset-item"}),n=o.createEl("div",{cls:"preset-info"}),c=Je(e);n.appendChild(c);let l=n.createEl("div",{cls:"preset-details"});l.createEl("div",{text:e.name,cls:"preset-name"}),e.author&&l.createEl("div",{text:`by ${e.author}`,cls:"preset-author"});let m=l.createEl("div",{text:e.id,cls:"preset-id"});m.style.fontSize="0.8rem",m.style.color="var(--text-muted)",m.style.fontFamily="monospace",new X.Setting(o).setName("").setDesc("").addExtraButton(d=>d.setIcon("edit").setTooltip("Edit preset").onClick(()=>Qe(s,a,e,i))).addExtraButton(d=>d.setIcon("download").setTooltip("Export preset").onClick(()=>Nt(e))).addExtraButton(d=>d.setIcon("trash").setTooltip("Delete preset").onClick(()=>I(this,null,function*(){return yield Ht(s,a,e,i)})))}function Qe(t,e,s,a){new J(t,e,s,o=>{if(s){let n=e.settings.customPresets.findIndex(c=>c.id===s.id);n!==-1&&(e.settings.customPresets[n]=o)}else e.settings.customPresets.push(o);e.saveData(e.settings),a()}).open()}function _t(t,e,s){new j(t,e,i=>{e.settings.customPresets.push(i),e.saveData(e.settings),s()}).open()}function Nt(t){let e=y.exportPresetAsJSON(t),s=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=`${t.id}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}function Ht(t,e,s,a){return I(this,null,function*(){if(y.isPresetActive(s.id,e.settings.lightScheme,e.settings.darkScheme)){if(!(yield q.show(t,"Delete Active Preset","This preset is currently active. Deleting it will switch to the default scheme. Continue?","Delete")))return;e.settings.lightScheme===`minimal-custom-${s.id}`&&(e.settings.lightScheme="minimal-oxygen-light"),e.settings.darkScheme===`minimal-custom-${s.id}`&&(e.settings.darkScheme="minimal-oxygen-dark")}e.settings.customPresets=e.settings.customPresets.filter(o=>o.id!==s.id),yield e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS(),a()})}var Ie=class extends et.PluginSettingTab{constructor(e,s){super(e,s);this.plugin=s}display(){let{containerEl:e}=this;e.empty(),Ye(e,this.plugin),Ze(e,this.plugin,this.app,()=>this.display()),Ue(e,this.plugin),ze(e,this.plugin),Ve(e,this.plugin)}};var O={PLUGIN_THEME:"minimal-theme",THEME_LIGHT:"theme-light",THEME_DARK:"theme-dark",CUSTOM_PRESETS_STYLE:"minimal-custom-presets",THEME_OVERRIDE:"data-theme-override"},re=["minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"],le=["minimal-dark","minimal-dark-tonal","minimal-dark-black"],Z=["minimal-oxygen-light","minimal-minimal-light","minimal-atom-light","minimal-ayu-light","minimal-catppuccin-light","minimal-eink-light","minimal-everforest-light","minimal-flexoki-light","minimal-gruvbox-light","minimal-macos-light","minimal-nord-light","minimal-rose-pine-light","minimal-notion-light","minimal-solarized-light","minimal-things-light"],Q=["minimal-oxygen-dark","minimal-minimal-dark","minimal-atom-dark","minimal-ayu-dark","minimal-catppuccin-dark","minimal-dracula-dark","minimal-eink-dark","minimal-everforest-dark","minimal-flexoki-dark","minimal-gruvbox-dark","minimal-macos-dark","minimal-nord-dark","minimal-rose-pine-dark","minimal-notion-dark","minimal-solarized-dark","minimal-things-dark"];var ce=["table-100","table-default-width","table-wide","table-max"],me=["iframe-100","iframe-default-width","iframe-wide","iframe-max"],de=["img-100","img-default-width","img-wide","img-max"],he=["map-100","map-default-width","map-wide","map-max"],ge=["chart-100","chart-default-width","chart-wide","chart-max"],f={INCREASE_FONT:"increase-body-font-size",DECREASE_FONT:"decrease-body-font-size",CYCLE_DARK_STYLE:"toggle-minimal-dark-cycle",CYCLE_LIGHT_STYLE:"toggle-minimal-light-cycle",TOGGLE_BORDERS:"toggle-hidden-borders",TOGGLE_COLORFUL_HEADINGS:"toggle-colorful-headings",TOGGLE_FOCUS_MODE:"toggle-minimal-focus-mode",TOGGLE_COLORFUL_FRAME:"toggle-minimal-colorful-frame",TOGGLE_IMAGE_GRID:"toggle-minimal-img-grid",TOGGLE_THEME:"toggle-minimal-switch",CYCLE_TABLE_WIDTH:"cycle-minimal-table-width",CYCLE_IMAGE_WIDTH:"cycle-minimal-image-width",CYCLE_IFRAME_WIDTH:"cycle-minimal-iframe-width",CYCLE_CHART_WIDTH:"cycle-minimal-chart-width",CYCLE_MAP_WIDTH:"cycle-minimal-map-width",LIGHT_DEFAULT:"toggle-minimal-light-default",LIGHT_WHITE:"toggle-minimal-light-white",LIGHT_TONAL:"toggle-minimal-light-tonal",LIGHT_CONTRAST:"toggle-minimal-light-contrast",DARK_DEFAULT:"toggle-minimal-dark-default",DARK_TONAL:"toggle-minimal-dark-tonal",DARK_BLACK:"toggle-minimal-dark-black",CREATE_PRESET:"create-custom-preset",IMPORT_PRESET:"import-custom-preset",CYCLE_PRESETS_LIGHT:"cycle-custom-presets-light",CYCLE_PRESETS_DARK:"cycle-custom-presets-dark",DEV_BLOCK_WIDTH:"toggle-minimal-dev-block-width"};var Oe={FONT_SIZE_NORMAL:16,FONT_SIZE_SMALL:13,LINE_HEIGHT:1.5,LINE_WIDTH:40,LINE_WIDTH_WIDE:50,MAX_WIDTH:88,FONT_STEP:.5},R={BASE_FONT_SIZE:"baseFontSize",FOLD_HEADING:"foldHeading",SHOW_LINE_NUMBER:"showLineNumber",READABLE_LINE_LENGTH:"readableLineLength",THEME:"theme"},T={LIGHT:"moonstone",DARK:"obsidian",SYSTEM:"system"},tt="Oxygen";var st=50,at=100,Ae={"minimal-oxygen-light":"Oxygen","minimal-minimal-light":"Minimal","minimal-atom-light":"Atom","minimal-ayu-light":"Ayu","minimal-catppuccin-light":"Catppuccin","minimal-eink-light":"E-ink (beta)","minimal-everforest-light":"Everforest","minimal-flexoki-light":"Flexoki","minimal-gruvbox-light":"Gruvbox","minimal-macos-light":"macOS","minimal-nord-light":"Nord","minimal-rose-pine-light":"Ros\xE9 Pine","minimal-notion-light":"Sky","minimal-solarized-light":"Solarized","minimal-things-light":"Things","minimal-oxygen-dark":"Oxygen","minimal-minimal-dark":"Minimal","minimal-atom-dark":"Atom","minimal-ayu-dark":"Ayu","minimal-catppuccin-dark":"Catppuccin","minimal-dracula-dark":"Dracula","minimal-eink-dark":"E-ink (beta)","minimal-everforest-dark":"Everforest","minimal-flexoki-dark":"Flexoki","minimal-gruvbox-dark":"Gruvbox","minimal-macos-dark":"macOS","minimal-nord-dark":"Nord","minimal-rose-pine-dark":"Ros\xE9 Pine","minimal-notion-dark":"Sky","minimal-solarized-dark":"Solarized","minimal-things-dark":"Things"};var _e=class{constructor(e){this.plugin=e}initialize(){!this.plugin.isOxygenThemeActive()||(this.createStyleElement(),this.updateCSS())}updateCSS(){if(!this.plugin.isOxygenThemeActive())return;document.querySelectorAll("style[data-custom-presets]").forEach(o=>o.remove());let e=document.createElement("style");e.id=O.CUSTOM_PRESETS_STYLE,e.setAttribute("data-custom-presets","true");let s="",a=this.plugin.settings.customPresets.find(o=>this.plugin.settings.lightScheme===`minimal-custom-${o.id}`),i=this.plugin.settings.customPresets.find(o=>this.plugin.settings.darkScheme===`minimal-custom-${o.id}`);a&&(s+=y.generatePresetCSS(a,"light")+`
`),i&&(s+=y.generatePresetCSS(i,"dark")+`
`),e.textContent=s,document.head.appendChild(e),setTimeout(()=>{document.body.offsetHeight},at)}createStyleElement(){let e=document.getElementById(O.CUSTOM_PRESETS_STYLE);e&&e.remove();let s=document.createElement("style");s.id=O.CUSTOM_PRESETS_STYLE,s.setAttribute("data-custom-presets","true"),document.head.appendChild(s)}cleanup(){document.querySelectorAll("style[data-custom-preset]").forEach(s=>s.remove()),document.querySelectorAll("style[data-custom-presets]").forEach(s=>s.remove());let e=document.getElementById(O.CUSTOM_PRESETS_STYLE);e&&e.remove()}};var Ne=class{constructor(e){this.cssObserver=null;this.plugin=e,this.customPresetCSS=new _e(e)}initialize(){this.loadRules(),setTimeout(()=>{this.setupCSSWatcher()},150)}initializeCustomPresets(){this.customPresetCSS.initialize()}cleanup(){this.unloadRules(),this.removeStyle(),this.removeSettings(),this.removeLightScheme(),this.removeDarkScheme(),this.customPresetCSS.cleanup(),this.cssObserver&&(this.cssObserver.disconnect(),this.cssObserver=null)}refresh(){!this.plugin.isOxygenThemeActive()||this.updateStyle()}updateCustomPresetCSS(){this.customPresetCSS.updateCSS()}updateStyle(){if(!this.plugin.isOxygenThemeActive())return;this.removeStyle(),this.removeSettings(),document.body.addClass(this.plugin.settings.lightStyle,this.plugin.settings.darkStyle);try{document.body.classList.contains("theme-light")?this.updateLightScheme():document.body.classList.contains("theme-dark")?this.updateDarkScheme():(document.body.addClass("theme-light"),this.updateLightScheme())}catch(s){console.error("Error updating schemes:",s)}document.body.classList.toggle("borders-none",!this.plugin.settings.bordersToggle),document.body.classList.toggle("colorful-headings",this.plugin.settings.colorfulHeadings),document.body.classList.toggle("colorful-frame",this.plugin.settings.colorfulFrame),document.body.classList.toggle("colorful-active",this.plugin.settings.colorfulActiveStates),document.body.classList.toggle("minimal-focus-mode",this.plugin.settings.focusMode),document.body.classList.toggle("links-int-on",this.plugin.settings.underlineInternal),document.body.classList.toggle("links-ext-on",this.plugin.settings.underlineExternal),document.body.classList.toggle("full-width-media",this.plugin.settings.fullWidthMedia),document.body.classList.toggle("img-grid",this.plugin.settings.imgGrid),document.body.classList.toggle("minimal-dev-block-width",this.plugin.settings.devBlockWidth),document.body.classList.toggle("minimal-status-off",!this.plugin.settings.minimalStatus),document.body.classList.toggle("full-file-names",!this.plugin.settings.trimNames),document.body.classList.toggle("labeled-nav",this.plugin.settings.labeledNav),document.body.classList.toggle("minimal-folding",this.plugin.settings.folding),document.body.addClass(this.plugin.settings.chartWidth,this.plugin.settings.tableWidth,this.plugin.settings.imgWidth,this.plugin.settings.iframeWidth,this.plugin.settings.mapWidth);let e=document.getElementById("minimal-theme");if(e){let s="body.minimal-theme{--font-ui-small:"+this.plugin.settings.textSmall+"px;--line-height:"+this.plugin.settings.lineHeight+";--line-width:"+this.plugin.settings.lineWidth+"rem;--line-width-wide:"+this.plugin.settings.lineWidthWide+"rem;--max-width:"+this.plugin.settings.maxWidth+"%;--font-editor-override:"+this.plugin.settings.editorFont+`;}
`;e.innerText=s,this.customPresetCSS.updateCSS()}}updateLightStyle(){if(!this.plugin.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",this.plugin.settings.lightStyle);let e=this.plugin.app;e.vault.getConfig("theme")!=="system"&&(e.setTheme("moonstone"),e.vault.setConfig("theme","moonstone")),this.plugin.app.workspace.trigger("css-change")}updateDarkStyle(){if(!this.plugin.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",this.plugin.settings.darkStyle);let e=this.plugin.app;e.vault.getConfig("theme")!=="system"&&(e.setTheme("obsidian"),e.vault.setConfig("theme","obsidian")),this.plugin.app.workspace.trigger("css-change")}updateLightScheme(){!this.plugin.isOxygenThemeActive()||(this.removeLightScheme(),this.removeDarkScheme(),document.body.classList.contains("theme-light")||(document.body.removeClass("theme-dark"),document.body.addClass("theme-light")),document.body.addClass(this.plugin.settings.lightScheme))}updateDarkScheme(){!this.plugin.isOxygenThemeActive()||(this.removeDarkScheme(),this.removeLightScheme(),document.body.classList.contains("theme-dark")||(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),document.body.addClass(this.plugin.settings.darkScheme))}removeStyle(){document.body.removeClass("minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white","minimal-dark","minimal-dark-tonal","minimal-dark-black")}removeLightScheme(){document.body.removeClass(...Z),this.plugin.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}removeDarkScheme(){document.body.removeClass(...Q),this.plugin.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}removeSettings(){document.body.removeClass("borders-none","colorful-headings","colorful-frame","colorful-active","minimal-focus-mode","links-int-on","links-ext-on","full-width-media","img-grid","minimal-dev-block-width","minimal-status-off","full-file-names","labeled-nav","minimal-folding","table-wide","table-max","table-100","table-default-width","iframe-wide","iframe-max","iframe-100","iframe-default-width","img-wide","img-max","img-100","img-default-width","chart-wide","chart-max","chart-100","chart-default-width","map-wide","map-max","map-100","map-default-width")}loadRules(){if(!this.plugin.isOxygenThemeActive())return;let e=document.createElement("style");e.id="minimal-theme",e.setAttribute(O.THEME_OVERRIDE,"true"),document.getElementsByTagName("head")[0].appendChild(e),document.body.classList.add(O.PLUGIN_THEME),this.updateStyle()}unloadRules(){let e=document.getElementById("minimal-theme");e&&e.remove(),document.body.classList.remove(O.PLUGIN_THEME)}setupCSSWatcher(){this.cssObserver=new MutationObserver(e=>{let s=!1;e.forEach(a=>{a.type==="childList"&&a.addedNodes.forEach(i=>{i.nodeType===Node.ELEMENT_NODE&&i.tagName==="STYLE"&&(s=!0)})}),s&&setTimeout(()=>{this.customPresetCSS.updateCSS()},st)}),this.cssObserver.observe(document.head,{childList:!0,subtree:!0})}};var He=class{constructor(e){this.plugin=e}updateTheme(){let e=this.plugin.app;if(e.vault.getConfig("theme")===T.SYSTEM)document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));else{document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));let i=e.vault.getConfig("theme")===T.LIGHT?T.DARK:T.LIGHT;e.setTheme(i),e.vault.setConfig("theme",i)}this.plugin.app.workspace.trigger("css-change")}switchToLight(){document.body.removeClass("theme-dark"),document.body.addClass("theme-light");let e=this.plugin.app;e.vault.getConfig("theme")!==T.SYSTEM&&(e.setTheme(T.LIGHT),e.vault.setConfig("theme",T.LIGHT)),this.plugin.app.workspace.trigger("css-change")}switchToDark(){document.body.removeClass("theme-light"),document.body.addClass("theme-dark");let e=this.plugin.app;e.vault.getConfig("theme")!==T.SYSTEM&&(e.setTheme(T.DARK),e.vault.setConfig("theme",T.DARK)),this.plugin.app.workspace.trigger("css-change")}getCurrentMode(){return document.body.classList.contains("theme-light")?"light":"dark"}updateSidebarTheme(){if(!this.plugin.isOxygenThemeActive())return;let e=document.getElementsByClassName("mod-left-split")[0],s=document.getElementsByClassName("side-dock-ribbon")[0];e&&s&&document.body.classList.contains("theme-light")&&this.plugin.settings.lightStyle==="minimal-light-contrast"?(e.addClass("theme-dark"),s.addClass("theme-dark")):e&&s&&(e.removeClass("theme-dark"),s.removeClass("theme-dark"))}cleanupSidebarTheme(){let e=document.getElementsByClassName("mod-left-split")[0];e&&e.removeClass("theme-dark");let s=document.getElementsByClassName("side-dock-ribbon")[0];s&&s.removeClass("theme-dark")}};var $e=class{constructor(e){this.plugin=e}setupWatchers(){let e=this.plugin.app;this.plugin.registerEvent(e.vault.on("config-changed",()=>{this.syncFromVault()})),this.plugin.registerEvent(this.plugin.app.workspace.on("css-change",()=>{this.updateSidebarTheme()}))}syncFromVault(e=!1){let s=this.plugin.app,a=s.vault.getConfig(R.BASE_FONT_SIZE);typeof a=="number"&&(this.plugin.settings.textNormal=a),this.plugin.settings.folding=!!s.vault.getConfig(R.FOLD_HEADING),this.plugin.settings.lineNumbers=!!s.vault.getConfig(R.SHOW_LINE_NUMBER),this.plugin.settings.readableLineLength=!!s.vault.getConfig(R.READABLE_LINE_LENGTH);let i=document.body.classList;i.toggle("minimal-folding",this.plugin.settings.folding),i.toggle("minimal-line-nums",this.plugin.settings.lineNumbers),i.toggle("minimal-readable",this.plugin.settings.readableLineLength),i.toggle("minimal-readable-off",!this.plugin.settings.readableLineLength),e||this.plugin.saveData(this.plugin.settings)}setFontSize(){let e=this.plugin.app;e.vault.setConfig(R.BASE_FONT_SIZE,this.plugin.settings.textNormal),e.updateFontSize()}updateSidebarTheme(){let e=document.getElementsByClassName("mod-left-split")[0],s=document.getElementsByClassName("side-dock-ribbon")[0];e&&s&&document.body.classList.contains("theme-light")&&this.plugin.settings.lightStyle==="minimal-light-contrast"?(e.addClass("theme-dark"),s.addClass("theme-dark")):e&&s&&(e.removeClass("theme-dark"),s.removeClass("theme-dark"))}cleanup(){}};function it(t){t.addCommand({id:f.INCREASE_FONT,name:"Increase body font size",callback:()=>{t.settings.textNormal+=Oe.FONT_STEP,t.saveData(t.settings),ot(t)}}),t.addCommand({id:f.DECREASE_FONT,name:"Decrease body font size",callback:()=>{t.settings.textNormal-=Oe.FONT_STEP,t.saveData(t.settings),ot(t)}})}function ot(t){let e=t.app;e.vault.setConfig("baseFontSize",t.settings.textNormal),e.updateFontSize()}function nt(t){t.addCommand({id:f.CYCLE_DARK_STYLE,name:"Cycle between dark mode styles",callback:()=>{let s=(le.indexOf(t.settings.darkStyle)+1)%le.length;t.settings.darkStyle=le[s],t.saveData(t.settings),ue(t)}}),t.addCommand({id:f.CYCLE_LIGHT_STYLE,name:"Cycle between light mode styles",callback:()=>{let s=(re.indexOf(t.settings.lightStyle)+1)%re.length;t.settings.lightStyle=re[s],t.saveData(t.settings),ee(t)}}),t.addCommand({id:f.LIGHT_DEFAULT,name:"Use light mode (default)",callback:()=>{t.settings.lightStyle="minimal-light",t.saveData(t.settings),ee(t)}}),t.addCommand({id:f.LIGHT_WHITE,name:"Use light mode (all white)",callback:()=>{t.settings.lightStyle="minimal-light-white",t.saveData(t.settings),ee(t)}}),t.addCommand({id:f.LIGHT_TONAL,name:"Use light mode (low contrast)",callback:()=>{t.settings.lightStyle="minimal-light-tonal",t.saveData(t.settings),ee(t)}}),t.addCommand({id:f.LIGHT_CONTRAST,name:"Use light mode (high contrast)",callback:()=>{t.settings.lightStyle="minimal-light-contrast",t.saveData(t.settings),ee(t)}}),t.addCommand({id:f.DARK_DEFAULT,name:"Use dark mode (default)",callback:()=>{t.settings.darkStyle="minimal-dark",t.saveData(t.settings),ue(t)}}),t.addCommand({id:f.DARK_TONAL,name:"Use dark mode (low contrast)",callback:()=>{t.settings.darkStyle="minimal-dark-tonal",t.saveData(t.settings),ue(t)}}),t.addCommand({id:f.DARK_BLACK,name:"Use dark mode (true black)",callback:()=>{t.settings.darkStyle="minimal-dark-black",t.saveData(t.settings),ue(t)}})}function ee(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",t.settings.lightStyle);let e=t.app;e.vault.getConfig("theme")!=="system"&&(e.setTheme("moonstone"),e.vault.setConfig("theme","moonstone")),t.app.workspace.trigger("css-change")}function ue(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",t.settings.darkStyle);let e=t.app;e.vault.getConfig("theme")!=="system"&&(e.setTheme("obsidian"),e.vault.setConfig("theme","obsidian")),t.app.workspace.trigger("css-change")}function rt(t){Z.forEach(e=>{let s=Ae[e]||e,a=`toggle-${e}`;t.addCommand({id:a,name:`Switch light color scheme to ${s} (light)`,callback:()=>{t.settings.lightScheme=e,t.saveData(t.settings),$t(t),Rt(t)}})}),Q.forEach(e=>{let s=Ae[e]||e,a=`toggle-${e}`;t.addCommand({id:a,name:`Switch dark color scheme to ${s} (dark)`,callback:()=>{t.settings.darkScheme=e,t.saveData(t.settings),Wt(t),Ft(t)}})})}function $t(t){lt(t),ct(t),document.body.classList.contains("theme-light")||(document.body.removeClass("theme-dark"),document.body.addClass("theme-light")),document.body.addClass(t.settings.lightScheme)}function Wt(t){ct(t),lt(t),document.body.classList.contains("theme-dark")||(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),document.body.addClass(t.settings.darkScheme)}function Rt(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",t.settings.lightStyle);let e=t.app;e.vault.getConfig("theme")!=="system"&&(e.setTheme("moonstone"),e.vault.setConfig("theme","moonstone")),t.app.workspace.trigger("css-change")}function Ft(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",t.settings.darkStyle);let e=t.app;e.vault.getConfig("theme")!=="system"&&(e.setTheme("obsidian"),e.vault.setConfig("theme","obsidian")),t.app.workspace.trigger("css-change")}function lt(t){document.body.removeClass(...Z),t.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}function ct(t){document.body.removeClass(...Q),t.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}function mt(t){t.addCommand({id:f.CREATE_PRESET,name:"Create custom color preset",callback:()=>{new J(t.app,t,null,s=>{t.settings.customPresets.push(s),t.saveData(t.settings)}).open()}}),t.addCommand({id:f.IMPORT_PRESET,name:"Import custom color preset",callback:()=>{new j(t.app,t,s=>{t.settings.customPresets.push(s),t.saveData(t.settings)}).open()}}),t.addCommand({id:f.CYCLE_PRESETS_LIGHT,name:"Cycle through custom presets (light mode)",callback:()=>{if(t.settings.customPresets.length===0)return;let s=(t.settings.customPresets.findIndex(i=>t.settings.lightScheme===`minimal-custom-${i.id}`)+1)%t.settings.customPresets.length,a=t.settings.customPresets[s];t.settings.lightScheme=`minimal-custom-${a.id}`,t.saveData(t.settings),Gt(t)}}),t.addCommand({id:f.CYCLE_PRESETS_DARK,name:"Cycle through custom presets (dark mode)",callback:()=>{if(t.settings.customPresets.length===0)return;let s=(t.settings.customPresets.findIndex(i=>t.settings.darkScheme===`minimal-custom-${i.id}`)+1)%t.settings.customPresets.length,a=t.settings.customPresets[s];t.settings.darkScheme=`minimal-custom-${a.id}`,t.saveData(t.settings),Bt(t)}})}function Gt(t){"updateLightScheme"in t&&t.updateLightScheme()}function Bt(t){"updateDarkScheme"in t&&t.updateDarkScheme()}function dt(t){t.addCommand({id:f.TOGGLE_BORDERS,name:"Toggle sidebar borders",callback:()=>{t.settings.bordersToggle=!t.settings.bordersToggle,t.saveData(t.settings),F(t)}}),t.addCommand({id:f.TOGGLE_COLORFUL_HEADINGS,name:"Toggle colorful headings",callback:()=>{t.settings.colorfulHeadings=!t.settings.colorfulHeadings,t.saveData(t.settings),F(t)}}),t.addCommand({id:f.TOGGLE_FOCUS_MODE,name:"Toggle focus mode",callback:()=>{t.settings.focusMode=!t.settings.focusMode,t.saveData(t.settings),F(t)}}),t.addCommand({id:f.TOGGLE_COLORFUL_FRAME,name:"Toggle colorful window frame",callback:()=>{t.settings.colorfulFrame=!t.settings.colorfulFrame,t.saveData(t.settings),F(t)}}),t.addCommand({id:f.TOGGLE_IMAGE_GRID,name:"Toggle image grids",callback:()=>{t.settings.imgGrid=!t.settings.imgGrid,t.saveData(t.settings),F(t)}}),t.addCommand({id:f.TOGGLE_THEME,name:"Switch between light and dark mode",callback:()=>{Yt(t)}}),t.addCommand({id:f.DEV_BLOCK_WIDTH,name:"Dev \u2014 Show block widths",callback:()=>{t.settings.devBlockWidth=!t.settings.devBlockWidth,t.saveData(t.settings),F(t)}})}function F(t){"updateStyle"in t&&t.updateStyle()}function Yt(t){if(!t.isOxygenThemeActive())return;let e=t.app;if(e.vault.getConfig("theme")==="system")document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));else{document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));let a=e.vault.getConfig("theme")==="moonstone"?"obsidian":"moonstone";e.setTheme(a),e.vault.setConfig("theme",a)}t.app.workspace.trigger("css-change")}function ht(t){t.addCommand({id:f.CYCLE_TABLE_WIDTH,name:"Cycle between table width options",callback:()=>{let s=(ce.indexOf(t.settings.tableWidth)+1)%ce.length;t.settings.tableWidth=ce[s],t.saveData(t.settings),te(t)}}),t.addCommand({id:f.CYCLE_IMAGE_WIDTH,name:"Cycle between image width options",callback:()=>{let s=(de.indexOf(t.settings.imgWidth)+1)%de.length;t.settings.imgWidth=de[s],t.saveData(t.settings),te(t)}}),t.addCommand({id:f.CYCLE_IFRAME_WIDTH,name:"Cycle between iframe width options",callback:()=>{let s=(me.indexOf(t.settings.iframeWidth)+1)%me.length;t.settings.iframeWidth=me[s],t.saveData(t.settings),te(t)}}),t.addCommand({id:f.CYCLE_CHART_WIDTH,name:"Cycle between chart width options",callback:()=>{let s=(ge.indexOf(t.settings.chartWidth)+1)%ge.length;t.settings.chartWidth=ge[s],t.saveData(t.settings),te(t)}}),t.addCommand({id:f.CYCLE_MAP_WIDTH,name:"Cycle between map width options",callback:()=>{let s=(he.indexOf(t.settings.mapWidth)+1)%he.length;t.settings.mapWidth=he[s],t.saveData(t.settings),te(t)}})}function te(t){"updateStyle"in t&&t.updateStyle()}function gt(t){it(t),nt(t),rt(t),mt(t),dt(t),ht(t)}var We=class extends ut.Plugin{constructor(){super(...arguments);this._isOxygenActive=!1}onload(){return I(this,null,function*(){yield this.loadSettings(),this.styleManager=new Ne(this),this.themeManager=new He(this),this.settingsSyncManager=new $e(this),this.addSettingTab(new Ie(this.app,this)),this._isOxygenActive=this.checkOxygenTheme(),this._isOxygenActive&&this.styleManager.initialize(),this.settingsSyncManager.setupWatchers(),this.settingsSyncManager.syncFromVault(!0),this.app.workspace.onLayoutReady(()=>{this._isOxygenActive&&this.themeManager.updateSidebarTheme()}),gt(this),setTimeout(()=>{this._isOxygenActive&&this.styleManager.initializeCustomPresets()},100);let e;this.registerEvent(this.app.workspace.on("css-change",()=>{window.clearTimeout(e),e=window.setTimeout(()=>{let s=this.checkOxygenTheme();this._isOxygenActive&&!s?(this._isOxygenActive=!1,this.styleManager.cleanup()):!this._isOxygenActive&&s&&(this._isOxygenActive=!0,this.styleManager.initialize())},100)}))})}onunload(){this.themeManager.cleanupSidebarTheme(),this.styleManager.cleanup(),this.settingsSyncManager.cleanup()}loadSettings(){return I(this,null,function*(){this.settings=Object.assign({},ke,yield this.loadData()),this.settings.lightScheme==="minimal-default-light"&&(this.settings.lightScheme="minimal-minimal-light"),this.settings.darkScheme==="minimal-default-dark"&&(this.settings.darkScheme="minimal-minimal-dark"),this.settings.customPresets||(this.settings.customPresets=[]),this.settings.enableCustomPresets===void 0&&(this.settings.enableCustomPresets=!0)})}saveSettings(){return I(this,null,function*(){yield this.saveData(this.settings)})}refresh(){this.styleManager.refresh()}updateStyle(){this.styleManager.updateStyle()}updateLightStyle(){this.styleManager.updateLightStyle()}updateDarkStyle(){this.styleManager.updateDarkStyle()}updateLightScheme(){this.styleManager.updateLightScheme()}updateDarkScheme(){this.styleManager.updateDarkScheme()}updateCustomPresetCSS(){this.styleManager.updateCustomPresetCSS()}setFontSize(){this.settingsSyncManager.setFontSize()}isOxygenThemeActive(){return this._isOxygenActive}checkOxygenTheme(){return this.app.vault.getConfig("cssTheme")===tt}};
