/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var lt=Object.defineProperty;var It=Object.getOwnPropertyDescriptor;var Pt=Object.getOwnPropertyNames;var Nt=Object.prototype.hasOwnProperty;var vt=(w,t)=>()=>(w&&(t=w(w=0)),t);var ve=(w,t)=>{for(var e in t)lt(w,e,{get:t[e],enumerable:!0})},Et=(w,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Pt(t))!Nt.call(w,o)&&o!==e&&lt(w,o,{get:()=>t[o],enumerable:!(a=It(t,o))||a.enumerable});return w};var bt=w=>Et(lt({},"__esModule",{value:!0}),w);var dt={};ve(dt,{GiscusScriptParser:()=>pt});var pt,ut=vt(()=>{"use strict";pt=class{static parseScript(t){try{let e=t.trim();if(!e.includes("giscus.app/client.js"))return null;let a={},o=/data-([a-z-]+)="([^"]*)"/g,n;for(;(n=o.exec(e))!==null;){let[,r,c]=n;a[r]=c}let s={repo:a.repo||"",repoId:a["repo-id"]||"",category:a.category||"",categoryId:a["category-id"]||"",mapping:a.mapping||"pathname",strict:a.strict||"0",reactions:a["reactions-enabled"]||"1",metadata:a["emit-metadata"]||"0",inputPosition:a["input-position"]||"bottom",theme:a.theme||"preferred_color_scheme",lang:a.lang||"en",loading:a.loading||"lazy"};return!s.repo||!s.repoId?null:s}catch(e){return console.error("Error parsing Giscus script:",e),null}}static validateScript(t){let e=t.trim();if(!e.includes("giscus.app/client.js"))return{valid:!1,error:"Script must contain giscus.app/client.js"};if(!e.includes("<script")||!e.includes("<\/script>"))return{valid:!1,error:"Script must be a valid HTML script tag"};let a=this.parseScript(t);return a?a.repo?a.repoId?{valid:!0}:{valid:!1,error:"Repository ID (data-repo-id) is required"}:{valid:!1,error:"Repository (data-repo) is required"}:{valid:!1,error:"Could not parse Giscus configuration from script"}}static getSampleScript(){return`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`}}});var $t={};ve($t,{default:()=>rt});module.exports=bt($t);var St=require("obsidian");var Ce=["Inter","Roboto","Open Sans","Lato","Poppins","Source Sans Pro","Nunito","Montserrat","Playfair Display","Merriweather","Lora","Crimson Text","PT Serif","Libre Baskerville","Fira Code","JetBrains Mono","Source Code Pro","IBM Plex Mono","Cascadia Code"],Ee={runWizardOnStartup:!0,currentTemplate:"standard",currentTheme:"oxygen",customThemeFile:"custom",contentOrganization:"file-based",themeColors:{mode:"simple",extractedColors:void 0,simpleColors:{accent:"#5865f2",background:"#1e1e1e"},lastExtracted:void 0},siteInfo:{site:"https://astro-modular.netlify.app",title:"Astro Modular",description:"A flexible blog theme designed for Obsidian users.",author:"David V. Kimball",language:"en",faviconThemeAdaptive:!0,defaultOgImageAlt:"Astro Modular logo.",ogImage:"/open-graph.png",favicon:"/favicon.png",faviconLight:"/favicon-light.png",faviconDark:"/favicon-dark.png"},layout:{contentWidth:"45rem"},tableOfContents:{enabled:!0,depth:4},footer:{enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0},seo:{defaultOgImageAlt:"Astro Modular logo."},navigation:{showNavigation:!0,style:"traditional",showMobileMenu:!0,pages:[{title:"Posts",url:"/posts"},{title:"Projects",url:"/projects"},{title:"Docs",url:"/docs"},{title:"About",url:"/about"},{title:"GitHub",url:"https://github.com/davidvkimball/astro-modular"}],social:[{title:"X",url:"https://x.com/davidvkimball",icon:"x-twitter"},{title:"GitHub",url:"https://github.com/davidvkimball",icon:"github"}]},commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},homeOptions:{featuredPost:{enabled:!0,type:"latest",slug:"getting-started"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,comments:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,featureButton:"mode",showSocialIconsInFooter:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",profilePicture:!1,quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},typography:{headingFont:"Inter",proseFont:"Inter",monoFont:"JetBrains Mono",fontSource:"local",fontDisplay:"swap",customFonts:{heading:"",prose:"",mono:"",urls:""}},optionalFeatures:{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},deployment:{platform:"netlify"},pluginConfig:{obsidianSettings:{attachmentLocation:"subfolder",subfolderName:"attachments"},astroComposerSettings:{creationMode:"file",indexFileName:"index"},imageInserterSettings:{valueFormat:"[[attachments/{image-url}]]",insertFormat:"[[attachments/{image-url}]]"}},optionalContentTypes:{projects:!0,docs:!0},availableThemes:"default",customThemes:"",customThemeGenerationEnabled:!1},pe=[{id:"oxygen",name:"Oxygen",description:"Modern, clean design",previewColors:["#075985","#38bdf8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#020617"},{id:"minimal",name:"Minimal",description:"Understated with high contrast",previewColors:["#2d383c","#87bfcf"],backgroundColorLight:"#fafafa",backgroundColorDark:"#1a1a1a"},{id:"atom",name:"Atom",description:"Dark theme with vibrant accents",previewColors:["#075985","#578af2"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#181a1f"},{id:"ayu",name:"Ayu",description:"Clean theme with warm colors",previewColors:["#99521a","#ff9933"],backgroundColorLight:"#f8f8f0",backgroundColorDark:"#0f1419"},{id:"catppuccin",name:"Catppuccin",description:"Pastel color palette",previewColors:["#95624f","#df7763"],backgroundColorLight:"#fef7ed",backgroundColorDark:"#181825"},{id:"charcoal",name:"Charcoal",description:"Dark, professional look",previewColors:["#202020","#c0c0c0"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#000000"},{id:"dracula",name:"Dracula",description:"Dark theme with purple accents",previewColors:["#7c3aed","#a78bfa"],backgroundColorLight:"#f8f8f2",backgroundColorDark:"#191a21"},{id:"everforest",name:"Everforest",description:"Soft, warm colors",previewColors:["#5a7a5a","#83c092"],backgroundColorLight:"#f7f6f3",backgroundColorDark:"#2d353b"},{id:"flexoki",name:"Flexoki",description:"Based on Material Design 3",previewColors:["#16504a","#4dbdb5"],backgroundColorLight:"#fefefe",backgroundColorDark:"#100f0f"},{id:"gruvbox",name:"Gruvbox",description:"Retro groove color scheme",previewColors:["#7a5412","#f78b33"],backgroundColorLight:"#fbf1c7",backgroundColorDark:"#1d2021"},{id:"macos",name:"macOS",description:"Native macOS appearance",previewColors:["#002e66","#339fff"],backgroundColorLight:"#f5f5f7",backgroundColorDark:"#141414"},{id:"nord",name:"Nord",description:"Arctic-inspired color palette",previewColors:["#2e4c63","#5e94b8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#2e3440"},{id:"obsidian",name:"Obsidian",description:"Matches Obsidian's default theme",previewColors:["#522994","#9c75ff"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#0a0a0a"},{id:"rose-pine",name:"Ros\xE9 Pine",description:"All natural pine, faux fir, and winter",previewColors:["#ab2142","#ef97a9"],backgroundColorLight:"#faf4ed",backgroundColorDark:"#191724"},{id:"sky",name:"Sky",description:"Light, airy design",previewColors:["#136194","#46aad0"],backgroundColorLight:"#f0f9ff",backgroundColorDark:"#232729"},{id:"solarized",name:"Solarized",description:"Precision colors for machines and people",previewColors:["#0e3754","#339fff"],backgroundColorLight:"#fdf6e3",backgroundColorDark:"#002b36"},{id:"things",name:"Things",description:"Clean, minimal design",previewColors:["#1e3a8a","#4d95f7"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#17191c"},{id:"custom",name:"Custom",description:"Use a custom theme file",previewColors:["#666666","#999999"],backgroundColorLight:"#ffffff",backgroundColorDark:"#000000"}],ue=[{id:"standard",name:"Standard",description:"Full-featured blog with all default options enabled",features:["Command palette","Table of contents","Reading time","Linked mentions","Footer","Social icons","Scroll to top","Dark mode toggle"],recommended:!0},{id:"compact",name:"Compact",description:"Balanced setup for smaller sites with optimized layout",features:["Command palette","Table of contents","Reading time","Compact linked mentions","Custom aspect ratio"],recommended:!1},{id:"minimal",name:"Minimal",description:"Clean, simple blog with minimal features and content",features:["Command palette","Search posts/pages","Minimal navigation"],recommended:!1}];var Ve=require("obsidian");var Ot=require("obsidian");var we=class{constructor(t){var a,o,n,s,r,c,l,i,u,d,p,g,h,C,T,N,L,v,_,x,A,F,H,D,$,k,M,V,G,B,U,P,I,Y,J,te,ae,oe,ne,se,ie,re;this.plugin=t;let e=t.settings;this.state={currentStep:1,totalSteps:10,selectedTemplate:e.currentTemplate,selectedTheme:e.currentTheme,selectedContentOrg:e.contentOrganization,selectedSiteInfo:e.siteInfo,selectedNavigation:e.navigation,selectedFeatures:(()=>{var le,ce;let X={standard:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},compact:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},minimal:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,hideScrollBar:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},custom:{...e.features}},Z=X[e.currentTemplate]||X.standard;return(le=e.optionalFeatures)!=null&&le.profilePicture&&(Z.profilePicture=e.optionalFeatures.profilePicture.enabled),(ce=e.optionalFeatures)!=null&&ce.comments&&(Z.comments=e.optionalFeatures.comments.enabled),Z})(),selectedTypography:e.typography,selectedOptionalFeatures:{profilePicture:{enabled:((o=(a=e.optionalFeatures)==null?void 0:a.profilePicture)==null?void 0:o.enabled)||!1,image:((s=(n=e.optionalFeatures)==null?void 0:n.profilePicture)==null?void 0:s.image)||"/profile.jpg",alt:((c=(r=e.optionalFeatures)==null?void 0:r.profilePicture)==null?void 0:c.alt)||"Profile picture",size:((i=(l=e.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:i.size)||"md",url:((d=(u=e.optionalFeatures)==null?void 0:u.profilePicture)==null?void 0:d.url)||"",placement:((g=(p=e.optionalFeatures)==null?void 0:p.profilePicture)==null?void 0:g.placement)||"footer",style:((C=(h=e.optionalFeatures)==null?void 0:h.profilePicture)==null?void 0:C.style)||"circle"},comments:{enabled:((N=(T=e.optionalFeatures)==null?void 0:T.comments)==null?void 0:N.enabled)||!1,provider:"giscus",rawScript:((v=(L=e.optionalFeatures)==null?void 0:L.comments)==null?void 0:v.rawScript)||"",repo:((x=(_=e.optionalFeatures)==null?void 0:_.comments)==null?void 0:x.repo)||"davidvkimball/astro-modular",repoId:((F=(A=e.optionalFeatures)==null?void 0:A.comments)==null?void 0:F.repoId)||"R_kgDOPllfKw",category:((D=(H=e.optionalFeatures)==null?void 0:H.comments)==null?void 0:D.category)||"General",categoryId:((k=($=e.optionalFeatures)==null?void 0:$.comments)==null?void 0:k.categoryId)||"DIC_kwDOPllfK84CvUpx",mapping:((V=(M=e.optionalFeatures)==null?void 0:M.comments)==null?void 0:V.mapping)||"pathname",strict:((B=(G=e.optionalFeatures)==null?void 0:G.comments)==null?void 0:B.strict)||"0",reactions:((P=(U=e.optionalFeatures)==null?void 0:U.comments)==null?void 0:P.reactions)||"1",metadata:((Y=(I=e.optionalFeatures)==null?void 0:I.comments)==null?void 0:Y.metadata)||"0",inputPosition:((te=(J=e.optionalFeatures)==null?void 0:J.comments)==null?void 0:te.inputPosition)||"bottom",theme:((oe=(ae=e.optionalFeatures)==null?void 0:ae.comments)==null?void 0:oe.theme)||"preferred_color_scheme",lang:((se=(ne=e.optionalFeatures)==null?void 0:ne.comments)==null?void 0:se.lang)||"en",loading:((re=(ie=e.optionalFeatures)==null?void 0:ie.comments)==null?void 0:re.loading)||"lazy"}},selectedOptionalContentTypes:(()=>{let X=e.currentTemplate==="standard";return{projects:X,docs:X}})(),selectedDeployment:e.deployment.platform,runWizardOnStartup:e.runWizardOnStartup}}getState(){return this.state}updateState(t){this.state={...this.state,...t}}setState(t){this.state={...this.state,...t}}nextStep(){this.state.currentStep<this.state.totalSteps&&this.state.currentStep++}previousStep(){this.state.currentStep>1&&this.state.currentStep--}canGoNext(){return this.state.currentStep<this.state.totalSteps}canGoPrevious(){return this.state.currentStep>1}getProgress(){return this.state.currentStep/this.state.totalSteps*100}refreshState(){var n,s,r,c,l,i,u,d,p,g,h,C,T,N,L,v,_,x,A,F,H,D,$,k,M,V,G,B,U,P,I,Y,J,te,ae,oe,ne,se,ie,re,X,Z,le,ce;let t=this.plugin.settings;this.state.selectedTemplate=t.currentTemplate,this.state.selectedTheme=t.currentTheme,this.state.selectedContentOrg=t.contentOrganization,this.state.selectedSiteInfo=t.siteInfo,this.state.selectedNavigation=t.navigation,this.state.selectedTypography=t.typography,this.state.selectedDeployment=t.deployment.platform,this.state.runWizardOnStartup=t.runWizardOnStartup;let e={standard:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},compact:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},minimal:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,hideScrollBar:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}},a=e[t.currentTemplate]||e.standard;(n=t.optionalFeatures)!=null&&n.profilePicture&&(a.profilePicture=t.optionalFeatures.profilePicture.enabled),(s=t.optionalFeatures)!=null&&s.comments&&(a.comments=t.optionalFeatures.comments.enabled),this.state.selectedFeatures=a,this.state.selectedOptionalFeatures={profilePicture:{enabled:((c=(r=t.optionalFeatures)==null?void 0:r.profilePicture)==null?void 0:c.enabled)||!1,image:((i=(l=t.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:i.image)||"/profile.jpg",alt:((d=(u=t.optionalFeatures)==null?void 0:u.profilePicture)==null?void 0:d.alt)||"Profile picture",size:((g=(p=t.optionalFeatures)==null?void 0:p.profilePicture)==null?void 0:g.size)||"md",url:((C=(h=t.optionalFeatures)==null?void 0:h.profilePicture)==null?void 0:C.url)||"",placement:((N=(T=t.optionalFeatures)==null?void 0:T.profilePicture)==null?void 0:N.placement)||"footer",style:((v=(L=t.optionalFeatures)==null?void 0:L.profilePicture)==null?void 0:v.style)||"circle"},comments:{enabled:((x=(_=t.optionalFeatures)==null?void 0:_.comments)==null?void 0:x.enabled)||!1,provider:"giscus",rawScript:((F=(A=t.optionalFeatures)==null?void 0:A.comments)==null?void 0:F.rawScript)||"",repo:((D=(H=t.optionalFeatures)==null?void 0:H.comments)==null?void 0:D.repo)||"davidvkimball/astro-modular",repoId:((k=($=t.optionalFeatures)==null?void 0:$.comments)==null?void 0:k.repoId)||"R_kgDOPllfKw",category:((V=(M=t.optionalFeatures)==null?void 0:M.comments)==null?void 0:V.category)||"General",categoryId:((B=(G=t.optionalFeatures)==null?void 0:G.comments)==null?void 0:B.categoryId)||"DIC_kwDOPllfK84CvUpx",mapping:((P=(U=t.optionalFeatures)==null?void 0:U.comments)==null?void 0:P.mapping)||"pathname",strict:((Y=(I=t.optionalFeatures)==null?void 0:I.comments)==null?void 0:Y.strict)||"0",reactions:((te=(J=t.optionalFeatures)==null?void 0:J.comments)==null?void 0:te.reactions)||"1",metadata:((oe=(ae=t.optionalFeatures)==null?void 0:ae.comments)==null?void 0:oe.metadata)||"0",inputPosition:((se=(ne=t.optionalFeatures)==null?void 0:ne.comments)==null?void 0:se.inputPosition)||"bottom",theme:((re=(ie=t.optionalFeatures)==null?void 0:ie.comments)==null?void 0:re.theme)||"preferred_color_scheme",lang:((Z=(X=t.optionalFeatures)==null?void 0:X.comments)==null?void 0:Z.lang)||"en",loading:((ce=(le=t.optionalFeatures)==null?void 0:le.comments)==null?void 0:ce.loading)||"lazy"}};let o=t.currentTemplate==="standard";this.state.selectedOptionalContentTypes={projects:o,docs:o}}buildFinalSettings(){var a,o,n,s,r,c,l,i;let t=this.plugin.settings,e=t.currentTemplate;if(t.currentTemplate=this.state.selectedTemplate,t.currentTheme=this.state.selectedTheme,t.contentOrganization=this.state.selectedContentOrg,t.siteInfo=this.state.selectedSiteInfo,t.navigation=this.state.selectedNavigation,t.features=this.state.selectedFeatures,t.typography=this.state.selectedTypography,t.optionalFeatures=this.state.selectedOptionalFeatures,t.deployment.platform=this.state.selectedDeployment,t.runWizardOnStartup=this.state.runWizardOnStartup,this.state.selectedFeatures&&((a=t.postOptions)!=null&&a.graphView&&(t.postOptions.graphView.enabled=(o=this.state.selectedFeatures.graphView)!=null?o:!1),(n=t.postOptions)!=null&&n.linkedMentions&&(t.postOptions.linkedMentions.enabled=(s=this.state.selectedFeatures.linkedMentions)!=null?s:!1,t.postOptions.linkedMentions.linkedMentionsCompact=(r=this.state.selectedFeatures.linkedMentionsCompact)!=null?r:!1),(c=t.commandPalette)!=null&&c.quickActions&&this.state.selectedFeatures.quickActions&&(t.commandPalette.quickActions={...t.commandPalette.quickActions,...this.state.selectedFeatures.quickActions})),this.state.selectedTemplate!==e){let u=this.plugin.configManager.getTemplatePreset(this.state.selectedTemplate);u&&u.config&&u.config.tableOfContents&&(t.tableOfContents={...t.tableOfContents,...u.config.tableOfContents})}(l=t.optionalFeatures)!=null&&l.profilePicture&&(t.features.profilePicture=t.optionalFeatures.profilePicture.enabled),(i=t.optionalFeatures)!=null&&i.comments&&(t.features.comments=t.optionalFeatures.comments.enabled),t.optionalContentTypes=this.state.selectedOptionalContentTypes}};var q=class{constructor(t,e,a,o){this.app=t,this.modal=e,this.stateManager=a,this.plugin=o}nextStep(){this.stateManager.nextStep(),this.modal.close()}previousStep(){this.stateManager.previousStep(),this.modal.close()}updateState(t){this.stateManager.updateState(t)}getState(){return this.stateManager.getState()}};var Fe=class extends q{render(t){var a,o,n,s,r,c;let e=this.getState();t.innerHTML=`
			<div class="welcome-content">
				<h2>Welcome to Astro Modular!</h2>
				<p>This wizard will help you set up your Astro Modular theme with the perfect configuration for your needs.</p>
				
				<div class="checkbox-option">
					<input type="checkbox" id="run-wizard-startup" ${e.runWizardOnStartup?"checked":""}>
					<label for="run-wizard-startup">Run this wizard on startup</label>
				</div>
				
				<div class="site-info-form">
					<h3>Site Information</h3>
					<div class="form-group">
						<label for="site-url">URL</label>
						<input type="text" id="site-url" value="${e.selectedSiteInfo.site}" placeholder="https://astro-modular.netlify.app">
					</div>
					<div class="form-group">
						<label for="site-title">Title</label>
						<input type="text" id="site-title" value="${e.selectedSiteInfo.title}" placeholder="Astro Modular">
					</div>
					<div class="form-group">
						<label for="site-description">Description</label>
						<input type="text" id="site-description" value="${e.selectedSiteInfo.description}" placeholder="A flexible blog theme designed for Obsidian users.">
					</div>
					<div class="form-group">
						<label for="site-author">Author Name</label>
						<input type="text" id="site-author" value="${e.selectedSiteInfo.author}" placeholder="David V. Kimball">
					</div>
					<div class="form-group">
						<label for="site-language">Language</label>
						<input type="text" id="site-language" value="${e.selectedSiteInfo.language}" placeholder="en">
					</div>
				</div>
			</div>
		`,(a=t.querySelector("#run-wizard-startup"))==null||a.addEventListener("change",l=>{let i=l.target;this.updateState({runWizardOnStartup:i.checked})}),(o=t.querySelector("#site-url"))==null||o.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,site:l.target.value}})}),(n=t.querySelector("#site-title"))==null||n.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,title:l.target.value}})}),(s=t.querySelector("#site-description"))==null||s.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,description:l.target.value}})}),(r=t.querySelector("#site-author"))==null||r.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,author:l.target.value}})}),(c=t.querySelector("#site-language"))==null||c.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,language:l.target.value}})})}};var ct=require("obsidian"),Ae=class extends q{render(t){let e=this.getState();t.innerHTML=`
			<div class="template-selection">
				<h2>Choose your preset</h2>
				<p>Select a preset that best fits your content type and goals.</p>
				<div class="template-options">
					${ue.map(o=>`
						<div class="template-option ${e.selectedTemplate===o.id?"selected":""}" 
							 data-template="${o.id}">
							<div class="template-header">
								<h3>${o.name}</h3>
								${o.recommended?'<span class="recommended">Default</span>':""}
							</div>
							<p class="template-description">${o.description}</p>
							<div class="template-features">
								${o.features.map(n=>`<span class="feature-tag">${n}</span>`).join("")}
							</div>
						</div>
					`).join("")}
				</div>
				<div class="template-actions" style="margin-top: 2rem; padding-top: 1.5rem;">
					<button class="mod-cta" id="edit-config-directly">
						Edit config.ts directly
					</button>
					<p class="template-action-desc" style="margin-top: 0.5rem; margin-bottom: 0;">Skip the wizard and edit your Astro configuration file directly (advanced).</p>
				</div>
			</div>
		`,t.querySelectorAll(".template-option").forEach(o=>{o.addEventListener("click",()=>{let n=o.getAttribute("data-template");if(n){this.updateState({selectedTemplate:n});let s=n==="standard";this.updateState({selectedOptionalContentTypes:{projects:s,docs:s}}),this.syncFeaturesWithTemplate(n),this.render(t)}})});let a=t.querySelector("#edit-config-directly");a&&a.addEventListener("click",()=>{this.openConfigFile()})}syncFeaturesWithTemplate(t){let e=this.plugin.configManager.getTemplatePreset(t);if(!e||!e.config||!e.config.features){console.error("Template preset not found:",t);return}this.updateState({selectedFeatures:e.config.features})}async updatePluginSettingsWithTemplate(t){var n,s,r,c,l,i,u,d,p,g,h,C,T,N,L,v,_,x,A,F,H,D,$,k,M,V,G,B,U,P,I;let e=this.plugin.settings,a=this.plugin.configManager.getTemplatePreset(t);if(!a||!a.config){console.error("Template preset not found:",t);return}let o=this.plugin.configManager.getTemplateConfig(t,e);if(a.config.features){let Y=e.features.comments,J=e.features.profilePicture;e.features={...e.features,...a.config.features},e.features.comments=Y,e.features.profilePicture=J,(n=e.postOptions)!=null&&n.graphView&&(e.postOptions.graphView.enabled=(s=a.config.features.graphView)!=null?s:!1,e.features.graphView=e.postOptions.graphView.enabled),(r=e.postOptions)!=null&&r.linkedMentions&&(e.postOptions.linkedMentions.enabled=(c=a.config.features.linkedMentions)!=null?c:!1,e.postOptions.linkedMentions.linkedMentionsCompact=(l=a.config.features.linkedMentionsCompact)!=null?l:!1),(i=e.commandPalette)!=null&&i.quickActions&&a.config.features.quickActions&&(e.commandPalette.quickActions={...e.commandPalette.quickActions,...a.config.features.quickActions})}o.commandPalette&&(e.commandPalette={...e.commandPalette,enabled:(u=o.commandPalette.enabled)!=null?u:e.commandPalette.enabled,placeholder:(d=o.commandPalette.placeholder)!=null?d:e.commandPalette.placeholder,shortcut:(p=o.commandPalette.shortcut)!=null?p:e.commandPalette.shortcut,search:{...e.commandPalette.search,...o.commandPalette.search||{}},sections:{...e.commandPalette.sections,...o.commandPalette.sections||{}},quickActions:{...e.commandPalette.quickActions,...a.config.features.quickActions||{}}},a.config.features.quickActions&&(e.features.quickActions={...e.features.quickActions,...a.config.features.quickActions})),o.homeOptions&&(e.homeOptions={...e.homeOptions,featuredPost:{...e.homeOptions.featuredPost,...o.homeOptions.featuredPost||{}},recentPosts:{...e.homeOptions.recentPosts,...o.homeOptions.recentPosts||{}},projects:{...e.homeOptions.projects,...o.homeOptions.projects||{}},docs:{...e.homeOptions.docs,...o.homeOptions.docs||{}},blurb:{...e.homeOptions.blurb,...o.homeOptions.blurb||{}}}),o.postOptions&&(e.postOptions={...e.postOptions,postsPerPage:(g=o.postOptions.postsPerPage)!=null?g:e.postOptions.postsPerPage,readingTime:(h=o.postOptions.readingTime)!=null?h:e.postOptions.readingTime,wordCount:(C=o.postOptions.wordCount)!=null?C:e.postOptions.wordCount,tags:(T=o.postOptions.tags)!=null?T:e.postOptions.tags,postNavigation:(N=o.postOptions.postNavigation)!=null?N:e.postOptions.postNavigation,showPostCardCoverImages:(L=o.postOptions.showPostCardCoverImages)!=null?L:e.postOptions.showPostCardCoverImages,postCardAspectRatio:(v=o.postOptions.postCardAspectRatio)!=null?v:e.postOptions.postCardAspectRatio,linkedMentions:{...e.postOptions.linkedMentions,...o.postOptions.linkedMentions||{}},graphView:{...e.postOptions.graphView,enabled:(x=(_=o.postOptions.graphView)==null?void 0:_.enabled)!=null?x:e.postOptions.graphView.enabled,showInSidebar:(F=(A=o.postOptions.graphView)==null?void 0:A.showInSidebar)!=null?F:e.postOptions.graphView.showInSidebar,maxNodes:(D=(H=o.postOptions.graphView)==null?void 0:H.maxNodes)!=null?D:e.postOptions.graphView.maxNodes,showOrphanedPosts:(k=($=o.postOptions.graphView)==null?void 0:$.showOrphanedPosts)!=null?k:e.postOptions.graphView.showOrphanedPosts},comments:e.postOptions.comments}),o.navigation&&(e.navigation={...e.navigation,showNavigation:(M=o.navigation.showNavigation)!=null?M:e.navigation.showNavigation,showMobileMenu:(V=o.navigation.showMobileMenu)!=null?V:e.navigation.showMobileMenu,style:(G=o.navigation.style)!=null?G:e.navigation.style}),a.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...a.config.tableOfContents}),o.optionalContentTypes&&(e.optionalContentTypes={projects:(B=o.optionalContentTypes.projects)!=null?B:!1,docs:(U=o.optionalContentTypes.docs)!=null?U:!1}),o.footer&&(e.footer={...e.footer,showSocialIconsInFooter:(P=o.footer.showSocialIconsInFooter)!=null?P:e.footer.showSocialIconsInFooter},e.features.showSocialIconsInFooter=(I=o.footer.showSocialIconsInFooter)!=null?I:e.features.showSocialIconsInFooter),await this.plugin.saveData(e),await this.plugin.loadSettings(),this.refreshSettingsTab()}refreshSettingsTab(){let t=this.plugin.settingsTab;t&&typeof t.display=="function"&&t.display()}openConfigFile(){try{let t=require("fs"),e=require("path"),{shell:a}=require("electron"),o=this.app.vault.adapter.basePath||this.app.vault.adapter.path,n=typeof o=="string"?o:o.toString(),s=e.join(n,"..","config.ts");t.existsSync(s)||t.writeFileSync(s,`// Astro Modular Configuration
// Customize your settings here

export const siteConfig = {
  // Add your configuration here
};
`),a.openPath(s),new ct.Notice("Opening config.ts for direct editing"),this.modal.close()}catch(t){new ct.Notice(`Error opening config file: ${t instanceof Error?t.message:String(t)}`)}}};var Me=class extends q{render(t){let e=this.getState(),a=this.isObsidianDarkMode(),o=pe.filter(n=>n.id!=="custom");t.innerHTML=`
			<div class="theme-selection">
				<h2>Choose your theme</h2>
				<p>Select a color scheme that matches your style and content.</p>
				<div class="theme-options">
					${o.map(n=>`
						<div class="theme-option ${e.selectedTheme===n.id?"selected":""}" 
							 data-theme="${n.id}" 
							 style="background: ${a?n.backgroundColorDark:n.backgroundColorLight};">
							<div class="theme-preview" style="background: linear-gradient(135deg, ${n.previewColors.join(", ")});">
								<div class="theme-preview-content">
									<div class="preview-text">Sample Text</div>
									<div class="preview-accent">Accent</div>
								</div>
							</div>
							<div class="theme-info">
								<h3>${n.name}</h3>
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,t.querySelectorAll(".theme-option").forEach(n=>{n.addEventListener("click",()=>{let s=n.getAttribute("data-theme");s&&(this.updateState({selectedTheme:s}),this.render(t))})})}isObsidianDarkMode(){let t=document.body,e=t.classList.contains("theme-dark")||t.classList.contains("dark"),a=getComputedStyle(document.documentElement),n=a.getPropertyValue("color-scheme").trim()==="dark",s=a.getPropertyValue("--background-primary").trim(),r=Boolean(s&&(s.includes("#")&&parseInt(s.slice(1,3),16)<128||s.includes("rgb")&&s.includes("0, 0, 0")||s.includes("hsl")&&s.includes("0, 0%, 0%")));return e||n||r}};var Oe=require("obsidian"),De=class extends q{render(t){let e=this.getState();t.innerHTML=`
			<div class="font-selection">
				<h2>Choose your fonts</h2>
				<p>Select fonts for headings, body text, and code.</p>
			</div>
		`;let a=t.querySelector(".font-selection").createDiv("font-options"),o=(n,s,r,c)=>{new Oe.Setting(a).setName(n).setDesc(s).addDropdown(l=>{Ce.forEach(i=>{l.addOption(i,i)}),l.setValue(r).onChange(c)})};o("Heading Font","Font for headings and titles",e.selectedTypography.headingFont,n=>this.updateTypographySetting("headingFont",n,e)),o("Body Font","Font for body text and paragraphs",e.selectedTypography.proseFont,n=>this.updateTypographySetting("proseFont",n,e)),o("Monospace Font","Font for code blocks and inline code",e.selectedTypography.monoFont,n=>this.updateTypographySetting("monoFont",n,e)),new Oe.Setting(a).setName("Font Source").setDesc("Choose how fonts are loaded").addDropdown(n=>{n.addOption("local","Local (Google Fonts)"),n.addOption("cdn","CDN (Custom)"),n.setValue(e.selectedTypography.fontSource).onChange(s=>{this.updateTypographySetting("fontSource",s,e),this.render(t)})}),e.selectedTypography.fontSource==="cdn"&&(new Oe.Setting(a).setName("Custom Font URLs").setDesc("Comma-separated URLs for custom fonts").addText(n=>{var s;return n.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.urls)||"").setPlaceholder("https://fonts.googleapis.com/css2?family=Custom+Font:wght@400;600&display=swap").onChange(r=>this.updateCustomFontSetting("urls",r,e))}),new Oe.Setting(a).setName("Custom Heading Font Name").setDesc("Font family name for headings").addText(n=>{var s;return n.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.heading)||"").setPlaceholder("Custom Heading Font").onChange(r=>this.updateCustomFontSetting("heading",r,e))}),new Oe.Setting(a).setName("Custom Body Font Name").setDesc("Font family name for body text").addText(n=>{var s;return n.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.prose)||"").setPlaceholder("Custom Body Font").onChange(r=>this.updateCustomFontSetting("prose",r,e))}),new Oe.Setting(a).setName("Custom Monospace Font Name").setDesc("Font family name for code").addText(n=>{var s;return n.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.mono)||"").setPlaceholder("Custom Monospace Font").onChange(r=>this.updateCustomFontSetting("mono",r,e))}))}updateTypographySetting(t,e,a){let o=this.getState();this.updateState({selectedTypography:{...o.selectedTypography,[t]:e}})}updateCustomFontSetting(t,e,a){let o=this.getState();this.updateState({selectedTypography:{...o.selectedTypography,customFonts:{...o.selectedTypography.customFonts,[t]:e}}})}};var xe=class extends q{render(t){let e=this.getState();t.innerHTML=`
			<div class="content-org-selection">
				<h2>Content organization</h2>
				<p>Choose how you want to organize your content and assets.</p>
				<div class="org-options">
					<div class="org-option ${e.selectedContentOrg==="file-based"?"selected":""}" 
						 data-org="file-based">
						<div class="org-header">
							<h3>File-based</h3>
							<span class="default-badge">Default</span>
						</div>
						<p>Single markdown files with images in attachments subfolder</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post.md
\u2514\u2500\u2500 attachments/
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
					<div class="org-option ${e.selectedContentOrg==="folder-based"?"selected":""}" 
						 data-org="folder-based">
						<div class="org-header">
							<h3>Folder-based</h3>
						</div>
						<p>Each post gets its own folder with co-located assets</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post/
\u2502   \u251C\u2500\u2500 index.md
\u2502   \u2514\u2500\u2500 image.jpg
\u2514\u2500\u2500 another-post/
    \u251C\u2500\u2500 index.md
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
				</div>
			</div>
		`,t.querySelectorAll(".org-option").forEach(a=>{a.addEventListener("click",()=>{let o=a.getAttribute("data-org");o&&(this.updateState({selectedContentOrg:o}),this.render(t))})})}};var ke=class extends q{render(t){let e=this.getState();t.innerHTML=`
			<div class="navigation-selection">
				<h2>Navigation setup</h2>
				<p>Configure your site navigation and social links.</p>
				
				<div class="navigation-sections">
					<div class="nav-section">
						<h3>Navigation Pages</h3>
						<p>Add pages to your main navigation menu.</p>
						<div class="nav-items" id="pages-list">
							${e.selectedNavigation.pages.map((a,o)=>`
								<div class="nav-item" data-index="${o}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Page Title" value="${a.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="/page-url" value="${a.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${o}">Remove</button>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-page">+ Add Page</button>
					</div>
					
					<div class="nav-section">
						<h3>Social Links</h3>
						<p>Add social media links for your footer.</p>
						<div class="nav-items" id="social-list">
							${e.selectedNavigation.social.map((a,o)=>`
								<div class="nav-item" data-index="${o}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Social Title" value="${a.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="https://example.com" value="${a.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${o}">Remove</button>
									</div>
									<div class="nav-icon-row">
										<input type="text" class="nav-icon" placeholder="icon-name" value="${a.icon||""}" draggable="false">
										<div class="nav-icon-help">
											<small>Icon names from FontAwesome Brands</small>
										</div>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-social">+ Add Social Link</button>
					</div>
				</div>
			</div>
		`,this.setupEventHandlers(t)}setupEventHandlers(t){let e=this.getState(),a=t.querySelector("#pages-list");if(a){let c=l=>{let i=l.target;if(i.classList.contains("nav-title")||i.classList.contains("nav-url")){let u=i.closest(".nav-item"),d=parseInt((u==null?void 0:u.getAttribute("data-index"))||"0"),p=i.classList.contains("nav-title")?"title":"url";e.selectedNavigation.pages[d][p]=i.value}};a._inputHandler&&a.removeEventListener("input",a._inputHandler),a._inputHandler=c,a.addEventListener("input",c)}let o=t.querySelector("#social-list");if(o){let c=l=>{let i=l.target;if(i.classList.contains("nav-title")||i.classList.contains("nav-url")||i.classList.contains("nav-icon")){let u=i.closest(".nav-item"),d=parseInt((u==null?void 0:u.getAttribute("data-index"))||"0"),p=i.classList.contains("nav-title")?"title":i.classList.contains("nav-url")?"url":"icon";e.selectedNavigation.social[d][p]=i.value}};o._inputHandler&&o.removeEventListener("input",o._inputHandler),o._inputHandler=c,o.addEventListener("input",c)}let n=t.querySelector("#add-page");if(n){let c=()=>{e.selectedNavigation.pages.push({title:"New Page",url:"/new-page"}),this.render(t)};n._clickHandler&&n.removeEventListener("click",n._clickHandler),n._clickHandler=c,n.addEventListener("click",c)}let s=t.querySelector("#add-social");if(s){let c=()=>{e.selectedNavigation.social.push({title:"New Social",url:"https://example.com",icon:""}),this.render(t)};s._clickHandler&&s.removeEventListener("click",s._clickHandler),s._clickHandler=c,s.addEventListener("click",c)}let r=c=>{let l=c.target;if(l.classList.contains("nav-remove")){c.preventDefault(),c.stopPropagation();let i=parseInt(l.getAttribute("data-index")||"0"),u=l.closest("#pages-list");console.log("Remove clicked:",{index:i,isPage:!!u,target:l}),u?e.selectedNavigation.pages.splice(i,1):e.selectedNavigation.social.splice(i,1),this.render(t)}};t._removeHandler&&t.removeEventListener("click",t._removeHandler),t._removeHandler=r,t.addEventListener("click",r),this.setupDragAndDrop(t)}setupDragAndDrop(t){let e=this.getState(),a=null,o=l=>{let i=l.target;i.classList.contains("nav-item")&&(a=i,i.style.opacity="0.5")},n=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.opacity="1",a=null)},s=l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&a&&i!==a){let u=i.getBoundingClientRect(),d=u.top+u.height/2;l.clientY<d?(i.style.borderTop="2px solid var(--interactive-accent)",i.style.borderBottom="none"):(i.style.borderBottom="2px solid var(--interactive-accent)",i.style.borderTop="none")}},r=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.borderTop="none",i.style.borderBottom="none")},c=l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&a){let u=parseInt(i.getAttribute("data-index")||"0"),d=parseInt(a.getAttribute("data-index")||"0"),p=i.closest("#pages-list"),g=i.closest("#social-list");if(i.style.borderTop="none",i.style.borderBottom="none",u!==d){if(p){let h=e.selectedNavigation.pages.splice(d,1)[0];e.selectedNavigation.pages.splice(u,0,h)}else if(g){let h=e.selectedNavigation.social.splice(d,1)[0];e.selectedNavigation.social.splice(u,0,h)}this.render(t)}}};t._dragStartHandler&&(t.removeEventListener("dragstart",t._dragStartHandler),t.removeEventListener("dragend",t._dragEndHandler),t.removeEventListener("dragover",t._dragOverHandler),t.removeEventListener("dragleave",t._dragLeaveHandler),t.removeEventListener("drop",t._dropHandler)),t._dragStartHandler=o,t._dragEndHandler=n,t._dragOverHandler=s,t._dragLeaveHandler=r,t._dropHandler=c,t.addEventListener("dragstart",o),t.addEventListener("dragend",n),t.addEventListener("dragover",s),t.addEventListener("dragleave",r),t.addEventListener("drop",c)}};var be=require("obsidian"),Le=class extends q{render(t){let e=this.getState();t.innerHTML=`
			<div class="features-selection">
				<h2>Optional features</h2>
				<p>Enable or disable specific features for your site.</p>
			</div>
		`;let a=t.querySelector(".features-selection").createDiv("features-list");this.renderProfilePictureFeatureNative(a,e),this.renderCommentsFeatureNative(a,e)}renderProfilePictureFeatureNative(t,e){var r,c,l;let a=((c=(r=e.selectedOptionalFeatures)==null?void 0:r.profilePicture)==null?void 0:c.enabled)||!1,o=((l=e.selectedOptionalFeatures)==null?void 0:l.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"};new be.Setting(t).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(i=>i.setValue(a).onChange(u=>{var g;let d=this.getState();this.updateState({selectedFeatures:{...d.selectedFeatures,profilePicture:u},selectedOptionalFeatures:{...d.selectedOptionalFeatures,profilePicture:{...(g=d.selectedOptionalFeatures)==null?void 0:g.profilePicture,enabled:u}}});let p=t.querySelector(".profile-picture-options");p&&(p.style.display=u?"block":"none")}));let n=t.createDiv("profile-picture-options");n.style.display=a?"block":"none",n.className="profile-picture-options";let s=(i,u,d,p)=>{let g=new be.Setting(n).setName(i).setDesc(u);d==="text"?g.addText(h=>{var C;return h.setValue(o[i]||"").setPlaceholder(((C=p==null?void 0:p[0])==null?void 0:C.value)||"").onChange(T=>this.updateProfileSetting(i,T,e))}):g.addDropdown(h=>{p==null||p.forEach(C=>h.addOption(C.value,C.label)),h.setValue(o[i]).onChange(C=>this.updateProfileSetting(i,C,e))})};s("image","Image path","text",[{value:"/profile.jpg",label:"/profile.jpg"}]),s("alt","Alt text","text",[{value:"Profile picture",label:"Profile picture"}]),s("size","Size","dropdown",[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]),s("url","URL (optional)","text",[{value:"https://example.com",label:"https://example.com"}]),s("placement","Placement","dropdown",[{value:"footer",label:"Footer"},{value:"header",label:"Header"}]),s("style","Style","dropdown",[{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"none",label:"None"}])}updateProfileSetting(t,e,a){var n;let o=this.getState();this.updateState({selectedOptionalFeatures:{...o.selectedOptionalFeatures,profilePicture:{...(n=o.selectedOptionalFeatures)==null?void 0:n.profilePicture,[t]:e}}})}renderCommentsFeatureNative(t,e){var g,h,C;let a=((h=(g=e.selectedOptionalFeatures)==null?void 0:g.comments)==null?void 0:h.enabled)||!1,o=((C=e.selectedOptionalFeatures)==null?void 0:C.comments)||{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"},n;new be.Setting(t).setName("Comments").setDesc("Enable Giscus comment system for posts").addToggle(T=>{n=T,T.setValue(a).onChange(N=>{var _;let L=this.getState();this.updateState({selectedFeatures:{...L.selectedFeatures,comments:N},selectedOptionalFeatures:{...L.selectedOptionalFeatures,comments:{...(_=L.selectedOptionalFeatures)==null?void 0:_.comments,enabled:N}}});let v=t.querySelector(".comments-options");v&&(v.style.display=N?"block":"none")})});let s=t.createDiv("comments-options");s.style.display=a?"block":"none",s.className="comments-options";let r=s.createDiv("comments-instructions");r.style.marginBottom="15px",r.style.padding="10px",r.style.background="var(--background-modifier-border)",r.style.borderRadius="4px",r.style.borderLeft="3px solid var(--interactive-accent)";let c=r.createEl("p");c.style.margin="0",c.style.fontSize="13px",c.style.color="var(--text-muted)",c.style.whiteSpace="pre-line",c.innerHTML=`1. Go to <a href="https://giscus.app/" target="_blank" rel="noopener noreferrer" style="color: var(--interactive-accent); text-decoration: none;">giscus.app</a> and configure your comments
2. Copy the generated script
3. Paste it below`;let l=c.querySelector("a");l&&(l.addEventListener("mouseenter",()=>{l.style.textDecoration="underline"}),l.addEventListener("mouseleave",()=>{l.style.textDecoration="none"}));let u=new be.Setting(s).setName("Giscus Script").setDesc("Paste your Giscus script here (the plugin will automatically parse all settings)").controlEl.createEl("textarea",{attr:{placeholder:`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`,rows:"8"}});u.style.width="100%",u.style.fontFamily="var(--font-monospace)",u.style.fontSize="12px",u.style.padding="8px",u.style.border="1px solid var(--background-modifier-border)",u.style.borderRadius="4px",u.style.background="var(--background-primary)",u.style.color="var(--text-normal)",u.style.resize="none",u.value=o.rawScript||"";let d=s.createDiv("script-validation");d.style.marginTop="8px",d.style.fontSize="12px";let p=async()=>{var v;let T=u.value.trim();if(!T){d.innerHTML="",this.updateCommentSetting("rawScript","",e);return}let{GiscusScriptParser:N}=await Promise.resolve().then(()=>(ut(),dt)),L=N.validateScript(T);if(L.valid){d.innerHTML='<span style="color: var(--text-success)">\u2713 Valid Giscus script detected</span>';let _=N.parseScript(T);_&&this.updateState({selectedOptionalFeatures:{...e.selectedOptionalFeatures,comments:{...(v=e.selectedOptionalFeatures)==null?void 0:v.comments,rawScript:T,repo:_.repo,repoId:_.repoId,category:_.category,categoryId:_.categoryId,mapping:_.mapping,strict:_.strict,reactions:_.reactions,metadata:_.metadata,inputPosition:_.inputPosition,theme:_.theme,lang:_.lang,loading:_.loading}}})}else d.innerHTML=`<span style="color: var(--text-error)">\u2717 ${L.error}</span>`};u.addEventListener("input",p),p()}updateCommentSetting(t,e,a){var n;let o=this.getState();this.updateState({selectedOptionalFeatures:{...o.selectedOptionalFeatures,comments:{...(n=o.selectedOptionalFeatures)==null?void 0:n.comments,[t]:e}}})}};var Ge=class extends q{render(t){let e=this.getState();t.innerHTML=`
			<div class="deployment-selection">
				<h2>Deployment platform</h2>
				<p>Choose your preferred deployment platform.</p>
				<div class="deployment-options">
					<div class="deployment-option ${e.selectedDeployment==="netlify"?"selected":""}" 
						 data-deployment="netlify">
						<div class="deployment-header">
							<h3>Netlify</h3>
						</div>
						<p>Automatic deployments from Git with built-in form handling and serverless functions.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="vercel"?"selected":""}" 
						 data-deployment="vercel">
						<div class="deployment-header">
							<h3>Vercel</h3>
						</div>
						<p>Excellent performance with edge functions and automatic HTTPS.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="github-pages"?"selected":""}" 
						 data-deployment="github-pages">
						<div class="deployment-header">
							<h3>GitHub Pages</h3>
						</div>
						<p>Free hosting directly from your GitHub repository.</p>
					</div>
				</div>
			</div>
		`,t.querySelectorAll(".deployment-option").forEach(a=>{a.addEventListener("click",()=>{let o=a.getAttribute("data-deployment");o&&(this.updateState({selectedDeployment:o}),this.render(t))})})}};var _e=require("obsidian"),Re=class extends q{async render(t){let e=this.getState(),a=await this.plugin.pluginManager.getPluginStatus();t.innerHTML=`
			<div class="plugin-config">
				<h2>Plugin configuration</h2>
				<p>Configure your Obsidian plugins for optimal integration.</p>
				
				<div class="plugin-status">
      ${a.map(o=>`
						<div class="plugin-item ${o.installed?"installed":"missing"}">
							<div class="plugin-icon">
								${o.installed?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>'}
							</div>
							<div class="plugin-info">
								<h3>${o.name}</h3>
								<p>${o.installed?o.enabled?"Enabled":"Disabled":"Not installed"}</p>
							</div>
						</div>
					`).join("")}
				</div>
				
				<div class="config-options">
					<button class="mod-button mod-cta" id="configure-plugins">Configure Automatically</button>
					<button class="mod-button" id="show-instructions">Show Manual Instructions</button>
				</div>
			</div>
		`,this.setupEventHandlers(t)}setupEventHandlers(t){var a,o;let e=this.getState();(a=t.querySelector("#configure-plugins"))==null||a.addEventListener("click",async()=>{try{let n=e.selectedContentOrg,s={obsidianSettings:{attachmentLocation:n==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:n==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(s)){let c=e.selectedContentOrg,l=c==="file-based"?"subfolder (attachments/)":"same folder",i=c==="file-based"?"file":"folder";new _e.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${l}
\u2022 Astro Composer: Creation mode \u2192 ${i}
\u2022 Image Inserter: Format updated for ${c}`,8e3)}else new _e.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)}catch(n){new _e.Notice(`Error configuring plugins: ${n instanceof Error?n.message:String(n)}`)}}),(o=t.querySelector("#show-instructions"))==null||o.addEventListener("click",async()=>{try{let n=e.selectedContentOrg,s={obsidianSettings:{attachmentLocation:n==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:n==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},r=await this.plugin.pluginManager.getManualConfigurationInstructions(s),{Modal:c}=require("obsidian"),l=new c(this.app);l.titleEl.setText("Manual Configuration Instructions");let i=l.contentEl.createDiv();i.style.padding="20px",i.style.lineHeight="1.6";let u=r.split(`
`),d=null;u.forEach(p=>{let g=p.trim();if(g==="")i.createEl("br");else if(g.startsWith("## ")){d&&(d=null);let h=i.createEl("h2");h.setText(g.substring(3)),h.style.marginTop="20px",h.style.marginBottom="10px",h.style.fontSize="1.2em",h.style.fontWeight="bold"}else if(g.match(/^\d+\.\s/)){if(d||(d=i.createEl("ol"),d&&(d.style.marginLeft="20px",d.style.marginBottom="15px")),d){let h=d.createEl("li");h.style.marginBottom="5px",this.parseBoldText(h,g.replace(/^\d+\.\s/,""))}}else if(g.startsWith("- ")||g.startsWith("* ")){if(d||(d=i.createEl("ul"),d&&(d.style.marginLeft="20px",d.style.marginBottom="15px")),d){let h=d.createEl("li");h.style.marginBottom="5px",this.parseBoldText(h,g.substring(2))}}else{d&&(d=null);let h=i.createEl("p");h.style.marginBottom="10px",this.parseBoldText(h,g)}}),l.open()}catch(n){new _e.Notice(`Error getting instructions: ${n instanceof Error?n.message:String(n)}`)}})}parseBoldText(t,e){e.split(/(\*\*.*?\*\*)/g).forEach(o=>{o.startsWith("**")&&o.endsWith("**")?t.createEl("strong").setText(o.substring(2,o.length-2)):o.trim()!==""&&t.appendText(o)})}};var He=require("obsidian");var $e=class extends q{render(t){let e=this.getState(),a=this.formatTemplateName(e.selectedTemplate),o=this.formatThemeName(e.selectedTheme),n=this.formatContentOrganization(e.selectedContentOrg),s=this.formatDeploymentName(e.selectedDeployment);t.innerHTML=`
			<div class="finalize-step">
				<h2>Finalize your configuration</h2>
				<p>Review your settings and complete the setup.</p>
				
				<div class="config-summary">
					<h3>Configuration Summary</h3>
					<div class="config-item">
						<strong>Template:</strong> ${a}
					</div>
					<div class="config-item">
						<strong>Theme:</strong> ${o}
					</div>
					<div class="config-item">
						<strong>Content Organization:</strong> ${n}
					</div>
					<div class="config-item">
						<strong>Deployment:</strong> ${s}
					</div>
					<div class="config-item">
						<strong>Site Title:</strong> ${e.selectedSiteInfo.title}
					</div>
					<div class="config-item">
						<strong>Site URL:</strong> ${e.selectedSiteInfo.site}
					</div>
				</div>
				
			</div>
		`,this.setupEventHandlers(t)}setupEventHandlers(t){}async completeWizard(){let t=this.getState();try{this.stateManager.buildFinalSettings(),await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings();let e=this.plugin.settings;await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?new He.Notice("Configuration applied successfully!"):new He.Notice("Failed to apply configuration. Check the console for errors."),this.stateManager.updateState({currentStep:this.stateManager.getState().totalSteps})}catch(e){new He.Notice(`Error completing wizard: ${e instanceof Error?e.message:String(e)}`)}}formatTemplateName(t){let e=ue.find(a=>a.id===t);return e?e.name:t}formatThemeName(t){let e=pe.find(a=>a.id===t);return e?e.name:t}formatContentOrganization(t){return t==="file-based"?"File-based":"Folder-based"}formatDeploymentName(t){switch(t){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";default:return t}}};var ge=class extends Ot.Modal{constructor(e,a){super(e);this.plugin=a,this.stateManager=new we(a),this.steps=[new Fe(e,this,this.stateManager,this.plugin),new Ae(e,this,this.stateManager,this.plugin),new Me(e,this,this.stateManager,this.plugin),new De(e,this,this.stateManager,this.plugin),new xe(e,this,this.stateManager,this.plugin),new ke(e,this,this.stateManager,this.plugin),new Le(e,this,this.stateManager,this.plugin),new Ge(e,this,this.stateManager,this.plugin),new Re(e,this,this.stateManager,this.plugin),new $e(e,this,this.stateManager,this.plugin)]}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("astro-modular-wizard"),this.stateManager.refreshState(),this.renderCurrentStep()}onClose(){let{contentEl:e}=this;e.empty(),this.saveWizardStateToDataJson()}renderCurrentStep(){let{contentEl:e}=this,a=this.stateManager.getState();e.empty(),e.addClass("astro-modular-wizard"),this.renderHeader(e),this.renderProgress(e);let o=e.createDiv("wizard-content");this.renderStepContent(o),this.renderFooter(e),e.scrollTop=0}renderHeader(e){let a=e.createDiv("wizard-header");a.innerHTML=`
			<h1>Astro Modular Setup</h1>
		`}renderProgress(e){let a=this.stateManager.getState(),o=e.createDiv("wizard-progress");o.innerHTML=`
			<div class="progress-bar">
				<div class="progress-fill" style="width: ${this.stateManager.getProgress()}%"></div>
			</div>
			<div class="progress-text">Step ${a.currentStep} of ${a.totalSteps}</div>
		`}async renderStepContent(e){let o=this.stateManager.getState().currentStep-1;o>=0&&o<this.steps.length&&await this.steps[o].render(e)}renderFooter(e){let a=this.stateManager.getState(),n=e.createDiv("wizard-footer").createDiv("wizard-buttons");if(this.stateManager.canGoPrevious()&&n.createEl("button",{text:"Previous",cls:"mod-button"}).addEventListener("click",()=>{this.discardCurrentStepChanges(),this.stateManager.previousStep(),this.renderCurrentStep()}),this.stateManager.canGoNext()?n.createEl("button",{text:"Next",cls:"mod-button mod-cta"}).addEventListener("click",()=>{this.saveCurrentStepToWizardState(),this.stateManager.nextStep(),this.renderCurrentStep()}):n.createEl("button",{text:"Complete Setup",cls:"mod-button mod-cta"}).addEventListener("click",async()=>{await this.steps[this.steps.length-1].completeWizard(),await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings(),await this.plugin.triggerSettingsRefresh(),this.close()}),this.stateManager.canGoNext()){let s=n.createEl("button",{text:"Skip",cls:"mod-button"});s.style.opacity="0.6",s.addEventListener("click",()=>{this.stateManager.nextStep(),this.renderCurrentStep()})}}saveCurrentStepToWizardState(){}discardCurrentStepChanges(){this.stateManager.refreshState()}async saveWizardStateToDataJson(){try{this.stateManager.buildFinalSettings(),await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings()}catch(e){console.error("Error saving wizard state to data.json:",e)}}applyDefaultValuesForCurrentStep(){}};function Ct(w){w.addCommand({id:"open-settings",name:"Open Astro Modular Settings",callback:()=>{w.app.setting.open(),w.app.setting.openTabById(w.manifest.id)}}),w.addCommand({id:"run-setup-wizard",name:"Run Setup Wizard",callback:async()=>{await w.loadData().then(e=>{Object.assign(w.settings,e)}),new ge(w.app,w).open()}}),w.addCommand({id:"open-config",name:"Open config.ts",callback:async()=>{w.app.vault.getAbstractFileByPath("astro.config.ts")?await w.app.workspace.openLinkText("","astro.config.ts"):new Ve.Notice("Config file not found. Make sure you have an Astro project in this vault.")}}),w.addCommand({id:"apply-configuration",name:"Apply Current Configuration",callback:async()=>{new Ve.Notice("Configuration applied successfully!")}}),w.addCommand({id:"toggle-wizard-startup",name:"Toggle Wizard on Startup",callback:async()=>{let t=w.settings;t.runWizardOnStartup=!t.runWizardOnStartup,await w.saveData(t),new Ve.Notice(`Wizard on startup ${t.runWizardOnStartup?"enabled":"disabled"}`)}})}var yt=require("obsidian");var gt=require("obsidian");var he=require("obsidian"),j=class{constructor(t,e){this.app=t,this.plugin=e}getSettings(){return this.plugin.settings||this.plugin.data||{}}async applyCurrentConfiguration(t=!1){try{let e=this.getSettings();console.log("\u{1F527} applyCurrentConfiguration called with settings:",{currentTheme:e.currentTheme,optionalContentTypes:e.optionalContentTypes,features:e.features}),await this.plugin.configManager.updateIndividualFeatures(e)?(t&&new he.Notice("Configuration applied successfully!"),await this.plugin.configManager.triggerRebuild()):t&&new he.Notice("Failed to apply configuration. Check the console for errors.")}catch(e){t&&new he.Notice(`Error applying configuration: ${e instanceof Error?e.message:String(e)}`)}}createDropdownSetting(t,e,a,o,n,s){return new he.Setting(t).setName(e).setDesc(a).addDropdown(r=>(Object.entries(n).forEach(([c,l])=>{r.addOption(c,l)}),r.setValue(o),r.onChange(async c=>{s(c),await this.plugin.saveData(this.getSettings())}),r))}createTextSetting(t,e,a,o,n,s=1e3,r,c){return new he.Setting(t).setName(e).setDesc(a).addText(l=>{l.setValue(o),c&&l.setPlaceholder(c);let i=null;return l.onChange(async u=>{i&&clearTimeout(i),n(u),await this.plugin.saveData(this.getSettings()),i=window.setTimeout(async()=>{r&&await r()},s)}),l.inputEl.addEventListener("blur",async()=>{i&&(clearTimeout(i),r&&await r())}),l})}createToggleSetting(t,e,a,o,n){return new he.Setting(t).setName(e).setDesc(a).addToggle(s=>(s.setValue(o),s.onChange(async r=>{n(r),await this.plugin.saveData(this.getSettings())}),s))}};var Be=class extends j{render(t){var p,g;t.empty();let e=this.getSettings(),a=t.createDiv("settings-section"),n=t.createDiv("config-display").createDiv("config-info"),s=n.createEl("h3",{text:"Current Configuration"}),r=n.createDiv("config-item");r.createEl("strong",{text:"Template: "}),r.createSpan({text:((p=ue.find(h=>h.id===e.currentTemplate))==null?void 0:p.name)||"Unknown"});let c=n.createDiv("config-item");c.createEl("strong",{text:"Theme: "}),c.createSpan({text:((g=pe.find(h=>h.id===e.currentTheme))==null?void 0:g.name)||"Unknown"});let l=n.createDiv("config-item");l.createEl("strong",{text:"Organization: "}),l.createSpan({text:e.contentOrganization==="file-based"?"File-based":"Folder-based"});let i=n.createDiv("config-item");i.createEl("strong",{text:"Deployment: "}),i.createSpan({text:this.formatDeploymentName(e.deployment.platform)});let u=n.createDiv("config-item");u.createEl("strong",{text:"Site Title: "}),u.createSpan({text:e.siteInfo.title});let d=n.createDiv("config-item");d.createEl("strong",{text:"Site URL: "}),d.createSpan({text:e.siteInfo.site}),new gt.Setting(t).setName("Setup wizard").setDesc("Run the setup wizard to reconfigure your theme").addButton(h=>h.setButtonText("Run Setup Wizard").setCta().onClick(async()=>{await this.plugin.loadData().then(T=>{Object.assign(this.plugin.settings,T)}),new ge(this.app,this.plugin).open()})),new gt.Setting(t).setName("Run wizard on startup").setDesc("Show the setup wizard when Obsidian starts (if not disabled)").addToggle(h=>h.setValue(e.runWizardOnStartup).onChange(async C=>{e.runWizardOnStartup=C,await this.plugin.saveData(e)}))}formatDeploymentName(t){switch(t){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";default:return t}}};var ee=require("obsidian");var Ue=class extends j{render(t){var N,L;t.empty();let e=this.getSettings(),a=t.createDiv("settings-section");this.createTextSetting(t,"Site URL","Your site's base URL (e.g., https://yoursite.com)",e.siteInfo.site,v=>{e.siteInfo.site=v}),this.createTextSetting(t,"Site Title","Your site's title",e.siteInfo.title,v=>{e.siteInfo.title=v}),this.createTextSetting(t,"Site Description","A brief description of your site",e.siteInfo.description,v=>{e.siteInfo.description=v}),this.createTextSetting(t,"Author Name","Your name or the site author's name",e.siteInfo.author,v=>{e.siteInfo.author=v}),this.createTextSetting(t,"Language","Your site's primary language (ISO 639-1 code)",e.siteInfo.language,v=>{e.siteInfo.language=v});let o=t.createDiv("settings-section");o.style.marginTop="30px",o.style.paddingTop="20px",o.style.borderTop="2px solid var(--background-modifier-border)",o.createEl("h3",{text:"Assets & Metadata"});let s=new ee.Setting(o).setName("Open Graph image").setDesc("Path to your Open Graph image (placed in public/ folder)").controlEl.createDiv();s.style.display="flex",s.style.gap="6px",s.style.alignItems="center";let r=s.createEl("input",{type:"text",placeholder:"/open-graph.png",value:e.siteInfo.ogImage||"/open-graph.png",attr:{spellcheck:"false"}});r.style.flex="1",r.style.padding="6px 8px",r.style.border="1px solid var(--background-modifier-border)",r.style.borderRadius="4px",r.style.backgroundColor="var(--background-primary)",r.style.color="var(--text-normal)",r.style.fontSize="12px";let c=s.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open public folder"}});c.style.padding="4px",c.style.border="none",c.style.backgroundColor="transparent",c.style.color="var(--text-normal)",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.marginTop="2px";let l=c.createDiv();l.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',c.addEventListener("click",async()=>{try{let v="../../public";await this.app.openWithDefaultApp(v)}catch(v){new ee.Notice(`Failed to open public folder: ${v instanceof Error?v.message:String(v)}`)}});let i=null;r.addEventListener("input",async()=>{i&&clearTimeout(i),e.siteInfo.ogImage=r.value.trim()||"/open-graph.png",await this.plugin.saveData(e),i=window.setTimeout(async()=>{await this.applyCurrentConfiguration()},1e3)}),r.addEventListener("blur",async()=>{i&&(clearTimeout(i),await this.applyCurrentConfiguration())}),this.createTextSetting(o,"Open Graph image alt text","Alternative text for the Open Graph image",e.siteInfo.defaultOgImageAlt||((N=e.seo)==null?void 0:N.defaultOgImageAlt)||"Astro Modular logo.",v=>{e.siteInfo.defaultOgImageAlt=v,e.seo||(e.seo={defaultOgImageAlt:""}),e.seo.defaultOgImageAlt=v},1e3,async()=>await this.applyCurrentConfiguration());let d=new ee.Setting(o).setName("Favicon").setDesc("Path to your favicon (placed in public/ folder). Only used when theme-adaptive favicon is disabled.").controlEl.createDiv();d.style.display="flex",d.style.gap="6px",d.style.alignItems="center";let p=d.createEl("input",{type:"text",placeholder:"/favicon.png",value:e.siteInfo.favicon||"/favicon.png",attr:{spellcheck:"false"}});p.style.flex="1",p.style.padding="6px 8px",p.style.border="1px solid var(--background-modifier-border)",p.style.borderRadius="4px",p.style.backgroundColor="var(--background-primary)",p.style.color="var(--text-normal)",p.style.fontSize="12px";let g=d.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open public folder"}});g.style.padding="4px",g.style.border="none",g.style.backgroundColor="transparent",g.style.color="var(--text-normal)",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",g.style.marginTop="2px";let h=g.createDiv();h.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',g.addEventListener("click",async()=>{try{let v="../../public";await this.app.openWithDefaultApp(v)}catch(v){new ee.Notice(`Failed to open public folder: ${v instanceof Error?v.message:String(v)}`)}});let C=null;p.addEventListener("input",async()=>{C&&clearTimeout(C),e.siteInfo.favicon=p.value.trim()||"/favicon.png",await this.plugin.saveData(e),C=window.setTimeout(async()=>{await this.applyCurrentConfiguration()},1e3)}),p.addEventListener("blur",async()=>{C&&(clearTimeout(C),await this.applyCurrentConfiguration())});let T=new ee.Setting(o).setName("Theme-adaptive favicon").setDesc("If enabled, favicon switches between light and dark variants based on browser theme preference").addToggle(v=>{var _;return v.setValue((_=e.siteInfo.faviconThemeAdaptive)!=null?_:!0).onChange(async x=>{e.siteInfo.faviconThemeAdaptive=x,await this.plugin.saveData(e),await this.applyCurrentConfiguration(),this.render(t),new ee.Notice(`Theme-adaptive favicon ${x?"enabled":"disabled"} and applied to config.ts`)})});if((L=e.siteInfo.faviconThemeAdaptive)==null||L){let _=new ee.Setting(o).setName("Light theme favicon").setDesc("Path to your light theme favicon (placed in public/ folder)").controlEl.createDiv();_.style.display="flex",_.style.gap="6px",_.style.alignItems="center";let x=_.createEl("input",{type:"text",placeholder:"/favicon-light.png",value:e.siteInfo.faviconLight||"/favicon-light.png",attr:{spellcheck:"false"}});x.style.flex="1",x.style.padding="6px 8px",x.style.border="1px solid var(--background-modifier-border)",x.style.borderRadius="4px",x.style.backgroundColor="var(--background-primary)",x.style.color="var(--text-normal)",x.style.fontSize="12px";let A=_.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open public folder"}});A.style.padding="4px",A.style.border="none",A.style.backgroundColor="transparent",A.style.color="var(--text-normal)",A.style.display="flex",A.style.alignItems="center",A.style.justifyContent="center",A.style.marginTop="2px";let F=A.createDiv();F.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',A.addEventListener("click",async()=>{try{let B="../../public";await this.app.openWithDefaultApp(B)}catch(B){new ee.Notice(`Failed to open public folder: ${B instanceof Error?B.message:String(B)}`)}});let H=null;x.addEventListener("input",async()=>{H&&clearTimeout(H),e.siteInfo.faviconLight=x.value.trim()||"/favicon-light.png",await this.plugin.saveData(e),H=window.setTimeout(async()=>{await this.applyCurrentConfiguration()},1e3)}),x.addEventListener("blur",async()=>{H&&(clearTimeout(H),await this.applyCurrentConfiguration())});let $=new ee.Setting(o).setName("Dark theme favicon").setDesc("Path to your dark theme favicon (placed in public/ folder)").controlEl.createDiv();$.style.display="flex",$.style.gap="6px",$.style.alignItems="center";let k=$.createEl("input",{type:"text",placeholder:"/favicon-dark.png",value:e.siteInfo.faviconDark||"/favicon-dark.png",attr:{spellcheck:"false"}});k.style.flex="1",k.style.padding="6px 8px",k.style.border="1px solid var(--background-modifier-border)",k.style.borderRadius="4px",k.style.backgroundColor="var(--background-primary)",k.style.color="var(--text-normal)",k.style.fontSize="12px";let M=$.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open public folder"}});M.style.padding="4px",M.style.border="none",M.style.backgroundColor="transparent",M.style.color="var(--text-normal)",M.style.display="flex",M.style.alignItems="center",M.style.justifyContent="center",M.style.marginTop="2px";let V=M.createDiv();V.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',M.addEventListener("click",async()=>{try{let B="../../public";await this.app.openWithDefaultApp(B)}catch(B){new ee.Notice(`Failed to open public folder: ${B instanceof Error?B.message:String(B)}`)}});let G=null;k.addEventListener("input",async()=>{G&&clearTimeout(G),e.siteInfo.faviconDark=k.value.trim()||"/favicon-dark.png",await this.plugin.saveData(e),G=window.setTimeout(async()=>{await this.applyCurrentConfiguration()},1e3)}),k.addEventListener("blur",async()=>{G&&(clearTimeout(G),await this.applyCurrentConfiguration())})}}};var de=require("obsidian");var qe=class extends j{constructor(){super(...arguments);this.saveTimeoutId=null;this.listenersAttached=!1}render(e){e.empty(),this.listenersAttached=!1;let a=this.getSettings(),o=e.createDiv("settings-section"),n=e.createDiv("settings-section");n.createEl("h3",{text:"Navigation Pages"}),n.createEl("p",{text:"Add or remove pages from your main navigation menu."});let s=n.createDiv("nav-items");s.id="pages-list",s.innerHTML=`
			${a.navigation.pages.map((i,u)=>`
				<div class="nav-item" data-index="${u}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Page Title" value="${i.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="/page-url" value="${i.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${u}">Remove</button>
					</div>
				</div>
			`).join("")}
		`,new de.Setting(n).setName("Add Page").setDesc("Add a new page to your navigation").addButton(i=>i.setButtonText("+ Add Page").setCta().onClick(async()=>{a.navigation.pages.push({title:"New Page",url:"/new-page"}),await this.plugin.saveData(a),await this.applyCurrentConfiguration(),this.render(e)}));let r=e.createDiv("settings-section");r.createEl("h3",{text:"Social Links"}),r.createEl("p",{text:"Add or remove social media links."});let c=r.createDiv("nav-items");c.id="social-list",c.innerHTML=`
			${a.navigation.social.map((i,u)=>`
				<div class="nav-item" data-index="${u}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Social Title" value="${i.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="https://example.com" value="${i.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${u}">Remove</button>
					</div>
					<div class="nav-icon-row">
						<input type="text" class="nav-icon" placeholder="icon-name" value="${i.icon||""}" draggable="false">
						<div class="nav-icon-help">
							<small>Icon names from FontAwesome Brands</small>
						</div>
					</div>
				</div>
			`).join("")}
		`,new de.Setting(r).setName("Add Social Link").setDesc("Add a new social media link").addButton(i=>i.setButtonText("+ Add Social Link").setCta().onClick(async()=>{a.navigation.social.push({title:"New Social",url:"https://example.com",icon:""}),await this.plugin.saveData(a),await this.applyCurrentConfiguration(),this.render(e)}));let l=e.createDiv("settings-section");l.style.marginTop="30px",l.style.paddingTop="20px",l.style.borderTop="2px solid var(--background-modifier-border)",l.createEl("h3",{text:"Navigation Options"}),new de.Setting(l).setName("Show navigation").setDesc("Display navigation menu on your site").addToggle(i=>{var u;return i.setValue((u=a.navigation.showNavigation)!=null?u:!0).onChange(async d=>{a.navigation.showNavigation=d,await this.plugin.saveData(a),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new de.Notice(`Navigation ${d?"enabled":"disabled"} and applied to config.ts`)})}),new de.Setting(l).setName("Navigation style").setDesc("Choose between minimal or traditional navigation style").addDropdown(i=>i.addOption("traditional","Traditional").addOption("minimal","Minimal").setValue(a.navigation.style||"traditional").onChange(async u=>{a.navigation.style=u,await this.plugin.saveData(a),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new de.Notice(`Navigation style changed to ${u} and applied to config.ts`)})),new de.Setting(l).setName("Show mobile menu").setDesc("Display mobile navigation menu on smaller screens").addToggle(i=>{var u;return i.setValue((u=a.navigation.showMobileMenu)!=null?u:!0).onChange(async d=>{a.navigation.showMobileMenu=d,await this.plugin.saveData(a),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new de.Notice(`Mobile menu ${d?"enabled":"disabled"} and applied to config.ts`)})}),this.setupEventDelegation(e),this.setupDragAndDrop(e)}setupDragAndDrop(e){let a=null,o=l=>{let i=l.target;i.classList.contains("nav-item")&&(a=i,i.style.opacity="0.5")},n=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.opacity="1",a=null)},s=l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&a&&i!==a){let u=i.getBoundingClientRect(),d=u.top+u.height/2;l.clientY<d?(i.style.borderTop="2px solid var(--interactive-accent)",i.style.borderBottom="none"):(i.style.borderBottom="2px solid var(--interactive-accent)",i.style.borderTop="none")}},r=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.borderTop="none",i.style.borderBottom="none")},c=async l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&a){let u=parseInt(i.getAttribute("data-index")||"0"),d=parseInt(a.getAttribute("data-index")||"0"),p=i.closest("#pages-list"),g=i.closest("#social-list");if(i.style.borderTop="none",i.style.borderBottom="none",u!==d){let h=this.getSettings();if(p){let C=[...h.navigation.pages],T=C.splice(d,1)[0];C.splice(u,0,T),h.navigation.pages=C}else if(g){let C=[...h.navigation.social],T=C.splice(d,1)[0];C.splice(u,0,T),h.navigation.social=C}await this.plugin.saveData(h),await this.applyCurrentConfiguration(),this.render(e)}}};e._dragStartHandler&&(e.removeEventListener("dragstart",e._dragStartHandler),e.removeEventListener("dragend",e._dragEndHandler),e.removeEventListener("dragover",e._dragOverHandler),e.removeEventListener("dragleave",e._dragLeaveHandler),e.removeEventListener("drop",e._dropHandler)),e._dragStartHandler=o,e._dragEndHandler=n,e._dragOverHandler=s,e._dragLeaveHandler=r,e._dropHandler=c,e.addEventListener("dragstart",o),e.addEventListener("dragend",n),e.addEventListener("dragover",s),e.addEventListener("dragleave",r),e.addEventListener("drop",c)}setupEventDelegation(e){let a=this.getSettings(),o=e.querySelector("#pages-list"),n=e.querySelector("#social-list");console.log("Setting up event delegation:",{pagesList:o?"found":"NOT FOUND",socialList:n?"found":"NOT FOUND"}),o&&o.addEventListener("input",r=>{let c=r.target;if(c.classList.contains("nav-title")||c.classList.contains("nav-url")){let l=c.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),u=c.classList.contains("nav-title")?"title":"url";a.navigation.pages[i][u]=c.value,this.debouncedSave()}}),n&&n.addEventListener("input",r=>{let c=r.target;if(c.classList.contains("nav-title")||c.classList.contains("nav-url")||c.classList.contains("nav-icon")){let l=c.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),u=c.classList.contains("nav-title")?"title":c.classList.contains("nav-url")?"url":"icon";a.navigation.social[i][u]=c.value,this.debouncedSave()}});let s=async r=>{let c=r.target;if(c.classList.contains("nav-remove")){r.preventDefault(),r.stopPropagation();let l=c.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),u=l==null?void 0:l.closest("#pages-list"),d=this.getSettings();u?d.navigation.pages.splice(i,1):d.navigation.social.splice(i,1),await this.plugin.saveData(d),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),this.render(e)}};e.removeEventListener("click",e._removeHandler),e._removeHandler=s,e.addEventListener("click",s)}debouncedSave(){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=window.setTimeout(async()=>{await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!1)},1e3)}};var z=require("obsidian");var Tt=require("obsidian"),ze=class extends Tt.Modal{constructor(e,a,o,n){super(e);this.changes=a,this.onConfirm=o,this.onCancel=n}onOpen(){let{contentEl:e}=this;e.empty();let a=e.createEl("h2",{text:"Apply Template Preset"});a.style.marginTop="0";let o=e.createEl("p",{text:"Applying this template will change the following settings:"});o.style.marginBottom="16px";let n=e.createEl("ul");n.style.marginBottom="24px",n.style.paddingLeft="20px",this.changes.forEach(i=>{let u=n.createEl("li",{text:i});u.style.marginBottom="4px"});let s=e.createEl("p",{text:"Do you want to apply this template?"});s.style.fontWeight="bold",s.style.marginBottom="24px";let r=e.createDiv("modal-button-container");r.style.display="flex",r.style.gap="12px",r.style.justifyContent="flex-end";let c=r.createEl("button",{text:"Cancel"});c.className="mod-cta",c.addEventListener("click",()=>{this.onCancel(),this.close()});let l=r.createEl("button",{text:"Continue"});l.className="mod-warning",l.addEventListener("click",()=>{this.onConfirm(),this.close()}),l.focus()}onClose(){let{contentEl:e}=this;e.empty()}};var je=class extends j{render(t){var o;t.empty();let e=this.getSettings(),a=t.createDiv("settings-section");new z.Setting(t).setName("Template").setDesc("Choose your content template").addDropdown(n=>{ue.forEach(s=>{n.addOption(s.id,s.name)}),n.setValue(e.currentTemplate),n.onChange(async s=>{let r=this.getTemplateChanges(s);new ze(this.app,r,async()=>{try{await this.updatePluginSettingsWithTemplate(s),await this.plugin.loadSettings();let l=this.plugin.settings;await this.plugin.configManager.applyPreset({name:l.currentTemplate,description:"",features:l.features,theme:l.currentTheme,contentOrganization:l.contentOrganization,config:l})?new z.Notice(`Template changed to ${s} and applied to config.ts`):new z.Notice("Failed to apply template to config.ts")}catch(l){new z.Notice(`Failed to apply template change: ${l instanceof Error?l.message:String(l)}`),n.setValue(e.currentTemplate)}},()=>{n.setValue(e.currentTemplate)}).open()})}),new z.Setting(t).setName("Content organization").setDesc("Choose how to organize your content and assets").addDropdown(n=>{n.addOption("file-based","File-based"),n.addOption("folder-based","Folder-based"),n.setValue(e.contentOrganization),n.onChange(async s=>{e.contentOrganization=s,await this.plugin.saveData(e),await this.plugin.loadSettings();let r=s,c={obsidianSettings:{attachmentLocation:r==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:r==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:r==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:r==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};try{await this.plugin.pluginManager.configurePlugins(c);let l=r==="file-based"?"subfolder (attachments/)":"same folder",i=r==="file-based"?"file":"folder";new z.Notice(`Content organization changed to ${s}

\u2022 Obsidian: Attachments \u2192 ${l}
\u2022 Astro Composer: Creation mode \u2192 ${i}
\u2022 Image Inserter: Format updated`,8e3)}catch(l){new z.Notice(`Failed to configure plugins for content organization: ${l instanceof Error?l.message:String(l)}`)}})}),new z.Setting(t).setName("Deployment").setDesc("Choose your deployment platform").addDropdown(n=>{n.addOption("netlify","Netlify"),n.addOption("vercel","Vercel"),n.addOption("github-pages","GitHub Pages"),n.setValue(e.deployment.platform),n.onChange(async s=>{e.deployment.platform=s,await this.plugin.saveData(e),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new z.Notice(`Deployment platform changed to ${s} and applied to config.ts`)}catch(r){new z.Notice(`Failed to apply deployment platform change: ${r instanceof Error?r.message:String(r)}`)}})}),new z.Setting(t).setName("Reset to Template").setDesc(`Reset all settings to the current template (${(o=ue.find(n=>n.id===e.currentTemplate))==null?void 0:o.name})`).addButton(n=>n.setButtonText("Reset to Template").setWarning().onClick(async()=>{var s,r,c,l,i,u;try{let d=this.plugin.configManager.getTemplatePreset(e.currentTemplate);if(d&&d.config){let p=e.siteInfo,g=e.navigation,h=e.currentTheme,C=e.contentOrganization,T=e.typography,N=e.optionalFeatures,L=e.runWizardOnStartup;d.config.features&&(e.features={...e.features,...d.config.features},(s=e.postOptions)!=null&&s.graphView&&(e.postOptions.graphView.enabled=(r=d.config.features.graphView)!=null?r:!1,e.features.graphView=e.postOptions.graphView.enabled),(c=e.postOptions)!=null&&c.linkedMentions&&(e.postOptions.linkedMentions.enabled=(l=d.config.features.linkedMentions)!=null?l:!1,e.postOptions.linkedMentions.linkedMentionsCompact=(i=d.config.features.linkedMentionsCompact)!=null?i:!1),(u=e.commandPalette)!=null&&u.quickActions&&d.config.features.quickActions&&(e.commandPalette.quickActions={...e.commandPalette.quickActions,...d.config.features.quickActions})),d.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...d.config.tableOfContents}),e.currentTemplate=d.config.currentTemplate||e.currentTemplate,e.siteInfo=p,e.navigation=g,e.currentTheme=h,e.contentOrganization=C,e.typography=T,e.optionalFeatures=N,e.runWizardOnStartup=L,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(!0),new z.Notice(`Reset to ${e.currentTemplate} template and applied to config.ts`)}else new z.Notice("Template not found")}catch(d){new z.Notice(`Failed to reset to template: ${d instanceof Error?d.message:String(d)}`)}})),new z.Setting(t).setName("Edit config.ts directly").setDesc("Open your Astro configuration file in the editor").addButton(n=>n.setButtonText("Open config.ts").onClick(async()=>{await this.openConfigFile()}))}async openConfigFile(){try{let t=require("fs"),e=require("path"),{shell:a}=require("electron"),o=this.app.vault.adapter.basePath||this.app.vault.adapter.path,n=typeof o=="string"?o:o.toString(),s=e.join(n,"..","config.ts");t.existsSync(s)?a.openPath(s):new z.Notice(`Config file not found at: ${s}`)}catch(t){new z.Notice(`Error opening config file: ${t instanceof Error?t.message:String(t)}`)}}async updatePluginSettingsWithTemplate(t){var n,s,r,c,l,i,u,d,p,g,h,C,T,N,L,v,_,x,A,F,H,D,$,k,M,V,G,B,U,P,I;let e=this.plugin.settings,a=this.plugin.configManager.getTemplatePreset(t);if(!a||!a.config){new z.Notice("Template preset not found");return}let o=this.plugin.configManager.getTemplateConfig(t,e);if(e.currentTemplate=t,a.config.features){let Y=e.features.comments,J=e.features.profilePicture;e.features={...e.features,...a.config.features},e.features.comments=Y,e.features.profilePicture=J,(n=e.postOptions)!=null&&n.graphView&&(e.postOptions.graphView.enabled=(s=a.config.features.graphView)!=null?s:!1,e.features.graphView=e.postOptions.graphView.enabled),(r=e.postOptions)!=null&&r.linkedMentions&&(e.postOptions.linkedMentions.enabled=(c=a.config.features.linkedMentions)!=null?c:!1,e.postOptions.linkedMentions.linkedMentionsCompact=(l=a.config.features.linkedMentionsCompact)!=null?l:!1),(i=e.commandPalette)!=null&&i.quickActions&&a.config.features.quickActions&&(e.commandPalette.quickActions={...e.commandPalette.quickActions,...a.config.features.quickActions})}o.commandPalette&&(e.commandPalette={...e.commandPalette,enabled:(u=o.commandPalette.enabled)!=null?u:e.commandPalette.enabled,placeholder:(d=o.commandPalette.placeholder)!=null?d:e.commandPalette.placeholder,shortcut:(p=o.commandPalette.shortcut)!=null?p:e.commandPalette.shortcut,search:{...e.commandPalette.search,...o.commandPalette.search||{}},sections:{...e.commandPalette.sections,...o.commandPalette.sections||{}},quickActions:{...e.commandPalette.quickActions,...a.config.features.quickActions||{}}},a.config.features.quickActions&&(e.features.quickActions={...e.features.quickActions,...a.config.features.quickActions})),o.homeOptions&&(e.homeOptions={...e.homeOptions,featuredPost:{...e.homeOptions.featuredPost,...o.homeOptions.featuredPost||{}},recentPosts:{...e.homeOptions.recentPosts,...o.homeOptions.recentPosts||{}},projects:{...e.homeOptions.projects,...o.homeOptions.projects||{}},docs:{...e.homeOptions.docs,...o.homeOptions.docs||{}},blurb:{...e.homeOptions.blurb,...o.homeOptions.blurb||{}}}),o.postOptions&&(e.postOptions={...e.postOptions,postsPerPage:(g=o.postOptions.postsPerPage)!=null?g:e.postOptions.postsPerPage,readingTime:(h=o.postOptions.readingTime)!=null?h:e.postOptions.readingTime,wordCount:(C=o.postOptions.wordCount)!=null?C:e.postOptions.wordCount,tags:(T=o.postOptions.tags)!=null?T:e.postOptions.tags,postNavigation:(N=o.postOptions.postNavigation)!=null?N:e.postOptions.postNavigation,showPostCardCoverImages:(L=o.postOptions.showPostCardCoverImages)!=null?L:e.postOptions.showPostCardCoverImages,postCardAspectRatio:(v=o.postOptions.postCardAspectRatio)!=null?v:e.postOptions.postCardAspectRatio,linkedMentions:{...e.postOptions.linkedMentions,...o.postOptions.linkedMentions||{}},graphView:{...e.postOptions.graphView,enabled:(x=(_=o.postOptions.graphView)==null?void 0:_.enabled)!=null?x:e.postOptions.graphView.enabled,showInSidebar:(F=(A=o.postOptions.graphView)==null?void 0:A.showInSidebar)!=null?F:e.postOptions.graphView.showInSidebar,maxNodes:(D=(H=o.postOptions.graphView)==null?void 0:H.maxNodes)!=null?D:e.postOptions.graphView.maxNodes,showOrphanedPosts:(k=($=o.postOptions.graphView)==null?void 0:$.showOrphanedPosts)!=null?k:e.postOptions.graphView.showOrphanedPosts},comments:e.postOptions.comments}),o.navigation&&(e.navigation={...e.navigation,showNavigation:(M=o.navigation.showNavigation)!=null?M:e.navigation.showNavigation,showMobileMenu:(V=o.navigation.showMobileMenu)!=null?V:e.navigation.showMobileMenu,style:(G=o.navigation.style)!=null?G:e.navigation.style}),a.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...a.config.tableOfContents}),o.optionalContentTypes&&(e.optionalContentTypes={projects:(B=o.optionalContentTypes.projects)!=null?B:!1,docs:(U=o.optionalContentTypes.docs)!=null?U:!1}),o.footer&&(e.footer={...e.footer,showSocialIconsInFooter:(P=o.footer.showSocialIconsInFooter)!=null?P:e.footer.showSocialIconsInFooter},e.features.showSocialIconsInFooter=(I=o.footer.showSocialIconsInFooter)!=null?I:e.features.showSocialIconsInFooter),await this.plugin.saveData(e)}getTemplateChanges(t){var c,l,i,u;let e=[],a=this.getSettings(),o=this.plugin.configManager.getTemplatePreset(t);if(!o||!o.config)return e.push("This will apply the template settings to your configuration."),e;let n=o.config,s=[];n.features&&([{key:"graphView",label:"Graph view"},{key:"tableOfContents",label:"Table of contents"},{key:"readingTime",label:"Reading time"},{key:"linkedMentions",label:"Linked mentions"},{key:"linkedMentionsCompact",label:"Compact linked mentions"},{key:"postNavigation",label:"Post navigation"},{key:"showSocialIconsInFooter",label:"Social icons in footer"},{key:"featureButton",label:"Feature button"}].forEach(({key:p,label:g})=>{let h=a.features[p],C=n.features[p];if(C!==void 0&&h!==C){let T=typeof h=="boolean"?h?"ON":"OFF":h,N=typeof C=="boolean"?C?"ON":"OFF":C;s.push(`${g}: ${T} \u2192 ${N}`)}}),n.features.quickActions&&a.features.quickActions&&n.features.quickActions.enabled!==a.features.quickActions.enabled&&s.push(`Quick actions: ${a.features.quickActions.enabled?"ON":"OFF"} \u2192 ${n.features.quickActions.enabled?"ON":"OFF"}`));let r=t==="standard";return((c=a.optionalContentTypes)==null?void 0:c.projects)!==r&&s.push(`Projects content type: ${(l=a.optionalContentTypes)!=null&&l.projects?"enabled":"disabled"} \u2192 ${r?"enabled":"disabled"}`),((i=a.optionalContentTypes)==null?void 0:i.docs)!==r&&s.push(`Docs content type: ${(u=a.optionalContentTypes)!=null&&u.docs?"enabled":"disabled"} \u2192 ${r?"enabled":"disabled"}`),s.length>0?e.push(...s):e.push("No changes needed - your settings already match this template."),e}};var R=require("obsidian");var me=class{static async extractObsidianThemeColors(){let t=getComputedStyle(document.body),e=this.extractPrimaryColors(t),a=this.extractHighlightColors(t);return{primary:e,highlight:a}}static extractPrimaryColors(t){let e=this.getColorValue(t,"--background-primary"),a=this.getColorValue(t,"--background-secondary"),o=this.getColorValue(t,"--background-modifier-border"),n=this.hexToRgb(e),s=n?(.299*n.r+.587*n.g+.114*n.b)/255<.5:!0;return s?{50:this.lightenColor(a,95),100:this.lightenColor(a,90),200:this.lightenColor(a,80),300:this.lightenColor(a,70),400:this.lightenColor(a,55),500:this.lightenColor(a,40),600:this.lightenColor(a,25),700:a,800:this.darkenColor(e,20),900:this.darkenColor(e,35),950:this.darkenColor(e,50)}:this.createBetterColorScale(e,!0,s)}static extractHighlightColors(t){console.log("=== THEME COLOR DEBUG ==="),console.log("--text-accent:",t.getPropertyValue("--text-accent")),console.log("--interactive-accent:",t.getPropertyValue("--interactive-accent")),console.log("--text-accent-hover:",t.getPropertyValue("--text-accent-hover")),console.log("--text-a:",t.getPropertyValue("--text-a")),console.log("--text-link:",t.getPropertyValue("--text-link")),console.log("--ax1:",t.getPropertyValue("--ax1")),console.log("--ax2:",t.getPropertyValue("--ax2")),console.log("--ax3:",t.getPropertyValue("--ax3"));let e=this.getColorValue(t,"--text-accent")||this.getColorValue(t,"--interactive-accent")||this.getColorValue(t,"--text-a")||this.getColorValue(t,"--text-link"),a=this.getColorValue(t,"--text-accent-hover")||this.getColorValue(t,"--text-a-hover")||e;return console.log("Base color:",e),console.log("Hover color:",a),console.log("=== END DEBUG ==="),{50:a,100:a,200:a,300:e,400:e,500:e,600:e,700:e,800:e,900:e}}static getColorValue(t,e){let a=t.getPropertyValue(e).trim();if(!a)switch(e){case"--background-primary":return"#1e1e1e";case"--background-secondary":return"#2d2d2d";case"--background-modifier-border":return"#3a3a3a";case"--text-normal":return"#dcddde";case"--text-muted":return"#72767d";case"--text-faint":return"#484b51";case"--text-accent":return"#708794";case"--ax1":return"#708794";case"--ax2":return"#889eaa";case"--ax3":return"#5a6d77";case"--text-accent-hover":return"#889eaa";case"--text-a":return"#f8c537";case"--text-a-hover":return"#f8c537";case"--text-link":return"#83a598";case"--interactive-accent":return"#5865f2";default:return"#666666"}return this.convertToHex(a)}static convertToHex(t){if(t.startsWith("#"))return t;let e=document.createElement("div");e.style.color=t,document.body.appendChild(e);let a=getComputedStyle(e).color;document.body.removeChild(e);let o=a.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(o){let s=parseInt(o[1]),r=parseInt(o[2]),c=parseInt(o[3]);return this.rgbToHex(s,r,c)}let n=t.match(/hsl\(\s*(\d+),\s*(\d+)%,\s*(\d+)%\s*\)/);if(n){let s=parseInt(n[1]),r=parseInt(n[2]),c=parseInt(n[3]);return this.hslToHex(s,r,c)}return"#666666"}static hslToHex(t,e,a){let o=t/360,n=e/100,s=a/100,r=(u,d,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<1/6?u+(d-u)*6*p:p<1/2?d:p<2/3?u+(d-u)*(2/3-p)*6:u),c,l,i;if(n===0)c=l=i=s;else{let u=s<.5?s*(1+n):s+n-s*n,d=2*s-u;c=r(d,u,o+1/3),l=r(d,u,o),i=r(d,u,o-1/3)}return this.rgbToHex(Math.round(c*255),Math.round(l*255),Math.round(i*255))}static generateColorScaleFromSimple(t,e){return{primary:this.generatePrimaryScale(e),highlight:this.generateHighlightScale(t)}}static generatePrimaryScale(t){return{50:this.lightenColor(t,95),100:this.lightenColor(t,85),200:this.lightenColor(t,75),300:this.lightenColor(t,50),400:this.lightenColor(t,25),500:t,600:this.darkenColor(t,15),700:this.darkenColor(t,30),800:this.darkenColor(t,45),900:this.darkenColor(t,60),950:this.darkenColor(t,75)}}static generateHighlightScale(t){return{50:this.lightenColor(t,95),100:this.lightenColor(t,85),200:this.lightenColor(t,75),300:this.lightenColor(t,65),400:this.lightenColor(t,55),500:t,600:this.darkenColor(t,10),700:this.darkenColor(t,20),800:this.darkenColor(t,30),900:this.darkenColor(t,40)}}static lightenColor(t,e){let a=this.hexToRgb(t);if(!a)return t;let{r:o,g:n,b:s}=a,r=e/100;return this.rgbToHex(Math.round(o+(255-o)*r),Math.round(n+(255-n)*r),Math.round(s+(255-s)*r))}static darkenColor(t,e){let a=this.hexToRgb(t);if(!a)return t;let{r:o,g:n,b:s}=a,r=e/100;return this.rgbToHex(Math.round(o*(1-r)),Math.round(n*(1-r)),Math.round(s*(1-r)))}static aggressiveLighten(t,e){let a=this.hexToRgb(t);if(!a)return t;let{r:o,g:n,b:s}=a,r=e/100;return this.rgbToHex(Math.round(Math.min(255,o+(255-o)*r*1.2)),Math.round(Math.min(255,n+(255-n)*r*1.2)),Math.round(Math.min(255,s+(255-s)*r*1.2)))}static aggressiveDarken(t,e){let a=this.hexToRgb(t);if(!a)return t;let{r:o,g:n,b:s}=a,r=e/100;return this.rgbToHex(Math.round(Math.max(0,o*(1-r*1.2))),Math.round(Math.max(0,n*(1-r*1.2))),Math.round(Math.max(0,s*(1-r*1.2))))}static createBetterColorScale(t,e=!0,a=!0){let o=this.hexToRgb(t);if(!o)return this.generatePrimaryScale(t);let{r:n,g:s,b:r}=o,l=(.299*n+.587*s+.114*r)/255<.5;return e?{50:l?this.lightenColor(t,95):this.darkenColor(t,95),100:l?this.lightenColor(t,90):this.darkenColor(t,90),200:l?this.lightenColor(t,80):this.darkenColor(t,80),300:l?this.lightenColor(t,70):this.darkenColor(t,70),400:l?this.lightenColor(t,55):this.darkenColor(t,55),500:l?this.lightenColor(t,40):this.darkenColor(t,40),600:l?this.lightenColor(t,25):this.darkenColor(t,25),700:t,800:l?this.darkenColor(t,20):this.lightenColor(t,20),900:l?this.darkenColor(t,35):this.lightenColor(t,35),950:l?this.darkenColor(t,50):this.lightenColor(t,50)}:a?{50:this.lightenColor(t,95),100:this.lightenColor(t,85),200:this.lightenColor(t,75),300:this.lightenColor(t,65),400:this.lightenColor(t,25),500:t,600:this.darkenColor(t,15),700:this.darkenColor(t,30),800:this.darkenColor(t,45),900:this.darkenColor(t,60)}:{50:this.lightenColor(t,60),100:this.lightenColor(t,50),200:this.lightenColor(t,40),300:this.lightenColor(t,30),400:this.lightenColor(t,20),500:t,600:this.darkenColor(t,20),700:this.darkenColor(t,40),800:this.darkenColor(t,60),900:this.darkenColor(t,80)}}static hexToRgb(t){if(t=t.replace("#",""),t.length===3&&(t=t.split("").map(e=>e+e).join("")),t.length===6){let e=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16);return{r:e,g:a,b:o}}return null}static rgbToHex(t,e,a){let o=n=>{let s=Math.round(Math.max(0,Math.min(255,n))).toString(16);return s.length===1?"0"+s:s};return`#${o(t)}${o(e)}${o(a)}`}static isValidHexColor(t){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t)}static generateThemeFileContent(t,e="custom"){return`// Custom theme extracted from Obsidian
// Generated: ${new Date().toISOString()}

export const ${e}Theme = {
  primary: {
    50: "${t.primary[50]}",
    100: "${t.primary[100]}",
    200: "${t.primary[200]}",
    300: "${t.primary[300]}",
    400: "${t.primary[400]}",
    500: "${t.primary[500]}",
    600: "${t.primary[600]}",
    700: "${t.primary[700]}",
    800: "${t.primary[800]}",
    900: "${t.primary[900]}",
    950: "${t.primary[950]}"
  },
  highlight: {
    50: "${t.highlight[50]}",
    100: "${t.highlight[100]}",
    200: "${t.highlight[200]}",
    300: "${t.highlight[300]}",
    400: "${t.highlight[400]}",
    500: "${t.highlight[500]}",
    600: "${t.highlight[600]}",
    700: "${t.highlight[700]}",
    800: "${t.highlight[800]}",
    900: "${t.highlight[900]}"
  }
};
`}};var We=class extends j{constructor(){super(...arguments);this.mainContainer=null}render(e){var c,l,i,u,d;e.empty(),this.mainContainer=e;let a=this.getSettings(),n=e.createDiv("settings-section").createEl("h2",{text:"Colors"});if(new R.Setting(e).setName("Theme").setDesc("Choose your color theme").addDropdown(p=>{pe.forEach(g=>{p.addOption(g.id,g.name)}),p.setValue(a.currentTheme),p.onChange(async g=>{a.currentTheme=g,await this.plugin.saveData(a),await this.plugin.loadSettings(),this.render(e);try{await this.plugin.configManager.updateThemeOnly(g)?new R.Notice(`Theme changed to ${g} and applied to config.ts`):new R.Notice("Failed to apply theme change to config.ts")}catch(h){new R.Notice(`Failed to apply theme change: ${h instanceof Error?h.message:String(h)}`)}})}),new R.Setting(e).setName("Customize available themes").setDesc("Control which themes are shown to users in the theme selector").addToggle(p=>{let g=Array.isArray(a.availableThemes);p.setValue(g),p.onChange(async h=>{if(h){let C=pe.filter(T=>T.id!=="custom").map(T=>T.id);a.availableThemes=C}else a.availableThemes="default";await this.plugin.saveData(a),await this.plugin.loadSettings(),this.mainContainer&&this.render(this.mainContainer);try{await this.applyCurrentConfiguration(),new R.Notice(`Available themes ${h?"customized":"set to default"} and applied to config.ts`)}catch(C){new R.Notice(`Failed to apply available themes change: ${C instanceof Error?C.message:String(C)}`)}})}),Array.isArray(a.availableThemes)){let p=e.createDiv("theme-pills-container");p.style.marginTop="10px",p.style.marginBottom="20px";let g=p.createEl("p",{text:"Available themes (click to toggle selection):",cls:"theme-pills-header"});g.style.fontSize="14px",g.style.marginBottom="8px",g.style.color="var(--text-muted)";let h=p.createDiv("theme-pills-wrapper");h.style.display="flex",h.style.flexWrap="wrap",h.style.gap="8px",pe.filter(F=>F.id!=="custom").forEach(F=>{let H=a.availableThemes.includes(F.id),D=h.createDiv("theme-pill");D.style.display="inline-flex",D.style.alignItems="center",D.style.padding="4px 8px",D.style.borderRadius="12px",D.style.fontSize="12px",D.style.gap="6px",D.style.cursor="pointer",D.style.transition="all 0.2s ease",H?(D.style.backgroundColor="var(--interactive-accent)",D.style.color="var(--text-on-accent)",D.style.border="1px solid var(--interactive-accent)"):(D.style.backgroundColor="var(--background-secondary)",D.style.color="var(--text-muted)",D.style.border="1px solid var(--background-modifier-border)"),D.createSpan({text:F.name});let $=D.createSpan({text:H?"\u2713":"\u25CB"});$.style.fontSize="10px",$.style.opacity="0.8",D.addEventListener("click",async()=>{let k=a.availableThemes,M;H?M=k.filter(V=>V!==F.id):M=[...k,F.id],a.availableThemes=M,await this.plugin.saveData(a),await this.plugin.loadSettings(),this.mainContainer&&this.render(this.mainContainer);try{await this.applyCurrentConfiguration(),new R.Notice(`Theme "${F.name}" ${H?"removed from":"added to"} available themes`)}catch(V){new R.Notice(`Failed to apply theme change: ${V instanceof Error?V.message:String(V)}`)}})});let T=p.createDiv("custom-themes-section");T.style.marginTop="15px",T.style.padding="10px",T.style.backgroundColor="var(--background-secondary)",T.style.borderRadius="6px",T.style.border="1px solid var(--background-modifier-border)";let N=T.createEl("label",{text:"Custom themes (comma-separated):",cls:"custom-themes-label"});N.style.display="block",N.style.fontSize="12px",N.style.color="var(--text-muted)",N.style.marginBottom="6px";let L=T.createDiv("custom-themes-input-container");L.style.display="flex",L.style.gap="6px",L.style.alignItems="center";let v=L.createEl("input",{type:"text",placeholder:"custom,obsidinite",value:a.customThemes||"",attr:{spellcheck:"false"}});v.style.flex="1",v.style.padding="6px 8px",v.style.border="1px solid var(--background-modifier-border)",v.style.borderRadius="4px",v.style.backgroundColor="var(--background-primary)",v.style.color="var(--text-normal)",v.style.fontSize="12px";let _=L.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open themes folder"}});_.style.padding="4px",_.style.border="none",_.style.backgroundColor="transparent",_.style.color="var(--text-normal)",_.style.display="flex",_.style.alignItems="center",_.style.justifyContent="center",_.style.marginTop="2px";let x=_.createDiv();x.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',_.addEventListener("click",async()=>{try{let F="../../src/themes/custom";await this.app.openWithDefaultApp(F)}catch(F){new R.Notice(`Failed to open themes folder: ${F instanceof Error?F.message:String(F)}`)}});let A=null;v.addEventListener("input",async()=>{a.customThemes=v.value.trim(),await this.plugin.saveData(a),await this.plugin.loadSettings(),A&&clearTimeout(A),A=window.setTimeout(async()=>{try{await this.applyCurrentConfiguration(),new R.Notice("Custom themes updated and applied to config.ts")}catch(F){new R.Notice(`Failed to apply custom themes: ${F instanceof Error?F.message:String(F)}`)}},1e3)})}let s=e.createDiv("settings-section");if(new R.Setting(s).setName("Generate custom theme").setDesc("Enable to extract colors from your Obsidian theme and generate custom theme files").addToggle(p=>{p.setValue(a.customThemeGenerationEnabled||!1),p.onChange(async g=>{a.customThemeGenerationEnabled=g,g&&(a.themeColors||(a.themeColors={mode:"simple",extractedColors:void 0,simpleColors:{accent:"#5865f2",background:"#1e1e1e"},lastExtracted:void 0})),await this.plugin.saveData(a),await this.plugin.loadSettings(),this.render(e)})}),a.customThemeGenerationEnabled){if(this.createTextSetting(s,"Custom theme file name","Filename for the generated theme file (without .ts extension)",a.customThemeFile||"custom",p=>{a.customThemeFile=p}),new R.Setting(s).setName("Extract from Obsidian Theme").setDesc("Extract colors from your currently active Obsidian theme").addButton(p=>{p.setButtonText("Extract Colors"),p.setCta(),p.onClick(async()=>{try{let g=await me.extractObsidianThemeColors();a.themeColors.extractedColors=g,a.themeColors.lastExtracted=new Date().toISOString(),await this.plugin.saveData(a),await this.plugin.loadSettings(),this.render(e),new R.Notice("Colors extracted successfully from Obsidian theme!")}catch(g){new R.Notice(`Failed to extract colors: ${g instanceof Error?g.message:String(g)}`)}})}),a.themeColors.lastExtracted){let p=new Date(a.themeColors.lastExtracted).toLocaleString();s.createEl("p",{text:`Last extracted: ${p}`,cls:"theme-extraction-timestamp"}).style.color="var(--text-muted)"}new R.Setting(s).setName("Color editing mode").setDesc("Choose how to edit your theme colors").addDropdown(p=>{p.addOption("simple","Simple (accent + background)"),p.addOption("advanced","Advanced (individual shades)"),p.setValue(a.themeColors.mode),p.onChange(async g=>{a.themeColors.mode=g,await this.plugin.saveData(a),await this.plugin.loadSettings(),this.render(e)})}),a.themeColors.extractedColors&&this.renderColorPreview(s,a.themeColors.extractedColors),a.themeColors.extractedColors&&(a.themeColors.mode==="simple"?this.renderSimpleColorEditor(s,a):this.renderAdvancedColorEditor(s,a)),new R.Setting(s).setName("Save to Custom Theme File").setDesc("Generate a custom theme file from your extracted colors").addButton(p=>{p.setButtonText("Save Theme File"),p.setCta(),p.onClick(async()=>{try{if(!a.themeColors.extractedColors){new R.Notice("No colors available to save. Please extract colors first.");return}let g=a.customThemeFile||"custom",h=me.generateThemeFileContent(a.themeColors.extractedColors,g),C=`../../src/themes/custom/${g}.ts`;await this.app.vault.adapter.write(C,h),a.customThemeFile=g,await this.plugin.saveData(a);try{await this.plugin.configManager.updateIndividualFeatures(a)?new R.Notice(`${g}.ts saved successfully! Use the main theme dropdown to switch to "custom" if you want to use this theme.`):new R.Notice("Theme file saved but failed to apply to config.ts")}catch(T){new R.Notice(`Theme file saved but failed to apply: ${T instanceof Error?T.message:String(T)}`)}}catch(g){new R.Notice(`Failed to save theme file: ${g instanceof Error?g.message:String(g)}`)}})})}let r=e.createDiv("settings-section");r.createEl("h3",{text:"Typography"}),new R.Setting(r).setName("Heading Font").setDesc("Font for headings and titles").addDropdown(p=>{Ce.forEach(g=>{p.addOption(g,g)}),p.setValue(a.typography.headingFont),p.onChange(async g=>{a.typography.headingFont=g,await this.plugin.saveData(a),await this.plugin.loadSettings();try{await this.plugin.configManager.updateFontOnly("heading",g)?new R.Notice("Heading font updated and applied to config.ts"):new R.Notice("Failed to apply heading font change to config.ts")}catch(h){new R.Notice(`Failed to apply heading font change: ${h instanceof Error?h.message:String(h)}`)}})}),new R.Setting(r).setName("Prose Font").setDesc("Font for body text and content").addDropdown(p=>{Ce.forEach(g=>{p.addOption(g,g)}),p.setValue(a.typography.proseFont),p.onChange(async g=>{a.typography.proseFont=g,await this.plugin.saveData(a),await this.plugin.loadSettings();try{await this.plugin.configManager.updateFontOnly("prose",g)?new R.Notice("Prose font updated and applied to config.ts"):new R.Notice("Failed to apply prose font change to config.ts")}catch(h){new R.Notice(`Failed to apply prose font change: ${h instanceof Error?h.message:String(h)}`)}})}),new R.Setting(r).setName("Monospace Font").setDesc("Font for code blocks and technical content").addDropdown(p=>{Ce.forEach(g=>{p.addOption(g,g)}),p.setValue(a.typography.monoFont),p.onChange(async g=>{a.typography.monoFont=g,await this.plugin.saveData(a),await this.plugin.loadSettings();try{await this.plugin.configManager.updateFontOnly("mono",g)?new R.Notice("Monospace font updated and applied to config.ts"):new R.Notice("Failed to apply monospace font change to config.ts")}catch(h){new R.Notice(`Failed to apply monospace font change: ${h instanceof Error?h.message:String(h)}`)}})}),new R.Setting(r).setName("Font Source").setDesc("How fonts are loaded").addDropdown(p=>{p.addOption("local","Local (Google Fonts)"),p.addOption("cdn","CDN (Custom)"),p.setValue(a.typography.fontSource),p.onChange(async g=>{a.typography.fontSource=g,await this.plugin.saveData(a),await this.plugin.loadSettings(),this.render(e);try{await this.applyCurrentConfiguration(),new R.Notice(`Font source changed to ${g} and applied to config.ts`)}catch(h){new R.Notice(`Failed to apply font source change: ${h instanceof Error?h.message:String(h)}`)}})}),new R.Setting(r).setName("Font Display").setDesc("Font display strategy").addDropdown(p=>{p.addOption("swap","Swap (recommended)"),p.addOption("fallback","Fallback"),p.addOption("optional","Optional"),p.setValue(a.typography.fontDisplay||"swap"),p.onChange(async g=>{a.typography.fontDisplay=g,await this.plugin.saveData(a),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new R.Notice("Font display updated and applied to config.ts")}catch(h){new R.Notice(`Failed to apply font display change: ${h instanceof Error?h.message:String(h)}`)}})}),a.typography.fontSource==="cdn"&&(this.createTextSetting(r,"Custom Font URLs","Comma-separated URLs for custom fonts (e.g., Google Fonts URL)",((c=a.typography.customFonts)==null?void 0:c.urls)||"",p=>{a.typography.customFonts||(a.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),a.typography.customFonts.urls=p}),this.createTextSetting(r,"Custom Heading Font Name","Font family name for headings",((l=a.typography.customFonts)==null?void 0:l.heading)||"",p=>{a.typography.customFonts||(a.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),a.typography.customFonts.heading=p}),this.createTextSetting(r,"Custom Body Font Name","Font family name for body text",((i=a.typography.customFonts)==null?void 0:i.prose)||"",p=>{a.typography.customFonts||(a.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),a.typography.customFonts.prose=p}),this.createTextSetting(r,"Custom Monospace Font Name","Font family name for code",((u=a.typography.customFonts)==null?void 0:u.mono)||"",p=>{a.typography.customFonts||(a.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),a.typography.customFonts.mono=p})),this.createTextSetting(r,"Content width","Maximum width for content (e.g., 45rem)",((d=a.layout)==null?void 0:d.contentWidth)||"45rem",p=>{a.layout||(a.layout={contentWidth:"45rem"}),a.layout.contentWidth=p})}renderColorPreview(e,a){let o=e.createDiv("color-preview-section");o.createEl("h4",{text:"Color Preview"});let n=o.createDiv("color-preview-container");n.style.display="flex",n.style.gap="10px",n.style.marginTop="10px",[50,100,200,300,400,500,600,700,800,900,950].forEach(c=>{let l=a.primary[c];if(l){let i=n.createDiv("color-box");i.style.width="20px",i.style.height="20px",i.style.backgroundColor=l,i.style.border="1px solid var(--background-modifier-border)",i.style.borderRadius="3px",i.title=`Primary ${c}: ${l}`}}),[50,100,200,300,400,500,600,700,800,900].forEach(c=>{let l=a.highlight[c];if(l){let i=n.createDiv("color-box");i.style.width="20px",i.style.height="20px",i.style.backgroundColor=l,i.style.border="1px solid var(--background-modifier-border)",i.style.borderRadius="3px",i.title=`Highlight ${c}: ${l}`}})}renderSimpleColorEditor(e,a){var p,g,h,C;let o=e.createDiv("simple-color-inputs");o.style.marginBottom="20px",o.createEl("h4",{text:"Simple Color Editor"});let n=((g=(p=a.themeColors.extractedColors)==null?void 0:p.highlight)==null?void 0:g[500])||"#5865f2",s=((C=(h=a.themeColors.extractedColors)==null?void 0:h.primary)==null?void 0:C[800])||"#1e1e1e";console.log("Simple editor - accent color:",n),console.log("Simple editor - background color:",s),a.themeColors.simpleColors={accent:n,background:s};let r=o.createDiv("simple-color-input");r.createEl("label",{text:"Accent Color:"});let c=r.createEl("input",{type:"text",value:a.themeColors.simpleColors.accent});c.style.fontFamily="var(--font-monospace)";let l=r.createEl("input",{type:"color"});l.value=a.themeColors.simpleColors.accent,l.className="color-picker",c.oninput=async()=>{me.isValidHexColor(c.value)&&(a.themeColors.simpleColors.accent=c.value,l.value=c.value,await this.plugin.saveData(a))},l.onchange=async()=>{a.themeColors.simpleColors.accent=l.value,c.value=l.value,await this.plugin.saveData(a)};let i=o.createDiv("simple-color-input");i.createEl("label",{text:"Background Color:"});let u=i.createEl("input",{type:"text",value:a.themeColors.simpleColors.background});u.style.fontFamily="var(--font-monospace)";let d=i.createEl("input",{type:"color"});d.value=a.themeColors.simpleColors.background,d.className="color-picker",u.oninput=async()=>{me.isValidHexColor(u.value)&&(a.themeColors.simpleColors.background=u.value,d.value=u.value,await this.plugin.saveData(a))},d.onchange=async()=>{a.themeColors.simpleColors.background=d.value,u.value=d.value,await this.plugin.saveData(a)}}renderAdvancedColorEditor(e,a){let o=e.createDiv("advanced-mode-section");o.createEl("h4",{text:"Advanced Color Editor"});let n=o.createDiv("color-scale-editor");n.createEl("h5",{text:"Primary Colors"}),[50,100,200,300,400,500,600,700,800,900,950].forEach(l=>{var u,d;let i=(d=(u=a.themeColors.extractedColors)==null?void 0:u.primary)==null?void 0:d[l];if(i){let p=n.createDiv("setting-item");p.style.display="flex",p.style.alignItems="center",p.style.gap="10px",p.style.marginBottom="8px";let g=p.createDiv("setting-item-name");g.textContent=`${l}:`,g.style.minWidth="40px",g.style.fontSize="12px",g.style.color="var(--text-muted)";let h=p.createDiv("setting-item-control");h.style.display="flex",h.style.gap="8px",h.style.alignItems="center";let C=h.createEl("input",{type:"text",value:i});C.style.width="100px",C.style.fontFamily="var(--font-monospace)",C.style.fontSize="12px";let T=h.createEl("input",{type:"color",value:i});T.className="color-picker",C.oninput=async()=>{me.isValidHexColor(C.value)&&(a.themeColors.extractedColors.primary[l]=C.value,T.value=C.value,await this.plugin.saveData(a))},T.onchange=async()=>{a.themeColors.extractedColors.primary[l]=T.value,C.value=T.value,await this.plugin.saveData(a)}}});let r=o.createDiv("color-scale-editor");r.createEl("h5",{text:"Highlight Colors"}),[50,100,200,300,400,500,600,700,800,900].forEach(l=>{var u,d;let i=(d=(u=a.themeColors.extractedColors)==null?void 0:u.highlight)==null?void 0:d[l];if(i){let p=r.createDiv("setting-item");p.style.display="flex",p.style.alignItems="center",p.style.gap="10px",p.style.marginBottom="8px";let g=p.createDiv("setting-item-name");g.textContent=`${l}:`,g.style.minWidth="40px",g.style.fontSize="12px",g.style.color="var(--text-muted)";let h=p.createDiv("setting-item-control");h.style.display="flex",h.style.gap="8px",h.style.alignItems="center";let C=h.createEl("input",{type:"text",value:i});C.style.width="100px",C.style.fontFamily="var(--font-monospace)",C.style.fontSize="12px";let T=h.createEl("input",{type:"color",value:i});T.className="color-picker",C.oninput=async()=>{me.isValidHexColor(C.value)&&(a.themeColors.extractedColors.highlight[l]=C.value,T.value=C.value,await this.plugin.saveData(a))},T.onchange=async()=>{a.themeColors.extractedColors.highlight[l]=T.value,C.value=T.value,await this.plugin.saveData(a)}}})}};var b=require("obsidian");var Ke=class extends j{render(t){var A,F,H,D,$,k,M,V,G,B,U,P,I,Y,J,te,ae,oe,ne,se,ie,re,X,Z,le,ce,Te,ye,Se,Ie,Pe,Ne,Q;t.empty();let e=this.getSettings(),a=t.createDiv("settings-section"),o=t.createDiv("settings-section");o.style.marginTop="20px",o.createEl("h3",{text:"Global Options"}),new b.Setting(o).setName("Enable Projects").setDesc("Enable projects as a unique content type for showcasing work and portfolios").addToggle(S=>{var m,f;return S.setValue((f=(m=e.optionalContentTypes)==null?void 0:m.projects)!=null?f:!0).onChange(async O=>{console.log("\u{1F527} Projects toggle changed to:",O),e.optionalContentTypes||(e.optionalContentTypes={projects:!0,docs:!0}),e.optionalContentTypes.projects=O,console.log("\u{1F527} Settings after projects change:",e.optionalContentTypes),await this.plugin.saveData(e),await this.plugin.loadSettings(),console.log("\u{1F527} Settings saved and reloaded, calling applyCurrentConfiguration"),await this.applyCurrentConfiguration(),new b.Notice(`Projects ${O?"enabled":"disabled"} and applied to config.ts`)})}),new b.Setting(o).setName("Enable Docs").setDesc("Enable docs as a unique content type for documentation and knowledge base").addToggle(S=>{var m,f;return S.setValue((f=(m=e.optionalContentTypes)==null?void 0:m.docs)!=null?f:!0).onChange(async O=>{console.log("\u{1F527} Docs toggle changed to:",O),e.optionalContentTypes||(e.optionalContentTypes={projects:!0,docs:!0}),e.optionalContentTypes.docs=O,console.log("\u{1F527} Settings after docs change:",e.optionalContentTypes),await this.plugin.saveData(e),await this.plugin.loadSettings(),console.log("\u{1F527} Settings saved and reloaded, calling applyCurrentConfiguration"),await this.applyCurrentConfiguration(),new b.Notice(`Docs ${O?"enabled":"disabled"} and applied to config.ts`)})}),new b.Setting(o).setName("Table of contents").setDesc("Show table of contents on content pages").addToggle(S=>{var m,f;return S.setValue((f=(m=e.tableOfContents)==null?void 0:m.enabled)!=null?f:!0).onChange(async O=>{e.tableOfContents||(e.tableOfContents={enabled:!0,depth:4}),e.tableOfContents.enabled=O,await this.plugin.saveData(e),await this.plugin.loadSettings();let y=o.querySelector(".toc-depth-option");y&&(y.style.display=O?"block":"none"),await this.applyCurrentConfiguration(),new b.Notice(`Table of contents ${O?"enabled":"disabled"} and applied to config.ts`)})});let n=o.createDiv("toc-depth-option");n.style.display=(F=(A=e.tableOfContents)==null?void 0:A.enabled)==null||F?"block":"none",n.style.paddingLeft="20px",new b.Setting(n).setName("Table of contents depth").setDesc("Maximum heading depth to include in ToC (2=H2, 3=H3, 4=H4, 5=H5, 6=H6)").addText(S=>{var m;return S.setPlaceholder("4").setValue(String(((m=e.tableOfContents)==null?void 0:m.depth)||4)).onChange(async f=>{let O=parseInt(f)||4,y=Math.max(2,Math.min(6,O));e.tableOfContents||(e.tableOfContents={enabled:!0,depth:4}),e.tableOfContents.depth=y,S.setValue(String(y)),await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new b.Notice(`Table of contents depth set to ${y} and applied to config.ts`)})}),new b.Setting(o).setName("Footer").setDesc("Enable footer on your site").addToggle(S=>{var m,f;return S.setValue((f=(m=e.footer)==null?void 0:m.enabled)!=null?f:!0).onChange(async O=>{e.footer||(e.footer={enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0}),e.footer.enabled=O,await this.plugin.saveData(e),await this.plugin.loadSettings();let y=o.querySelector(".footer-options");y&&(y.style.display=O?"block":"none"),await this.applyCurrentConfiguration(),new b.Notice(`Footer ${O?"enabled":"disabled"} and applied to config.ts`)})});let s=o.createDiv("footer-options");s.style.display=(D=(H=e.footer)==null?void 0:H.enabled)==null||D?"block":"none",s.style.paddingLeft="20px",new b.Setting(s).setName("Footer content").setDesc("Text to display in footer. Use {author} for site author and {title} for site title").addText(S=>{var m;return S.setPlaceholder("\xA9 2025 {author}. Built with the Astro Modular theme.").setValue(((m=e.footer)==null?void 0:m.content)||'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.').onChange(async f=>{e.footer||(e.footer={enabled:!0,content:"",showSocialIconsInFooter:!0}),e.footer.content=f,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(s).setName("Show social icons in footer").setDesc("Display social media icons in the footer").addToggle(S=>{var m,f;return S.setValue((f=(m=e.footer)==null?void 0:m.showSocialIconsInFooter)!=null?f:!0).onChange(async O=>{e.footer||(e.footer={enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0}),e.footer.showSocialIconsInFooter=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new b.Notice(`Social icons in footer ${O?"enabled":"disabled"} and applied to config.ts`)})}),new b.Setting(o).setName("Hide scroll bar").setDesc("Hide the browser scroll bar for a cleaner look").addToggle(S=>{var m,f;return S.setValue((f=(m=e.features)==null?void 0:m.hideScrollBar)!=null?f:!1).onChange(async O=>{var y;console.log("\u{1F527} hideScrollBar UI onChange:",{value:O,type:typeof O,settingsBefore:(y=e.features)==null?void 0:y.hideScrollBar}),e.features.hideScrollBar=O,console.log("\u{1F527} hideScrollBar after setting:",{value:e.features.hideScrollBar,type:typeof e.features.hideScrollBar}),await this.plugin.saveData(e),await this.plugin.loadSettings(),console.log("\u{1F527} Settings saved and reloaded, calling applyCurrentConfiguration"),await this.applyCurrentConfiguration(),new b.Notice(`Hide scroll bar ${O?"enabled":"disabled"} and applied to config.ts`)})}),new b.Setting(o).setName("Scroll to top").setDesc("Show scroll to top button").addToggle(S=>{var m,f;return S.setValue((f=(m=e.features)==null?void 0:m.scrollToTop)!=null?f:!0).onChange(async O=>{e.features.scrollToTop=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new b.Notice(`Scroll to top ${O?"enabled":"disabled"} and applied to config.ts`)})}),new b.Setting(o).setName("Feature button").setDesc("Choose which feature button appears in the header").addDropdown(S=>{var m;return S.addOption("mode","Dark/Light Mode Toggle").addOption("graph","View Graph").addOption("theme","Change Theme").addOption("none","None").setValue(((m=e.features)==null?void 0:m.featureButton)||"mode").onChange(async f=>{e.features.featureButton=f,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new b.Notice(`Feature button updated to "${f}" and applied to config.ts`)})});let r=t.createDiv("settings-section");r.style.marginTop="30px",r.style.paddingTop="20px",r.style.borderTop="2px solid var(--background-modifier-border)",r.createEl("h3",{text:"Command Palette"}),new b.Setting(r).setName("Enable Command Palette").setDesc("Add a command palette to your site").addToggle(S=>{var m,f;return S.setValue((f=(m=e.commandPalette)==null?void 0:m.enabled)!=null?f:!0).onChange(async O=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.enabled=O,e.features.commandPalette=O,await this.plugin.saveData(e),await this.plugin.loadSettings();let y=r.querySelector(".command-palette-options");y&&(y.style.display=O?"block":"none"),await this.applyCurrentConfiguration(),new b.Notice(`Command Palette ${O?"enabled":"disabled"} and applied to config.ts`)})});let c=r.createDiv("command-palette-options");c.style.display=(k=($=e.commandPalette)==null?void 0:$.enabled)==null||k?"block":"none",c.style.paddingLeft="20px",this.createTextSetting(c,"Shortcut","Keyboard shortcut to open command palette (Ctrl = Cmd on Mac)",((M=e.commandPalette)==null?void 0:M.shortcut)||"ctrl+K",S=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.shortcut=S}),this.createTextSetting(c,"Placeholder","Placeholder text in command palette search box",((V=e.commandPalette)==null?void 0:V.placeholder)||"Search posts",S=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.placeholder=S});let l=c.createDiv();l.createEl("h4",{text:"Search Content Types"}),new b.Setting(l).setName("Search posts").setDesc("Include posts in search results").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.search)==null?void 0:f.posts)!=null?O:!0).onChange(async y=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.posts=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(l).setName("Search pages").setDesc("Include pages in search results").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.search)==null?void 0:f.pages)!=null?O:!1).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.pages=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(l).setName("Search projects").setDesc("Include projects in search results").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.search)==null?void 0:f.projects)!=null?O:!1).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.projects=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(l).setName("Search docs").setDesc("Include docs in search results").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.search)==null?void 0:f.docs)!=null?O:!1).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.docs=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})});let i=c.createDiv();i.style.marginTop="15px",i.createEl("h4",{text:"Command Palette Sections"}),new b.Setting(i).setName("Show quick actions section").setDesc("Display quick actions in command palette").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.sections)==null?void 0:f.quickActions)!=null?O:!0).onChange(async y=>{var W;(W=e.commandPalette)!=null&&W.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.quickActions=y,await this.plugin.saveData(e);let E=i.querySelector(".quick-actions-options");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration()})});let u=i.createDiv("quick-actions-options");u.style.display=(U=(B=(G=e.commandPalette)==null?void 0:G.sections)==null?void 0:B.quickActions)==null||U?"block":"none",u.style.paddingLeft="20px",u.style.marginTop="10px",new b.Setting(u).setName("Toggle dark/light mode").setDesc("Show mode toggle button in command palette").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.quickActions)==null?void 0:f.toggleMode)!=null?O:!0).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.toggleMode=y,e.features.quickActions.toggleMode=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(u).setName("View graph").setDesc("Show graph view button in command palette").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.quickActions)==null?void 0:f.graphView)!=null?O:!0).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.graphView=y,e.features.quickActions.graphView=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(u).setName("Change theme").setDesc("Show theme selector button in command palette").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.quickActions)==null?void 0:f.changeTheme)!=null?O:!0).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.changeTheme=y,e.features.quickActions.changeTheme=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(i).setName("Show pages section").setDesc("Display navigation pages in command palette").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.sections)==null?void 0:f.pages)!=null?O:!0).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.pages=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(i).setName("Show social section").setDesc("Display social links in command palette").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.commandPalette)==null?void 0:m.sections)==null?void 0:f.social)!=null?O:!0).onChange(async y=>{var E;(E=e.commandPalette)!=null&&E.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.social=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})});let d=t.createDiv("settings-section");d.style.marginTop="30px",d.style.paddingTop="20px",d.style.borderTop="2px solid var(--background-modifier-border)",d.createEl("h3",{text:"Home Options"}),new b.Setting(d).setName("Featured post").setDesc("Show featured post on homepage").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.homeOptions)==null?void 0:m.featuredPost)==null?void 0:f.enabled)!=null?O:!0).onChange(async y=>{e.homeOptions||(e.homeOptions={featuredPost:{enabled:!0,type:"latest",slug:"getting-started"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}}),e.homeOptions.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"latest",slug:"getting-started"}),e.homeOptions.featuredPost.enabled=y,await this.plugin.saveData(e),await this.plugin.loadSettings();let E=d.querySelector(".featured-post-options");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration(),new b.Notice(`Featured post ${y?"enabled":"disabled"} and applied to config.ts`)})});let p=d.createDiv("featured-post-options");p.style.display=(Y=(I=(P=e.homeOptions)==null?void 0:P.featuredPost)==null?void 0:I.enabled)==null||Y?"block":"none",p.style.paddingLeft="20px",new b.Setting(p).setName("Featured post type").setDesc("Show latest post or a specific featured post").addDropdown(S=>{var m,f;return S.addOption("latest","Latest").addOption("featured","Featured").setValue(((f=(m=e.homeOptions)==null?void 0:m.featuredPost)==null?void 0:f.type)||"latest").onChange(async O=>{var E;(E=e.homeOptions)!=null&&E.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"latest",slug:"getting-started"}),e.homeOptions.featuredPost.type=O,await this.plugin.saveData(e);let y=p.querySelector(".featured-post-slug");y&&(y.style.display=O==="featured"?"block":"none"),await this.applyCurrentConfiguration()})});let g=p.createDiv("featured-post-slug");g.style.display=((te=(J=e.homeOptions)==null?void 0:J.featuredPost)==null?void 0:te.type)==="featured"?"block":"none",new b.Setting(g).setName("Featured post slug").setDesc('Slug of the post to feature (e.g., "getting-started" for /posts/getting-started)').addText(S=>{var m,f;return S.setPlaceholder("getting-started").setValue(((f=(m=e.homeOptions)==null?void 0:m.featuredPost)==null?void 0:f.slug)||"getting-started").onChange(async O=>{var y;(y=e.homeOptions)!=null&&y.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"featured",slug:"getting-started"}),e.homeOptions.featuredPost.slug=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(d).setName("Recent posts").setDesc("Show recent posts on homepage").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.homeOptions)==null?void 0:m.recentPosts)==null?void 0:f.enabled)!=null?O:!0).onChange(async y=>{var W;(W=e.homeOptions)!=null&&W.recentPosts||(e.homeOptions.recentPosts={enabled:!0,count:7}),e.homeOptions.recentPosts.enabled=y,await this.plugin.saveData(e),await this.plugin.loadSettings();let E=d.querySelector(".recent-posts-count");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration()})});let h=d.createDiv("recent-posts-count");h.style.display=(ne=(oe=(ae=e.homeOptions)==null?void 0:ae.recentPosts)==null?void 0:oe.enabled)==null||ne?"block":"none",h.style.paddingLeft="20px",new b.Setting(h).setName("Recent posts count").setDesc("Number of recent posts to show").addText(S=>{var m,f;return S.setPlaceholder("7").setValue(String(((f=(m=e.homeOptions)==null?void 0:m.recentPosts)==null?void 0:f.count)||7)).onChange(async O=>{var E;let y=parseInt(O)||7;(E=e.homeOptions)!=null&&E.recentPosts||(e.homeOptions.recentPosts={enabled:!0,count:7}),e.homeOptions.recentPosts.count=y,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(d).setName("Projects on homepage").setDesc("Show featured projects on homepage").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.homeOptions)==null?void 0:m.projects)==null?void 0:f.enabled)!=null?O:!0).onChange(async y=>{var W;(W=e.homeOptions)!=null&&W.projects||(e.homeOptions.projects={enabled:!0,count:2}),e.homeOptions.projects.enabled=y,await this.plugin.saveData(e);let E=d.querySelector(".projects-count");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration()})});let C=d.createDiv("projects-count");C.style.display=(re=(ie=(se=e.homeOptions)==null?void 0:se.projects)==null?void 0:ie.enabled)==null||re?"block":"none",C.style.paddingLeft="20px",new b.Setting(C).setName("Projects count").setDesc("Number of projects to show").addText(S=>{var m,f;return S.setPlaceholder("2").setValue(String(((f=(m=e.homeOptions)==null?void 0:m.projects)==null?void 0:f.count)||2)).onChange(async O=>{var E;let y=parseInt(O)||2;(E=e.homeOptions)!=null&&E.projects||(e.homeOptions.projects={enabled:!0,count:2}),e.homeOptions.projects.count=y,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(d).setName("Docs on homepage").setDesc("Show featured docs on homepage").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.homeOptions)==null?void 0:m.docs)==null?void 0:f.enabled)!=null?O:!0).onChange(async y=>{var W;(W=e.homeOptions)!=null&&W.docs||(e.homeOptions.docs={enabled:!0,count:3}),e.homeOptions.docs.enabled=y,await this.plugin.saveData(e);let E=d.querySelector(".docs-count");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration()})});let T=d.createDiv("docs-count");T.style.display=(le=(Z=(X=e.homeOptions)==null?void 0:X.docs)==null?void 0:Z.enabled)==null||le?"block":"none",T.style.paddingLeft="20px",new b.Setting(T).setName("Docs count").setDesc("Number of docs to show").addText(S=>{var m,f;return S.setPlaceholder("3").setValue(String(((f=(m=e.homeOptions)==null?void 0:m.docs)==null?void 0:f.count)||3)).onChange(async O=>{var E;let y=parseInt(O)||3;(E=e.homeOptions)!=null&&E.docs||(e.homeOptions.docs={enabled:!0,count:3}),e.homeOptions.docs.count=y,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(d).setName("Blurb placement").setDesc("Where to place the blurb text on homepage").addDropdown(S=>{var m,f;return S.addOption("above","Above").addOption("below","Below").addOption("none","None").setValue(((f=(m=e.homeOptions)==null?void 0:m.blurb)==null?void 0:f.placement)||"below").onChange(async O=>{var y;(y=e.homeOptions)!=null&&y.blurb||(e.homeOptions.blurb={placement:"below"}),e.homeOptions.blurb.placement=O,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})});let N=t.createDiv("settings-section");N.style.marginTop="30px",N.style.paddingTop="20px",N.style.borderTop="2px solid var(--background-modifier-border)",N.createEl("h3",{text:"Post Options"}),new b.Setting(N).setName("Posts per page").setDesc("Number of posts to show per page").addText(S=>{var m;return S.setPlaceholder("6").setValue(String(((m=e.postOptions)==null?void 0:m.postsPerPage)||6)).onChange(async f=>{var y;let O=parseInt(f)||6;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((y=e.optionalFeatures)==null?void 0:y.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postsPerPage=O,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Reading time").setDesc("Display estimated reading time on posts").addToggle(S=>{var m,f;return S.setValue((f=(m=e.postOptions)==null?void 0:m.readingTime)!=null?f:!0).onChange(async O=>{var y;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((y=e.optionalFeatures)==null?void 0:y.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.readingTime=O,e.features.readingTime=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Word count").setDesc("Display word count on posts").addToggle(S=>{var m,f;return S.setValue((f=(m=e.postOptions)==null?void 0:m.wordCount)!=null?f:!0).onChange(async O=>{var y;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((y=e.optionalFeatures)==null?void 0:y.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.wordCount=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Tags").setDesc("Show tags on posts").addToggle(S=>{var m,f;return S.setValue((f=(m=e.postOptions)==null?void 0:m.tags)!=null?f:!0).onChange(async O=>{var y;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((y=e.optionalFeatures)==null?void 0:y.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.tags=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Linked mentions").setDesc("Show linked mentions and backlinks on posts").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.postOptions)==null?void 0:m.linkedMentions)==null?void 0:f.enabled)!=null?O:!0).onChange(async y=>{var W;(W=e.postOptions)!=null&&W.linkedMentions||(e.postOptions.linkedMentions={enabled:!0,linkedMentionsCompact:!1}),e.postOptions.linkedMentions.enabled=y,e.features.linkedMentions=y,await this.plugin.saveData(e),await this.plugin.loadSettings();let E=N.querySelector(".linked-mentions-compact");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration()})});let L=N.createDiv("linked-mentions-compact");L.style.display=(ye=(Te=(ce=e.postOptions)==null?void 0:ce.linkedMentions)==null?void 0:Te.enabled)==null||ye?"block":"none",L.style.paddingLeft="20px",new b.Setting(L).setName("Compact view").setDesc("Use compact view for linked mentions").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.postOptions)==null?void 0:m.linkedMentions)==null?void 0:f.linkedMentionsCompact)!=null?O:!1).onChange(async y=>{var E;(E=e.postOptions)!=null&&E.linkedMentions||(e.postOptions.linkedMentions={enabled:!0,linkedMentionsCompact:!1}),e.postOptions.linkedMentions.linkedMentionsCompact=y,e.features.linkedMentionsCompact=y,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Graph view").setDesc("Show graph view of post connections").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.postOptions)==null?void 0:m.graphView)==null?void 0:f.enabled)!=null?O:!0).onChange(async y=>{var W;(W=e.postOptions)!=null&&W.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.enabled=y,e.features.graphView=y,await this.plugin.saveData(e),await this.plugin.loadSettings();let E=N.querySelector(".graph-view-options");E&&(E.style.display=y?"block":"none"),await this.applyCurrentConfiguration()})});let v=N.createDiv("graph-view-options");v.style.display=(Pe=(Ie=(Se=e.postOptions)==null?void 0:Se.graphView)==null?void 0:Ie.enabled)==null||Pe?"block":"none",v.style.paddingLeft="20px",new b.Setting(v).setName("Show in sidebar").setDesc("Display graph view in post sidebar").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.postOptions)==null?void 0:m.graphView)==null?void 0:f.showInSidebar)!=null?O:!0).onChange(async y=>{var E;(E=e.postOptions)!=null&&E.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.showInSidebar=y,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(v).setName("Maximum nodes").setDesc("Maximum number of nodes to show in graph").addText(S=>{var m,f;return S.setPlaceholder("100").setValue(String(((f=(m=e.postOptions)==null?void 0:m.graphView)==null?void 0:f.maxNodes)||100)).onChange(async O=>{var E;let y=parseInt(O)||100;(E=e.postOptions)!=null&&E.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.maxNodes=y,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(v).setName("Show orphaned posts").setDesc("Include posts with no connections in graph view").addToggle(S=>{var m,f,O;return S.setValue((O=(f=(m=e.postOptions)==null?void 0:m.graphView)==null?void 0:f.showOrphanedPosts)!=null?O:!0).onChange(async y=>{var E;(E=e.postOptions)!=null&&E.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.showOrphanedPosts=y,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Post navigation").setDesc("Show next/previous post navigation").addToggle(S=>{var m,f;return S.setValue((f=(m=e.postOptions)==null?void 0:m.postNavigation)!=null?f:!0).onChange(async O=>{var y;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((y=e.optionalFeatures)==null?void 0:y.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postNavigation=O,e.features.postNavigation=O,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Show post card cover images").setDesc("Where to display cover images on post cards").addDropdown(S=>{var m;return S.addOption("all","All").addOption("featured","Featured").addOption("home","Home").addOption("posts","Posts").addOption("featured-and-posts","Featured and Posts").addOption("none","None").setValue(((m=e.postOptions)==null?void 0:m.showPostCardCoverImages)||"featured-and-posts").onChange(async f=>{var O;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((O=e.optionalFeatures)==null?void 0:O.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.showPostCardCoverImages=f,e.features.showPostCardCoverImages=f,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new b.Setting(N).setName("Post card aspect ratio").setDesc("Aspect ratio for post card cover images").addDropdown(S=>{var m;return S.addOption("16:9","16:9").addOption("4:3","4:3").addOption("3:2","3:2").addOption("og","Open Graph").addOption("square","Square").addOption("golden","Golden").addOption("custom","Custom").setValue(((m=e.postOptions)==null?void 0:m.postCardAspectRatio)||"og").onChange(async f=>{var y;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((y=e.optionalFeatures)==null?void 0:y.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postCardAspectRatio=f,e.features.postCardAspectRatio=f,await this.plugin.saveData(e),await this.plugin.loadSettings();let O=N.querySelector(".custom-aspect-ratio");O&&(O.style.display=f==="custom"?"block":"none"),await this.applyCurrentConfiguration()})});let _=N.createDiv("custom-aspect-ratio");_.style.display=((Ne=e.postOptions)==null?void 0:Ne.postCardAspectRatio)==="custom"?"block":"none",_.style.paddingLeft="20px",this.createTextSetting(_,"Custom aspect ratio",'Custom aspect ratio in format "width/height" (e.g., "2.5/1")',((Q=e.postOptions)==null?void 0:Q.customPostCardAspectRatio)||"2.5/1",S=>{var m;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((m=e.optionalFeatures)==null?void 0:m.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.customPostCardAspectRatio=S,e.features.customPostCardAspectRatio=S},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()});let x=t.createDiv("settings-section");x.style.marginTop="30px",x.style.paddingTop="20px",x.style.borderTop="2px solid var(--background-modifier-border)",x.createEl("h3",{text:"Optional Features"}),this.renderProfilePictureSetting(x,e),this.renderCommentsSetting(x,e)}renderProfilePictureSetting(t,e){var c,l,i,u;let a=((c=e.features)==null?void 0:c.profilePicture)||((i=(l=e.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:i.enabled),o=((u=e.optionalFeatures)==null?void 0:u.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},n=new b.Setting(t).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(d=>d.setValue(a).onChange(async p=>{var h;e.features.profilePicture=p,e.optionalFeatures||(e.optionalFeatures={profilePicture:o,comments:((h=e.postOptions)==null?void 0:h.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.optionalFeatures.profilePicture.enabled=p,await this.plugin.saveData(e),await this.plugin.loadSettings();let g=t.querySelector(".profile-picture-options");g&&(g.style.display=p?"block":"none");try{await this.applyCurrentConfiguration(),new b.Notice(`Profile picture ${p?"enabled":"disabled"} and applied to config.ts`)}catch(C){new b.Notice(`Failed to apply profile picture to config.ts: ${C instanceof Error?C.message:String(C)}`)}})),s=t.createDiv("profile-picture-options");s.style.display=a?"block":"none",s.style.marginTop="10px",s.style.paddingLeft="20px";let r=s.createDiv("options-grid");r.style.display="grid",r.style.gridTemplateColumns="1fr 1fr",r.style.gap="10px",r.style.marginTop="10px",this.createTextSetting(r,"Image path","Path to the profile picture image",o.image,d=>{o.image=d},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()},"/profile.jpg"),this.createTextSetting(r,"Alt text","Alternative text for the profile picture",o.alt,d=>{o.alt=d},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()},"Profile picture"),new b.Setting(r).setName("Size").setDesc("Size of the profile picture").addDropdown(d=>d.addOption("sm","Small").addOption("md","Medium").addOption("lg","Large").setValue(o.size).onChange(async p=>{o.size=p,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})),this.createTextSetting(r,"URL (optional)","Optional URL to link the profile picture to",o.url||"",d=>{o.url=d},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()},"/about"),new b.Setting(r).setName("Placement").setDesc("Where to show the profile picture").addDropdown(d=>d.addOption("footer","Footer").addOption("header","Header").setValue(o.placement).onChange(async p=>{o.placement=p,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})),new b.Setting(r).setName("Style").setDesc("Visual style of the profile picture").addDropdown(d=>d.addOption("circle","Circle").addOption("square","Square").addOption("none","None").setValue(o.style).onChange(async p=>{o.style=p,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()}))}renderCommentsSetting(t,e){var g,h,C,T,N,L,v,_,x,A,F,H,D,$;let a=(_=(v=(T=(h=(g=e.optionalFeatures)==null?void 0:g.comments)==null?void 0:h.enabled)!=null?T:(C=e.features)==null?void 0:C.comments)!=null?v:(L=(N=e.postOptions)==null?void 0:N.comments)==null?void 0:L.enabled)!=null?_:!1,o=((x=e.postOptions)==null?void 0:x.comments)||((A=e.optionalFeatures)==null?void 0:A.comments)||{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"},n=new b.Setting(t).setName("Post comments").setDesc("Enable Giscus comment system for posts").addToggle(k=>k.setValue(a).onChange(async M=>{e.features.comments=M,e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:{...o}}),e.postOptions.comments.enabled=M,e.optionalFeatures||(e.optionalFeatures={profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{...o}}),e.optionalFeatures.comments.enabled=M,await this.plugin.saveData(e),await this.plugin.loadSettings();let V=t.querySelector(".comments-options");V&&(V.style.display=M?"block":"none");try{await this.applyCurrentConfiguration(),new b.Notice(`Comments system ${M?"enabled":"disabled"} and applied to config.ts`)}catch(G){new b.Notice(`Failed to apply comments system to config.ts: ${G instanceof Error?G.message:String(G)}`)}})),s=t.createDiv("comments-options");s.style.display=a?"block":"none",s.style.marginTop="10px",s.style.paddingLeft="20px";let r=s.createDiv("comments-instructions");r.style.marginBottom="15px",r.style.padding="10px",r.style.background="var(--background-modifier-border)",r.style.borderRadius="4px",r.style.borderLeft="3px solid var(--interactive-accent)";let c=r.createEl("p");c.style.margin="0",c.style.fontSize="13px",c.style.color="var(--text-muted)",c.style.whiteSpace="pre-line",c.innerHTML=`1. Go to <a href="https://giscus.app/" target="_blank" rel="noopener noreferrer" style="color: var(--interactive-accent); text-decoration: none;">giscus.app</a> and configure your comments
2. Copy the generated script
3. Paste it below`;let l=c.querySelector("a");l&&(l.addEventListener("mouseenter",()=>{l.style.textDecoration="underline"}),l.addEventListener("mouseleave",()=>{l.style.textDecoration="none"}));let u=new b.Setting(s).setName("Giscus Script").setDesc("Paste your Giscus script here (the plugin will automatically parse all settings)").controlEl.createEl("textarea",{attr:{placeholder:`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`,rows:"8"}});u.style.width="100%",u.style.fontFamily="var(--font-monospace)",u.style.fontSize="12px",u.style.padding="8px",u.style.border="1px solid var(--background-modifier-border)",u.style.borderRadius="4px",u.style.background="var(--background-primary)",u.style.color="var(--text-normal)",u.style.resize="none",u.value=((H=(F=e.optionalFeatures)==null?void 0:F.comments)==null?void 0:H.rawScript)||(($=(D=e.postOptions)==null?void 0:D.comments)==null?void 0:$.rawScript)||"";let d=s.createDiv("script-validation");d.style.marginTop="8px",d.style.fontSize="12px";let p=async()=>{let k=u.value.trim();if(!k){d.innerHTML="",o.rawScript="",await this.plugin.saveData(e);return}let{GiscusScriptParser:M}=await Promise.resolve().then(()=>(ut(),dt)),V=M.validateScript(k);if(V.valid){d.innerHTML='<span style="color: var(--text-success)">\u2713 Valid Giscus script detected</span>';let G=M.parseScript(k);G&&(o.enabled=!0,o.rawScript=k,o.repo=G.repo,o.repoId=G.repoId,o.category=G.category,o.categoryId=G.categoryId,o.mapping=G.mapping,o.strict=G.strict,o.reactions=G.reactions,o.metadata=G.metadata,o.inputPosition=G.inputPosition,o.theme=G.theme,o.lang=G.lang,o.loading=G.loading,e.optionalFeatures||(e.optionalFeatures={profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:o}),e.optionalFeatures.comments={...o},e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:o}),e.postOptions.comments={...o},await this.plugin.saveData(e),await this.applyCurrentConfiguration())}else d.innerHTML=`<span style="color: var(--text-error)">\u2717 ${V.error}</span>`};u.addEventListener("input",p),p()}};var fe=require("obsidian");var Ye=class extends j{async render(t){t.empty();let e=this.getSettings(),a=t.createDiv("settings-section"),o=await this.plugin.pluginManager.getPluginStatus(),s=t.createDiv("plugin-status-container").createDiv("plugin-status");for(let r of o){let c=s.createDiv(`plugin-item ${r.installed?"installed":"missing"}`),l=c.createDiv("plugin-icon");l.innerHTML=r.installed?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>';let i=c.createDiv("plugin-info");i.createEl("h3",{text:r.name});let u=r.installed?r.enabled?"Enabled":"Disabled":"Not installed";i.createEl("p",{text:u})}new fe.Setting(t).setName("Configure automatically").setDesc("Automatically configure all installed plugins").addButton(r=>r.setButtonText("Configure Automatically").setCta().onClick(async()=>{let c=e.contentOrganization,l={obsidianSettings:{attachmentLocation:c==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:c==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:c==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:c==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(l)){let u=e.contentOrganization,d=u==="file-based"?"subfolder (attachments/)":"same folder",p=u==="file-based"?"file":"folder";new fe.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${d}
\u2022 Astro Composer: Creation mode \u2192 ${p}
\u2022 Image Inserter: Format updated for ${u}`,8e3)}else new fe.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)})),new fe.Setting(t).setName("Show manual instructions").setDesc("Get step-by-step instructions for manual configuration").addButton(r=>r.setButtonText("Show Manual Instructions").onClick(async()=>{let c=e.contentOrganization,l={obsidianSettings:{attachmentLocation:c==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:c==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:c==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:c==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},i=await this.plugin.pluginManager.getManualConfigurationInstructions(l),u=new fe.Modal(this.app);u.titleEl.setText("Manual Configuration Instructions");let d=u.contentEl.createDiv();d.style.padding="20px",d.style.lineHeight="1.6";let p=i.split(`
`),g=null;p.forEach(h=>{let C=h.trim();if(C==="")d.createEl("br");else if(C.startsWith("## ")){g&&(g=null);let T=d.createEl("h2");T.setText(C.substring(3)),T.style.marginTop="20px",T.style.marginBottom="10px",T.style.fontSize="1.2em",T.style.fontWeight="bold"}else if(C.match(/^\d+\.\s/)){g||(g=d.createEl("ol"),g.style.marginLeft="20px",g.style.marginBottom="15px");let T=g.createEl("li");T.style.marginBottom="5px",this.parseBoldText(T,C.replace(/^\d+\.\s/,""))}else if(C.startsWith("- ")||C.startsWith("* ")){g||(g=d.createEl("ul"),g.style.marginLeft="20px",g.style.marginBottom="15px");let T=g.createEl("li");T.style.marginBottom="5px",this.parseBoldText(T,C.substring(2))}else{g&&(g=null);let T=d.createEl("p");T.style.marginBottom="10px",this.parseBoldText(T,C)}}),u.open()}))}parseBoldText(t,e){e.split(/(\*\*.*?\*\*)/g).forEach(o=>{o.startsWith("**")&&o.endsWith("**")?t.createEl("strong").setText(o.substring(2,o.length-2)):o.trim()!==""&&t.appendText(o)})}};var K=require("obsidian");var Je=class extends j{render(t){t.empty();let e=this.getSettings(),a=t.createDiv("settings-section");new K.Setting(t).setName("Sync from config.ts").setDesc("Read current config.ts file and update plugin settings to match").addButton(o=>o.setButtonText("Sync from config.ts").setCta().onClick(async()=>{var n,s,r,c,l,i,u,d,p,g,h,C,T,N,L,v,_,x,A,F,H,D,$,k,M,V,G,B;try{let U=await this.plugin.configManager.fileManager.readConfig();if(!U){new K.Notice("Could not read config.ts file");return}let P=await this.plugin.configManager.fileManager.parseConfigFile(U);if(!P){new K.Notice("Could not parse config.ts file");return}let I=this.getSettings();P.siteInfo&&(I.siteInfo.site=(n=P.siteInfo.site)!=null?n:I.siteInfo.site,I.siteInfo.title=(s=P.siteInfo.title)!=null?s:I.siteInfo.title,I.siteInfo.description=(r=P.siteInfo.description)!=null?r:I.siteInfo.description,I.siteInfo.author=(c=P.siteInfo.author)!=null?c:I.siteInfo.author,I.siteInfo.language=(l=P.siteInfo.language)!=null?l:I.siteInfo.language),P.faviconThemeAdaptive!==void 0&&(I.siteInfo.faviconThemeAdaptive=P.faviconThemeAdaptive),P.defaultOgImageAlt&&(I.siteInfo.defaultOgImageAlt=P.defaultOgImageAlt,I.seo||(I.seo={defaultOgImageAlt:""}),I.seo.defaultOgImageAlt=P.defaultOgImageAlt),P.ogImage&&(I.siteInfo.ogImage=P.ogImage),P.favicon&&(I.siteInfo.favicon=P.favicon),P.faviconLight&&(I.siteInfo.faviconLight=P.faviconLight),P.faviconDark&&(I.siteInfo.faviconDark=P.faviconDark),P.navigation&&(P.navigation.pages&&(I.navigation.pages=P.navigation.pages),P.navigation.social&&(I.navigation.social=P.navigation.social)),P.currentTheme&&(I.currentTheme=P.currentTheme),P.typography&&(I.typography.fontSource=(i=P.typography.fontSource)!=null?i:I.typography.fontSource,I.typography.proseFont=(u=P.typography.proseFont)!=null?u:I.typography.proseFont,I.typography.headingFont=(d=P.typography.headingFont)!=null?d:I.typography.headingFont,I.typography.monoFont=(p=P.typography.monoFont)!=null?p:I.typography.monoFont),P.tableOfContents&&(I.tableOfContents||(I.tableOfContents={enabled:!0,depth:4}),I.tableOfContents.enabled=(g=P.tableOfContents.enabled)!=null?g:I.tableOfContents.enabled,I.tableOfContents.depth=(h=P.tableOfContents.depth)!=null?h:I.tableOfContents.depth),P.postOptions&&(I.features.readingTime=(C=P.postOptions.readingTime)!=null?C:I.features.readingTime,I.features.linkedMentions=(N=(T=P.postOptions.linkedMentions)==null?void 0:T.enabled)!=null?N:I.features.linkedMentions,I.features.linkedMentionsCompact=(v=(L=P.postOptions.linkedMentions)==null?void 0:L.linkedMentionsCompact)!=null?v:I.features.linkedMentionsCompact,I.features.graphView=(x=(_=P.postOptions.graphView)==null?void 0:_.enabled)!=null?x:I.features.graphView,I.features.postNavigation=(A=P.postOptions.postNavigation)!=null?A:I.features.postNavigation,I.features.comments=(H=(F=P.postOptions.comments)==null?void 0:F.enabled)!=null?H:I.features.comments),P.optionalContentTypes&&(I.optionalContentTypes.projects=(D=P.optionalContentTypes.projects)!=null?D:I.optionalContentTypes.projects,I.optionalContentTypes.docs=($=P.optionalContentTypes.docs)!=null?$:I.optionalContentTypes.docs),P.footer&&(I.features.showSocialIconsInFooter=(k=P.footer.showSocialIconsInFooter)!=null?k:!1),P.commandPalette&&(I.features.commandPalette=(M=P.commandPalette.enabled)!=null?M:!1,I.commandPalette||(I.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),I.commandPalette.enabled=(V=P.commandPalette.enabled)!=null?V:I.commandPalette.enabled,I.commandPalette.placeholder=(G=P.commandPalette.placeholder)!=null?G:I.commandPalette.placeholder,I.commandPalette.shortcut=(B=P.commandPalette.shortcut)!=null?B:I.commandPalette.shortcut,P.commandPalette.search&&(I.commandPalette.search={...I.commandPalette.search,...P.commandPalette.search}),P.commandPalette.sections&&(I.commandPalette.sections={...I.commandPalette.sections,...P.commandPalette.sections}),P.commandPalette.quickActions&&(I.commandPalette.quickActions={...I.commandPalette.quickActions,...P.commandPalette.quickActions},I.features.quickActions={...I.features.quickActions,...P.commandPalette.quickActions})),P.theme&&(I.currentTheme=P.theme),P.site&&(I.siteInfo.site=P.site),P.title&&(I.siteInfo.title=P.title),P.description&&(I.siteInfo.description=P.description),P.author&&(I.siteInfo.author=P.author),P.language&&(I.siteInfo.language=P.language),I.currentTemplate="standard",await this.plugin.saveData(I),await this.plugin.triggerSettingsRefresh(),new K.Notice("Settings synced from config.ts successfully")}catch(U){new K.Notice(`Failed to sync from config.ts: ${U instanceof Error?U.message:String(U)}`)}})),new K.Setting(t).setName("Reset to defaults").setDesc("Reset all settings to their default values").addButton(o=>o.setButtonText("Reset to Defaults").setWarning().onClick(async()=>{let n=new K.Modal(this.app);n.titleEl.setText("Reset to Defaults");let s=n.contentEl.createDiv();s.createEl("p",{text:"Are you sure you want to reset all configuration settings to defaults?"}),s.createEl("p",{text:"This will preserve your site info and navigation pages/links."});let r=s.createDiv();r.style.marginTop="20px",r.style.display="flex",r.style.gap="10px",r.style.justifyContent="flex-end";let c=r.createEl("button",{text:"Cancel"});c.className="mod-button",c.addEventListener("click",()=>{n.close()});let l=r.createEl("button",{text:"Reset to Defaults"});l.className="mod-warning",l.addEventListener("click",async()=>{n.close();let i=this.getSettings(),u=i.siteInfo,d=i.navigation.pages,p=i.navigation.social,g={...Ee};g.siteInfo=u,g.navigation.pages=d,g.navigation.social=p,this.plugin.settings=g,await this.plugin.saveData(g),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new K.Notice("Configuration reset to defaults and applied to config.ts (site info and navigation pages/links preserved)")}catch(h){new K.Notice(`Configuration reset but failed to apply to config.ts: ${h instanceof Error?h.message:String(h)}`)}await this.plugin.triggerSettingsRefresh()}),l.focus(),n.open()})),new K.Setting(t).setName("Export configuration").setDesc("Export your current configuration as JSON").addButton(o=>o.setButtonText("Export JSON").onClick(()=>{this.exportConfiguration()})),new K.Setting(t).setName("Import configuration").setDesc("Import configuration from JSON file").addButton(o=>o.setButtonText("Import JSON").onClick(()=>{this.importConfiguration()}))}exportConfiguration(){let t=JSON.stringify(this.getSettings(),null,2),e=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download="astro-modular-config.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),new K.Notice("Configuration exported successfully!")}importConfiguration(){let t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async e=>{var o;let a=(o=e.target.files)==null?void 0:o[0];if(a)try{let n=await a.text(),s=JSON.parse(n),r=this.getSettings();Object.assign(r,s),await this.plugin.saveData(r),new K.Notice("Configuration imported successfully!")}catch(n){new K.Notice("Failed to import configuration. Please check the file format.")}},t.click()}};var Qe=class extends yt.PluginSettingTab{constructor(e,a){super(e,a);this.plugin=a}display(){this.render()}render(){let{containerEl:e}=this;e.empty(),e.addClass("astro-modular-settings");let a=e.createDiv("tab-container"),o=a.createDiv("tab-nav"),n=a.createDiv("tab-content"),s=[{id:"general",name:"General",renderer:new Be(this.app,this.plugin)},{id:"site-info",name:"Site Info",renderer:new Ue(this.app,this.plugin)},{id:"navigation",name:"Navigation",renderer:new qe(this.app,this.plugin)},{id:"config",name:"Config",renderer:new je(this.app,this.plugin)},{id:"style",name:"Style",renderer:new We(this.app,this.plugin)},{id:"features",name:"Features",renderer:new Ke(this.app,this.plugin)},{id:"plugins",name:"Plugins",renderer:new Ye(this.app,this.plugin)},{id:"advanced",name:"Advanced",renderer:new Je(this.app,this.plugin)}];s.forEach((r,c)=>{let l=o.createEl("button",{text:r.name,cls:`tab-button ${c===0?"active":""}`});l.addEventListener("click",()=>{o.querySelectorAll(".tab-button").forEach(i=>i.classList.remove("active")),l.classList.add("active"),n.style.opacity="0",setTimeout(()=>{n.empty(),r.renderer.render(n),n.style.opacity="1"},150)})}),s[0].renderer.render(n)}};var Xe=class{constructor(t){this.app=t,this.configPath="../../src/config.ts"}async getConfigFileInfo(){try{let t=require("fs"),e=require("path"),a=this.app.vault.adapter,o=a.basePath||a.path,n=typeof o=="string"?o:o?String(o):"",s=e.join(n,"..","..","src","config.ts"),r=e.dirname(s);if(t.existsSync(s)){let c=t.readFileSync(s,"utf8"),l=t.statSync(s);return{exists:!0,path:s,content:c,lastModified:new Date(l.mtime),valid:!0,errors:[]}}else return{exists:!1,path:s,content:"",lastModified:new Date,valid:!1,errors:["Config file not found"]}}catch(t){return{exists:!1,path:this.configPath,content:"",lastModified:new Date,valid:!1,errors:["Cannot access file outside vault"]}}}validateConfigContent(t){return t.includes("defineConfig")||t.includes("export default")||t.includes("astro/config")}async readConfig(){return(await this.getConfigFileInfo()).content}async writeConfig(t){console.log("\u{1F527} writeConfig called with content length:",t.length);try{let e=require("fs"),a=require("path"),o=this.app.vault.adapter,n=o.basePath||o.path,s=typeof n=="string"?n:n?String(n):"",r=a.join(s,"..","..","src","config.ts");return console.log("\u{1F527} Vault path:",s),console.log("\u{1F527} Config path:",r),console.log("\u{1F527} Config file exists:",e.existsSync(r)),e.writeFileSync(r,t,"utf8"),console.log("\u2705 Config file written successfully"),!0}catch(e){return console.error("\u274C Error writing config:",e),!1}}async detectAstroDevServer(){let t=this.app.vault.getAbstractFileByPath("package.json");if(t)try{let e=await this.app.vault.read(t);return e.includes("astro")&&e.includes("dev")}catch(e){return!1}return!1}async parseConfigFile(t){var Pe,Ne;let e=t||await this.readConfig();if(!e)return null;let a={};a.siteInfo={};let o=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"([^"]*)"/);o&&(a.siteInfo.site=o[1]);let n=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"([^"]*)"/);n&&(a.siteInfo.title=n[1]);let s=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"([^"]*)"/);s&&(a.siteInfo.description=s[1]);let r=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"([^"]*)"/);r&&(a.siteInfo.author=r[1]);let c=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"([^"]*)"/);c&&(a.siteInfo.language=c[1]);let l=e.match(/\/\/ \[CONFIG:FAVICON_THEME_ADAPTIVE\]\s*\n\s*faviconThemeAdaptive:\s*(true|false)/);l&&(a.faviconThemeAdaptive=l[1]==="true");let i=e.match(/\/\/ \[CONFIG:DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"([^"]*)"/);i&&(a.defaultOgImageAlt=i[1]);let u=e.match(/\/\/ \[CONFIG:OG_IMAGE\]\s*\n\s*ogImage:\s*"([^"]*)"/);u&&(a.ogImage=u[1]);let d=e.match(/\/\/ \[CONFIG:FAVICON\]\s*\n\s*favicon:\s*"([^"]*)"/);d&&(a.favicon=d[1]);let p=e.match(/\/\/ \[CONFIG:FAVICON_LIGHT\]\s*\n\s*faviconLight:\s*"([^"]*)"/);p&&(a.faviconLight=p[1]);let g=e.match(/\/\/ \[CONFIG:FAVICON_DARK\]\s*\n\s*faviconDark:\s*"([^"]*)"/);g&&(a.faviconDark=g[1]);let h=e.match(/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"([^"]*)"/);h&&(a.currentTheme=h[1]);let C=e.match(/\/\/ \[CONFIG:AVAILABLE_THEMES\]\s*\n\s*availableThemes:\s*(?:"default"|\[[^\]]*\])/);if(C){let Q=(Pe=C[0].match(/availableThemes:\s*(.+)$/))==null?void 0:Pe[1];if(Q==='"default"')a.availableThemes="default";else if(Q!=null&&Q.startsWith("[")&&(Q!=null&&Q.endsWith("]"))){let S=Q.slice(1,-1).split(",").map(m=>m.trim().replace(/"/g,""));a.availableThemes=S}}let T=e.match(/\/\/ \[CONFIG:CUSTOM_THEMES\]\s*\n\s*customThemes:\s*"[^"]*"/);if(T){let Q=(Ne=T[0].match(/customThemes:\s*"([^"]*)"/))==null?void 0:Ne[1];a.customThemes=Q||""}a.typography={};let N=e.match(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"([^"]*)"/);N&&(a.typography.fontSource=N[1]);let L=e.match(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"([^"]*)"/);L&&(a.typography.proseFont=L[1]);let v=e.match(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"([^"]*)"/);v&&(a.typography.headingFont=v[1]);let _=e.match(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"([^"]*)"/);_&&(a.typography.monoFont=_[1]),a.navigation={pages:[],social:[]};let x=e.match(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[([\s\S]*?)\]/);if(x){let S=x[1].matchAll(/\{\s*title:\s*"([^"]*)",\s*url:\s*"([^"]*)"\s*\}/g);for(let m of S)a.navigation.pages.push({title:m[1],url:m[2]})}let A=e.match(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[([\s\S]*?)\]/);if(A){let S=A[1].matchAll(/\{\s*\n\s*title:\s*"([^"]*)",\s*\n\s*url:\s*"([^"]*)",\s*\n\s*icon:\s*"([^"]*)",?\s*\n\s*\}/g);for(let m of S)a.navigation.social.push({title:m[1],url:m[2],icon:m[3]})}a.postOptions={};let F=e.match(/\/\/ \[CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS\]\s*tableOfContents:\s*(true|false)/);F&&(a.postOptions.tableOfContents=F[1]==="true");let H=e.match(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/);H&&(a.postOptions.readingTime=H[1]==="true");let D=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/),$=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/);(D||$)&&(a.postOptions.linkedMentions={enabled:D?D[1]==="true":!1,linkedMentionsCompact:$?$[1]==="true":!1});let k=e.match(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/);k&&(a.postOptions.graphView={enabled:k[1]==="true"});let M=e.match(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/);M&&(a.postOptions.postNavigation=M[1]==="true");let V=e.match(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/);V&&(a.postOptions.comments={enabled:V[1]==="true"}),a.optionalContentTypes={};let G=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*projects:\s*(true|false)/);G&&(a.optionalContentTypes.projects=G[1]==="true");let B=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*docs:\s*(true|false)/);B&&(a.optionalContentTypes.docs=B[1]==="true"),a.footer={};let U=e.match(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*(true|false)/);U&&(a.footer.showSocialIconsInFooter=U[1]==="true"),a.commandPalette={};let P=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/);P&&(a.commandPalette.enabled=P[1]==="true");let I=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*placeholder:\s*['"`]([^'"`]+)['"`]/);I&&(a.commandPalette.placeholder=I[1]);let Y=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*shortcut:\s*['"`]([^'"`]+)['"`]/);Y&&(a.commandPalette.shortcut=Y[1]),a.commandPalette.search={};let J=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*posts:\s*(true|false)/);J&&(a.commandPalette.search.posts=J[1]==="true");let te=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*pages:\s*(true|false)/);te&&(a.commandPalette.search.pages=te[1]==="true");let ae=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*projects:\s*(true|false)/);ae&&(a.commandPalette.search.projects=ae[1]==="true");let oe=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*docs:\s*(true|false)/);oe&&(a.commandPalette.search.docs=oe[1]==="true"),a.commandPalette.sections={};let ne=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*quickActions:\s*(true|false)/);ne&&(a.commandPalette.sections.quickActions=ne[1]==="true");let se=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*pages:\s*(true|false)/);se&&(a.commandPalette.sections.pages=se[1]==="true");let ie=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*social:\s*(true|false)/);ie&&(a.commandPalette.sections.social=ie[1]==="true"),a.commandPalette.quickActions={};let re=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/);re&&(a.commandPalette.quickActions.enabled=re[1]==="true");let X=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/);X&&(a.commandPalette.quickActions.toggleMode=X[1]==="true");let Z=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/);Z&&(a.commandPalette.quickActions.graphView=Z[1]==="true");let le=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/);le&&(a.commandPalette.quickActions.changeTheme=le[1]==="true");let ce=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*site:\s*['"`]([^'"`]+)['"`]/);ce&&(a.site=ce[1]);let Te=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*title:\s*['"`]([^'"`]+)['"`]/);Te&&(a.title=Te[1]);let ye=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*description:\s*['"`]([^'"`]+)['"`]/);ye&&(a.description=ye[1]);let Se=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*author:\s*['"`]([^'"`]+)['"`]/);Se&&(a.author=Se[1]);let Ie=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*language:\s*['"`]([^'"`]+)['"`]/);return Ie&&(a.language=Ie[1]),a}};var Ze=class{interpolateTemplate(t,e,a){return t.replace(/\$\{settings\.currentTheme\}/g,e.currentTheme).replace(/\$\{settings\.typography\.fontSource\}/g,e.typography.fontSource).replace(/\$\{settings\.typography\.proseFont\}/g,e.typography.proseFont).replace(/\$\{settings\.typography\.headingFont\}/g,e.typography.headingFont).replace(/\$\{settings\.typography\.monoFont\}/g,e.typography.monoFont).replace(/\$\{settings\.typography\.customFonts\.prose\}/g,e.typography.customFonts.prose).replace(/\$\{settings\.typography\.customFonts\.heading\}/g,e.typography.customFonts.heading).replace(/\$\{settings\.typography\.customFonts\.mono\}/g,e.typography.customFonts.mono).replace(/\$\{settings\.optionalFeatures\.comments\.enabled\}/g,e.optionalFeatures.comments.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.enabled\}/g,e.optionalFeatures.profilePicture.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.image\}/g,e.optionalFeatures.profilePicture.image).replace(/\$\{settings\.optionalFeatures\.profilePicture\.alt\}/g,e.optionalFeatures.profilePicture.alt).replace(/\$\{settings\.optionalFeatures\.profilePicture\.size\}/g,e.optionalFeatures.profilePicture.size).replace(/\$\{settings\.optionalFeatures\.profilePicture\.url\}/g,e.optionalFeatures.profilePicture.url||"").replace(/\$\{settings\.optionalFeatures\.profilePicture\.placement\}/g,e.optionalFeatures.profilePicture.placement).replace(/\$\{settings\.optionalFeatures\.profilePicture\.style\}/g,e.optionalFeatures.profilePicture.style).replace(/\$\{settings\.deployment\.platform\}/g,e.deployment.platform).replace(/\$\{templateName\}/g,a)}getTemplateConfig(t,e){switch(t){case"standard":return{layout:{contentWidth:"45rem"},footer:{enabled:!0,showSocialIconsInFooter:!0},darkModeToggleButton:"both",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0}},optionalContentTypes:{projects:!0,docs:!0},homeOptions:{featuredPost:{enabled:!0,type:"latest"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,showInCommandPalette:!0,maxNodes:100},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"traditional"}};case"compact":return{layout:{contentWidth:"42rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!1,social:!0}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!0},graphView:{enabled:!1},postNavigation:!0,showPostCardCoverImages:"posts",postCardAspectRatio:"custom",customPostCardAspectRatio:"2.5/1"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"minimal"}};case"minimal":return{layout:{contentWidth:"40rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"",placeholder:"Search content",search:{posts:!0,pages:!0,projects:!1,docs:!1},sections:{quickActions:!1,pages:!1,social:!1}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"none"}},postOptions:{postsPerPage:6,readingTime:!1,wordCount:!1,tableOfContents:!1,tags:!1,linkedMentions:{enabled:!1,linkedMentionsCompact:!1},graphView:{enabled:!1},postNavigation:!1,showPostCardCoverImages:"none",postCardAspectRatio:"og"},navigation:{showNavigation:!1,showMobileMenu:!1,style:"minimal"}};default:return{}}}};var et=class{validateMarkers(t){let a=["CONFIG:SITE_URL","CONFIG:SITE_TITLE","CONFIG:SITE_DESCRIPTION","CONFIG:SITE_AUTHOR","CONFIG:SITE_LANGUAGE","CONFIG:THEME","CONFIG:AVAILABLE_THEMES","CONFIG:FONT_SOURCE","CONFIG:FONT_BODY","CONFIG:FONT_HEADING","CONFIG:FONT_MONO","CONFIG:LAYOUT_CONTENT_WIDTH","CONFIG:TABLE_OF_CONTENTS_ENABLED","CONFIG:TABLE_OF_CONTENTS_DEPTH","CONFIG:FOOTER_ENABLED","CONFIG:FOOTER_SHOW_SOCIAL_ICONS","CONFIG:SCROLL_TO_TOP","CONFIG:FEATURE_BUTTON","CONFIG:DEPLOYMENT_PLATFORM","CONFIG:COMMAND_PALETTE_ENABLED","CONFIG:COMMAND_PALETTE_SHORTCUT","CONFIG:COMMAND_PALETTE_PLACEHOLDER","CONFIG:COMMAND_PALETTE_SEARCH_POSTS","CONFIG:COMMAND_PALETTE_SEARCH_PAGES","CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS","CONFIG:COMMAND_PALETTE_SEARCH_DOCS","CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS","CONFIG:COMMAND_PALETTE_SECTIONS_PAGES","CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME","CONFIG:PROFILE_PICTURE_ENABLED","CONFIG:PROFILE_PICTURE_IMAGE","CONFIG:PROFILE_PICTURE_ALT","CONFIG:PROFILE_PICTURE_SIZE","CONFIG:PROFILE_PICTURE_URL","CONFIG:PROFILE_PICTURE_PLACEMENT","CONFIG:PROFILE_PICTURE_STYLE","CONFIG:NAVIGATION_SHOW_NAVIGATION","CONFIG:NAVIGATION_STYLE","CONFIG:NAVIGATION_SHOW_MOBILE_MENU","CONFIG:NAVIGATION_PAGES","CONFIG:NAVIGATION_SOCIAL","CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS","CONFIG:OPTIONAL_CONTENT_TYPES_DOCS","CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED","CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE","CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG","CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED","CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT","CONFIG:HOME_OPTIONS_PROJECTS_ENABLED","CONFIG:HOME_OPTIONS_PROJECTS_COUNT","CONFIG:HOME_OPTIONS_DOCS_ENABLED","CONFIG:HOME_OPTIONS_DOCS_COUNT","CONFIG:HOME_OPTIONS_BLURB_PLACEMENT","CONFIG:POST_OPTIONS_POSTS_PER_PAGE","CONFIG:POST_OPTIONS_READING_TIME","CONFIG:POST_OPTIONS_WORD_COUNT","CONFIG:POST_OPTIONS_TAGS","CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED","CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT","CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR","CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS","CONFIG:POST_OPTIONS_POST_NAVIGATION","CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES","CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_COMMENTS_ENABLED","CONFIG:POST_OPTIONS_COMMENTS_PROVIDER","CONFIG:POST_OPTIONS_COMMENTS_REPO","CONFIG:POST_OPTIONS_COMMENTS_REPO_ID","CONFIG:POST_OPTIONS_COMMENTS_CATEGORY","CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID","CONFIG:POST_OPTIONS_COMMENTS_MAPPING","CONFIG:POST_OPTIONS_COMMENTS_STRICT","CONFIG:POST_OPTIONS_COMMENTS_REACTIONS","CONFIG:POST_OPTIONS_COMMENTS_METADATA","CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION","CONFIG:POST_OPTIONS_COMMENTS_THEME","CONFIG:POST_OPTIONS_COMMENTS_LANG","CONFIG:POST_OPTIONS_COMMENTS_LOADING"].filter(o=>!t.includes(`// [${o}]`));return{valid:a.length===0,missing:a}}validateSyntax(t){let e=[];try{let a=(t.match(/\{/g)||[]).length,o=(t.match(/\}/g)||[]).length,n=(t.match(/\[/g)||[]).length,s=(t.match(/\]/g)||[]).length;a!==o&&e.push("Mismatched braces"),n!==s&&e.push("Mismatched brackets")}catch(a){e.push(`Validation failed: ${a instanceof Error?a.message:String(a)}`)}return{valid:e.length===0,errors:e}}};var tt=class{constructor(){this.templateManager=new Ze,this.markerValidator=new et}getTemplateConfig(t,e){return this.templateManager.getTemplateConfig(t,e)}updateThemeInConfig(t,e){if(t.includes("// [CONFIG:THEME]")){let o=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/;return t.replace(o,`// [CONFIG:THEME]
  theme: "${e}"`)}return t}updateFontInConfig(t,e,a){let o=`// [CONFIG:FONT_${e.toUpperCase()}]`;if(t.includes(o)){let s=new RegExp(`${o}\\s*\\n\\s*${e}:\\s*"[^"]*"`);return t.replace(s,`${o}
      ${e}: "${a}"`)}return t}updateFeatureInConfig(t,e,a){return console.log(`updateFeatureInConfig called with ${e}: ${a} - not implemented yet`),t}modifyConfigFromPreset(t,e){var u,d,p,g,h,C;let a={...t.config,features:t.features,currentTheme:t.theme,contentOrganization:t.contentOrganization},o=this.modifyConfigFromFeatures(a,e),n=this.templateManager.getTemplateConfig(t.name,a);if(o.includes("// [CONFIG:THEME]")){let T=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,N=o.match(T);o=o.replace(T,`// [CONFIG:THEME]
  theme: "${a.currentTheme}"`)}if(o=o.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${a.typography.fontSource}"`),o=o.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${a.typography.fontSource==="cdn"?a.typography.customFonts.prose:a.typography.proseFont}"`),o=o.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${a.typography.fontSource==="cdn"?a.typography.customFonts.heading:a.typography.headingFont}"`),o=o.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${a.typography.fontSource==="cdn"?a.typography.customFonts.mono:a.typography.monoFont}"`),o=o.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${a.deployment.platform}"`),a.optionalContentTypes){if(console.log("\u{1F527} Optional content types:",a.optionalContentTypes),a.optionalContentTypes.projects!==void 0){console.log("\u{1F527} Attempting to update projects to:",a.optionalContentTypes.projects);let T=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,N=o.match(T);console.log("\u{1F527} Projects regex match:",N),o=o.replace(T,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${a.optionalContentTypes.projects}`)}if(a.optionalContentTypes.docs!==void 0){console.log("\u{1F527} Attempting to update docs to:",a.optionalContentTypes.docs);let T=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,N=o.match(T);console.log("\u{1F527} Docs regex match:",N),o=o.replace(T,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${a.optionalContentTypes.docs}`)}}(u=n.layout)!=null&&u.contentWidth&&(o=o.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${n.layout.contentWidth}"`)),n.optionalContentTypes&&(n.optionalContentTypes.projects!==void 0&&(o=o.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${n.optionalContentTypes.projects}`)),n.optionalContentTypes.docs!==void 0&&(o=o.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${n.optionalContentTypes.docs}`))),n.featureButton&&(o=o.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*\n\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${n.featureButton}"`)),n.footer&&(n.footer.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${n.footer.enabled}`)),n.footer.showSocialIconsInFooter!==void 0&&(o=o.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${n.footer.showSocialIconsInFooter}`))),n.navigation&&(n.navigation.style&&(o=o.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${n.navigation.style}"`)),n.navigation.showNavigation!==void 0&&(o=o.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${n.navigation.showNavigation}`)),n.navigation.showMobileMenu!==void 0&&(o=o.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${n.navigation.showMobileMenu}`))),n.commandPalette&&(n.commandPalette.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${n.commandPalette.enabled}`)),n.commandPalette.shortcut!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${n.commandPalette.shortcut}"`)),n.commandPalette.placeholder!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${n.commandPalette.placeholder}"`)),n.commandPalette.search&&(n.commandPalette.search.posts!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${n.commandPalette.search.posts}`)),n.commandPalette.search.pages!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${n.commandPalette.search.pages}`)),n.commandPalette.search.projects!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${n.commandPalette.search.projects}`)),n.commandPalette.search.docs!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${n.commandPalette.search.docs}`))),n.commandPalette.sections&&(n.commandPalette.sections.quickActions!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${n.commandPalette.sections.quickActions}`)),n.commandPalette.sections.pages!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${n.commandPalette.sections.pages}`)),n.commandPalette.sections.social!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${n.commandPalette.sections.social}`))),n.commandPalette.quickActions&&(n.commandPalette.quickActions.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${n.commandPalette.quickActions.enabled}`)),n.commandPalette.quickActions.toggleMode!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${n.commandPalette.quickActions.toggleMode}`)),n.commandPalette.quickActions.graphView!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${n.commandPalette.quickActions.graphView}`)),n.commandPalette.quickActions.changeTheme!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${n.commandPalette.quickActions.changeTheme}`)))),n.homeOptions&&(n.homeOptions.featuredPost&&(n.homeOptions.featuredPost.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${n.homeOptions.featuredPost.enabled}`)),n.homeOptions.featuredPost.type&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${n.homeOptions.featuredPost.type}"`))),n.homeOptions.recentPosts&&(n.homeOptions.recentPosts.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${n.homeOptions.recentPosts.enabled}`)),n.homeOptions.recentPosts.count&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${n.homeOptions.recentPosts.count}`))),n.homeOptions.projects&&(n.homeOptions.projects.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${n.homeOptions.projects.enabled}`)),n.homeOptions.projects.count&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${n.homeOptions.projects.count}`))),n.homeOptions.docs&&(n.homeOptions.docs.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${n.homeOptions.docs.enabled}`)),n.homeOptions.docs.count&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${n.homeOptions.docs.count}`))),(d=n.homeOptions.blurb)!=null&&d.placement&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${n.homeOptions.blurb.placement}"`))),n.postOptions&&(n.postOptions.postsPerPage&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${n.postOptions.postsPerPage}`)),[{key:"readingTime",marker:"CONFIG:POST_OPTIONS_READING_TIME"},{key:"wordCount",marker:"CONFIG:POST_OPTIONS_WORD_COUNT"},{key:"tags",marker:"CONFIG:POST_OPTIONS_TAGS"},{key:"postNavigation",marker:"CONFIG:POST_OPTIONS_POST_NAVIGATION"}].forEach(N=>{n.postOptions[N.key]!==void 0&&(o=o.replace(new RegExp(`// \\[${N.marker}\\]\\s*${N.key}:\\s*(true|false)`),`// [${N.marker}]
    ${N.key}: ${n.postOptions[N.key]}`))}),n.postOptions.linkedMentions&&(n.postOptions.linkedMentions.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${n.postOptions.linkedMentions.enabled}`)),n.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${n.postOptions.linkedMentions.linkedMentionsCompact}`))),n.postOptions.graphView&&(n.postOptions.graphView.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
      enabled: ${n.postOptions.graphView.enabled}`)),n.postOptions.graphView.showInSidebar!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*\n?\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${n.postOptions.graphView.showInSidebar}`)),n.postOptions.graphView.showInCommandPalette!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE\]\s*showInCommandPalette:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE]
      showInCommandPalette: ${n.postOptions.graphView.showInCommandPalette}`)),n.postOptions.graphView.maxNodes&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${n.postOptions.graphView.maxNodes}`)),n.postOptions.graphView.showOrphanedPosts!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${n.postOptions.graphView.showOrphanedPosts}`))),n.postOptions.showPostCardCoverImages&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${n.postOptions.showPostCardCoverImages}"`)),n.postOptions.postCardAspectRatio&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${n.postOptions.postCardAspectRatio}"`)),n.postOptions.customPostCardAspectRatio&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${n.postOptions.customPostCardAspectRatio}"`))),((g=(p=a.optionalFeatures)==null?void 0:p.comments)==null?void 0:g.enabled)!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${a.optionalFeatures.comments.enabled}`)),(C=(h=a.optionalFeatures)==null?void 0:h.comments)!=null&&C.enabled&&(a.optionalFeatures.comments.provider&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_PROVIDER\]\s*provider:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_PROVIDER]
      provider: "${a.optionalFeatures.comments.provider}"`)),a.optionalFeatures.comments.repo&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO\]\s*repo:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO]
      repo: "${a.optionalFeatures.comments.repo}"`)),a.optionalFeatures.comments.repoId&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO_ID\]\s*repoId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO_ID]
      repoId: "${a.optionalFeatures.comments.repoId}"`)),a.optionalFeatures.comments.category&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY\]\s*category:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY]
      category: "${a.optionalFeatures.comments.category}"`)),a.optionalFeatures.comments.categoryId&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID\]\s*categoryId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID]
      categoryId: "${a.optionalFeatures.comments.categoryId}"`)),a.optionalFeatures.comments.mapping&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_MAPPING\]\s*mapping:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_MAPPING]
      mapping: "${a.optionalFeatures.comments.mapping}"`)),a.optionalFeatures.comments.strict&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_STRICT\]\s*strict:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_STRICT]
      strict: "${a.optionalFeatures.comments.strict}"`)),a.optionalFeatures.comments.reactions&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REACTIONS\]\s*reactions:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REACTIONS]
      reactions: "${a.optionalFeatures.comments.reactions}"`)),a.optionalFeatures.comments.metadata&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_METADATA\]\s*metadata:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_METADATA]
      metadata: "${a.optionalFeatures.comments.metadata}"`)),a.optionalFeatures.comments.inputPosition&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION\]\s*inputPosition:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION]
      inputPosition: "${a.optionalFeatures.comments.inputPosition}"`)),a.optionalFeatures.comments.theme&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_THEME\]\s*theme:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_THEME]
      theme: "${a.optionalFeatures.comments.theme}"`)),a.optionalFeatures.comments.lang&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LANG\]\s*lang:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LANG]
      lang: "${a.optionalFeatures.comments.lang}"`)),a.optionalFeatures.comments.loading&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LOADING\]\s*loading:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LOADING]
      loading: "${a.optionalFeatures.comments.loading}"`)));let r=this.markerValidator.validateMarkers(o);if(!r.valid)return console.error("\u274C Config modification failed: Missing markers:",r.missing),console.error("Please ensure all CONFIG markers are present in your config.ts file"),e;let c=this.markerValidator.validateSyntax(o);if(!c.valid)return console.error("\u274C Config modification failed: Syntax errors:",c.errors),e;o=o.replace(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"[^"]*"/,`// [CONFIG:SITE_URL]
  site: "${a.siteInfo.site}"`),o=o.replace(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"[^"]*"/,`// [CONFIG:SITE_TITLE]
  title: "${a.siteInfo.title}"`),o=o.replace(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"[^"]*"/,`// [CONFIG:SITE_DESCRIPTION]
  description: "${a.siteInfo.description}"`),o=o.replace(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"[^"]*"/,`// [CONFIG:SITE_AUTHOR]
  author: "${a.siteInfo.author}"`),o=o.replace(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"[^"]*"/,`// [CONFIG:SITE_LANGUAGE]
  language: "${a.siteInfo.language}"`),a.siteInfo.faviconThemeAdaptive!==void 0&&(o=o.replace(/\/\/ \[CONFIG:FAVICON_THEME_ADAPTIVE\]\s*\n\s*faviconThemeAdaptive:\s*(true|false)/,`// [CONFIG:FAVICON_THEME_ADAPTIVE]
  faviconThemeAdaptive: ${a.siteInfo.faviconThemeAdaptive}`)),a.siteInfo.defaultOgImageAlt&&(o=o.replace(/\/\/ \[CONFIG:DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:DEFAULT_OG_IMAGE_ALT]
  defaultOgImageAlt: "${a.siteInfo.defaultOgImageAlt}"`)),a.siteInfo.ogImage&&(o=o.replace(/\/\/ \[CONFIG:OG_IMAGE\]\s*\n\s*ogImage:\s*"[^"]*"/,`// [CONFIG:OG_IMAGE]
  ogImage: "${a.siteInfo.ogImage}"`)),a.siteInfo.favicon&&(o=o.replace(/\/\/ \[CONFIG:FAVICON\]\s*\n\s*favicon:\s*"[^"]*"/,`// [CONFIG:FAVICON]
  favicon: "${a.siteInfo.favicon}"`)),a.siteInfo.faviconLight&&(o=o.replace(/\/\/ \[CONFIG:FAVICON_LIGHT\]\s*\n\s*faviconLight:\s*"[^"]*"/,`// [CONFIG:FAVICON_LIGHT]
  faviconLight: "${a.siteInfo.faviconLight}"`)),a.siteInfo.faviconDark&&(o=o.replace(/\/\/ \[CONFIG:FAVICON_DARK\]\s*\n\s*faviconDark:\s*"[^"]*"/,`// [CONFIG:FAVICON_DARK]
  faviconDark: "${a.siteInfo.faviconDark}"`));let l=a.navigation.pages.map(T=>`      { title: "${T.title}", url: "${T.url}" }`).join(`,
`);o=o.replace(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_PAGES]
    pages: [
${l},
    ]`);let i=a.navigation.social.map(T=>`      {
        title: "${T.title}",
        url: "${T.url}",
        icon: "${T.icon}",
      }`).join(`,
`);return o=o.replace(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_SOCIAL]
    social: [
${i},
    ]`),o}modifyConfigFromFeatures(t,e){var r,c,l,i,u,d,p,g,h,C,T,N,L,v,_,x;console.log("\u{1F527} modifyConfigFromFeatures called with settings:",Object.keys(t)),console.log("\u{1F527} Current config length:",e.length);let a=e;console.log("\u{1F527} Attempting to update theme to:",t.currentTheme);let o=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,n=a.match(o);if(console.log("\u{1F527} Theme regex match:",n),a=a.replace(o,`// [CONFIG:THEME]
  theme: "${t.currentTheme}"`),t.customThemeFile&&(a=a.replace(/\/\/ \[CONFIG:CUSTOM_THEME_FILE\]\s*\n\s*customThemeFile:\s*"[^"]*"/,`// [CONFIG:CUSTOM_THEME_FILE]
  customThemeFile: "${t.customThemeFile}"`)),t.optionalContentTypes){if(console.log("\u{1F527} Optional content types:",t.optionalContentTypes),t.optionalContentTypes.projects!==void 0){console.log("\u{1F527} Attempting to update projects to:",t.optionalContentTypes.projects);let A=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,F=a.match(A);console.log("\u{1F527} Projects regex match:",F),a=a.replace(A,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${t.optionalContentTypes.projects}`)}if(t.optionalContentTypes.docs!==void 0){console.log("\u{1F527} Attempting to update docs to:",t.optionalContentTypes.docs);let A=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,F=a.match(A);console.log("\u{1F527} Docs regex match:",F),a=a.replace(A,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${t.optionalContentTypes.docs}`)}}if(t.availableThemes!==void 0){console.log("\u{1F527} Attempting to update availableThemes to:",t.availableThemes);let A;if(t.availableThemes==="default")A='"default"';else{let D=[...t.availableThemes];if(t.customThemes&&t.customThemes.trim()){let k=t.customThemes.split(",").map(M=>M.trim()).filter(M=>M);D=[...D,...k],console.log("\u{1F527} Merged custom themes into availableThemes:",k)}A=`[${D.map(k=>`"${k}"`).join(", ")}]`}let F=/\/\/ \[CONFIG:AVAILABLE_THEMES\]\s*\n\s*availableThemes:\s*(?:"default"|\[[^\]]*\])/,H=a.match(F);console.log("\u{1F527} AvailableThemes regex match:",H),a=a.replace(F,`// [CONFIG:AVAILABLE_THEMES]
  availableThemes: ${A}`)}if(t.customThemes!==void 0){console.log("\u{1F527} Attempting to update customThemes to:",t.customThemes);let A=t.customThemes?`"${t.customThemes}"`:'""',F=/\/\/ \[CONFIG:CUSTOM_THEMES\]\s*\n\s*customThemes:\s*"[^"]*"/,H=a.match(F);console.log("\u{1F527} CustomThemes regex match:",H),a=a.replace(F,`// [CONFIG:CUSTOM_THEMES]
  customThemes: ${A}`)}if(a=a.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${t.typography.fontSource}"`),t.typography.fontDisplay&&(a=a.replace(/\/\/ \[CONFIG:FONT_DISPLAY\]\s*\n\s*display:\s*"[^"]*"/,`// [CONFIG:FONT_DISPLAY]
    display: "${t.typography.fontDisplay}"`)),a=a.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${t.typography.fontSource==="cdn"?t.typography.customFonts.prose:t.typography.proseFont}"`),a=a.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${t.typography.fontSource==="cdn"?t.typography.customFonts.heading:t.typography.headingFont}"`),a=a.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${t.typography.fontSource==="cdn"?t.typography.customFonts.mono:t.typography.monoFont}"`),a=a.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${t.deployment.platform}"`),(r=t.layout)!=null&&r.contentWidth&&(a=a.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${t.layout.contentWidth}"`)),t.tableOfContents&&(a=a.replace(/\/\/ \[CONFIG:TABLE_OF_CONTENTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:TABLE_OF_CONTENTS_ENABLED]
    enabled: ${t.tableOfContents.enabled}`),a=a.replace(/\/\/ \[CONFIG:TABLE_OF_CONTENTS_DEPTH\]\s*\n\s*depth:\s*\d+/,`// [CONFIG:TABLE_OF_CONTENTS_DEPTH]
    depth: ${t.tableOfContents.depth}`)),t.footer){if(t.footer.enabled!==void 0&&(a=a.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${t.footer.enabled}`)),t.footer.content){let A=t.footer.content.replace(/"/g,'\\"').replace(/\n/g,"\\n");a=a.replace(/\/\/ \[CONFIG:FOOTER_CONTENT\]\s*\n\s*content:\s*`[^`]*`/,`// [CONFIG:FOOTER_CONTENT]
    content: \`${t.footer.content}\``)}t.footer.showSocialIconsInFooter!==void 0&&(a=a.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*\n\s*showSocialIconsInFooter:\s*(true|false)/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${t.footer.showSocialIconsInFooter}`))}let s=((c=t.siteInfo)==null?void 0:c.defaultOgImageAlt)||((l=t.seo)==null?void 0:l.defaultOgImageAlt);return s&&(a=a.replace(/\/\/ \[CONFIG:SEO_DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:SEO_DEFAULT_OG_IMAGE_ALT]
    defaultOgImageAlt: "${s}"`),a=a.replace(/\/\/ \[CONFIG:DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:DEFAULT_OG_IMAGE_ALT]
  defaultOgImageAlt: "${s}"`)),t.navigation&&(t.navigation.showNavigation!==void 0&&(a=a.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*\n\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${t.navigation.showNavigation}`)),t.navigation.style&&(a=a.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*\n\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${t.navigation.style}"`)),t.navigation.showMobileMenu!==void 0&&(a=a.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*\n\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${t.navigation.showMobileMenu}`))),t.commandPalette&&(t.commandPalette.enabled!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${t.commandPalette.enabled}`)),t.commandPalette.shortcut&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*\n\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${t.commandPalette.shortcut}"`)),t.commandPalette.placeholder&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*\n\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${t.commandPalette.placeholder}"`)),t.commandPalette.search&&(t.commandPalette.search.posts!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*\n\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${t.commandPalette.search.posts}`)),t.commandPalette.search.pages!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*\n\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${t.commandPalette.search.pages}`)),t.commandPalette.search.projects!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${t.commandPalette.search.projects}`)),t.commandPalette.search.docs!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${t.commandPalette.search.docs}`))),t.commandPalette.sections&&(t.commandPalette.sections.quickActions!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*\n\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${t.commandPalette.sections.quickActions}`)),t.commandPalette.sections.pages!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*\n\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${t.commandPalette.sections.pages}`)),t.commandPalette.sections.social!==void 0&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*\n\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${t.commandPalette.sections.social}`)))),t.homeOptions&&(t.homeOptions.featuredPost&&(t.homeOptions.featuredPost.enabled!==void 0&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${t.homeOptions.featuredPost.enabled}`)),t.homeOptions.featuredPost.type&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*\n\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${t.homeOptions.featuredPost.type}"`)),t.homeOptions.featuredPost.slug&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG\]\s*\n\s*slug:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG]
      slug: "${t.homeOptions.featuredPost.slug}"`))),t.homeOptions.recentPosts&&(t.homeOptions.recentPosts.enabled!==void 0&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${t.homeOptions.recentPosts.enabled}`)),t.homeOptions.recentPosts.count&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${t.homeOptions.recentPosts.count}`))),t.homeOptions.projects&&(t.homeOptions.projects.enabled!==void 0&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${t.homeOptions.projects.enabled}`)),t.homeOptions.projects.count&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${t.homeOptions.projects.count}`))),t.homeOptions.docs&&(t.homeOptions.docs.enabled!==void 0&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${t.homeOptions.docs.enabled}`)),t.homeOptions.docs.count&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${t.homeOptions.docs.count}`))),(i=t.homeOptions.blurb)!=null&&i.placement&&(a=a.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*\n\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${t.homeOptions.blurb.placement}"`))),t.postOptions&&(t.postOptions.postsPerPage&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*\n\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${t.postOptions.postsPerPage}`)),t.postOptions.wordCount!==void 0&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*\n\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${t.postOptions.wordCount}`)),t.postOptions.tags!==void 0&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*\n\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${t.postOptions.tags}`)),t.postOptions.linkedMentions&&t.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*\n\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${t.postOptions.linkedMentions.linkedMentionsCompact}`)),t.postOptions.graphView&&(t.postOptions.graphView.showInSidebar!==void 0&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*\n\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${t.postOptions.graphView.showInSidebar}`)),t.postOptions.graphView.maxNodes&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*\n\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${t.postOptions.graphView.maxNodes}`)),t.postOptions.graphView.showOrphanedPosts!==void 0&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*\n\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${t.postOptions.graphView.showOrphanedPosts}`))),t.postOptions.customPostCardAspectRatio&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*\n\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${t.postOptions.customPostCardAspectRatio}"`))),a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${(d=(u=t.commandPalette)==null?void 0:u.enabled)!=null?d:t.features.commandPalette}`),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_READING_TIME]
    readingTime: ${t.features.readingTime}`),"wordCount"in t.features&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${t.features.wordCount}`)),"tags"in t.features&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${t.features.tags}`)),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${t.features.linkedMentions}`),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${(p=t.features.linkedMentionsCompact)!=null?p:!1}`),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${t.features.comments}`),t.features.comments&&((g=t.optionalFeatures)!=null&&g.comments)&&(t.optionalFeatures.comments.provider&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_PROVIDER\]\s*provider:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_PROVIDER]
      provider: "${t.optionalFeatures.comments.provider}"`)),t.optionalFeatures.comments.repo&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO\]\s*repo:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO]
      repo: "${t.optionalFeatures.comments.repo}"`)),t.optionalFeatures.comments.repoId&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO_ID\]\s*repoId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO_ID]
      repoId: "${t.optionalFeatures.comments.repoId}"`)),t.optionalFeatures.comments.category&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY\]\s*category:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY]
      category: "${t.optionalFeatures.comments.category}"`)),t.optionalFeatures.comments.categoryId&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID\]\s*categoryId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID]
      categoryId: "${t.optionalFeatures.comments.categoryId}"`)),t.optionalFeatures.comments.mapping&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_MAPPING\]\s*mapping:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_MAPPING]
      mapping: "${t.optionalFeatures.comments.mapping}"`)),t.optionalFeatures.comments.strict&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_STRICT\]\s*strict:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_STRICT]
      strict: "${t.optionalFeatures.comments.strict}"`)),t.optionalFeatures.comments.reactions&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REACTIONS\]\s*reactions:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REACTIONS]
      reactions: "${t.optionalFeatures.comments.reactions}"`)),t.optionalFeatures.comments.metadata&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_METADATA\]\s*metadata:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_METADATA]
      metadata: "${t.optionalFeatures.comments.metadata}"`)),t.optionalFeatures.comments.inputPosition&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION\]\s*inputPosition:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION]
      inputPosition: "${t.optionalFeatures.comments.inputPosition}"`)),t.optionalFeatures.comments.theme&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_THEME\]\s*theme:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_THEME]
      theme: "${t.optionalFeatures.comments.theme}"`)),t.optionalFeatures.comments.lang&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LANG\]\s*lang:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LANG]
      lang: "${t.optionalFeatures.comments.lang}"`)),t.optionalFeatures.comments.loading&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LOADING\]\s*loading:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LOADING]
      loading: "${t.optionalFeatures.comments.loading}"`))),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
      enabled: ${(T=(C=(h=t.postOptions)==null?void 0:h.graphView)==null?void 0:C.enabled)!=null?T:t.features.graphView}`),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_POST_NAVIGATION]
    postNavigation: ${t.features.postNavigation}`),console.log("\u{1F527} hideScrollBar debug:",{value:t.features.hideScrollBar,type:typeof t.features.hideScrollBar,isUndefined:t.features.hideScrollBar===void 0,isNull:t.features.hideScrollBar===null,stringValue:String(t.features.hideScrollBar)}),a=a.replace(/\/\/\s*\[CONFIG:HIDE_SCROLL_BAR\]\s*hideScrollBar:\s*(true|false)/,`//[CONFIG:HIDE_SCROLL_BAR]
  hideScrollBar: ${t.features.hideScrollBar}`),a=a.replace(/\/\/ \[CONFIG:SCROLL_TO_TOP\]\s*scrollToTop:\s*(true|false)/,`// [CONFIG:SCROLL_TO_TOP]
  scrollToTop: ${t.features.scrollToTop}`),a=a.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${t.features.showSocialIconsInFooter}`),a=a.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${t.features.featureButton}"`),(N=t.features)!=null&&N.quickActions&&(a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${t.features.quickActions.enabled}`),a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${t.features.quickActions.toggleMode}`),a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${t.features.quickActions.graphView}`),a=a.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${t.features.quickActions.changeTheme}`)),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${t.postOptions.showPostCardCoverImages}"`),a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${t.postOptions.postCardAspectRatio}"`),t.postOptions.customPostCardAspectRatio&&(a=a.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${t.postOptions.customPostCardAspectRatio}"`)),((v=(L=t.optionalFeatures)==null?void 0:L.profilePicture)==null?void 0:v.enabled)!==void 0&&(a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:PROFILE_PICTURE_ENABLED]
    enabled: ${t.optionalFeatures.profilePicture.enabled}`)),(x=(_=t.optionalFeatures)==null?void 0:_.profilePicture)!=null&&x.enabled&&(a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_IMAGE\]\s*image:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_IMAGE]
    image: "${t.optionalFeatures.profilePicture.image}"`),a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ALT\]\s*alt:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_ALT]
    alt: "${t.optionalFeatures.profilePicture.alt}"`),a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_SIZE\]\s*size:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_SIZE]
    size: "${t.optionalFeatures.profilePicture.size}"`),a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_URL\]\s*url:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_URL]
    url: "${t.optionalFeatures.profilePicture.url||""}"`),a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_PLACEMENT]
    placement: "${t.optionalFeatures.profilePicture.placement}"`),a=a.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_STYLE]
    style: "${t.optionalFeatures.profilePicture.style}"`)),console.log("\u{1F527} modifyConfigFromFeatures returning modified config, length:",a.length),console.log("\u{1F527} Config changed:",a!==e),a}};var mt={};ve(mt,{config:()=>Ft,default:()=>At,description:()=>wt,name:()=>_t});var _t="Standard",wt="Full-featured blog with all options enabled",Ft={currentTemplate:"standard",features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},tableOfContents:{enabled:!0,depth:4}},At={name:_t,description:wt,config:Ft};var ht={};ve(ht,{config:()=>xt,default:()=>kt,description:()=>Dt,name:()=>Mt});var Mt="Minimal",Dt="Clean, simple blog with minimal features",xt={currentTemplate:"minimal",features:{commandPalette:!0,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,hideScrollBar:!0,scrollToTop:!1,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!1,toggleMode:!1,graphView:!1,changeTheme:!1}},tableOfContents:{enabled:!1,depth:4}},kt={name:Mt,description:Dt,config:xt};var ft={};ve(ft,{config:()=>Rt,default:()=>Ht,description:()=>Gt,name:()=>Lt});var Lt="Compact",Gt="Balanced setup for smaller sites",Rt={currentTemplate:"compact",features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!0,toggleMode:!0,graphView:!1,changeTheme:!0}},tableOfContents:{enabled:!0,depth:2}},Ht={name:Lt,description:Gt,config:Rt};var st=class{constructor(t){this.app=t,this.fileManager=new Xe(t),this.presetModifier=new tt}async getConfigFileInfo(){return this.fileManager.getConfigFileInfo()}async readConfig(){return this.fileManager.readConfig()}async writeConfig(t){return this.fileManager.writeConfig(t)}async applyPreset(t){let e=await this.readConfig(),a=this.presetModifier.modifyConfigFromPreset(t,e);return await this.writeConfig(a)}async detectAstroDevServer(){return this.fileManager.detectAstroDevServer()}async updateIndividualFeatures(t){let e=await this.readConfig(),a=this.presetModifier.modifyConfigFromFeatures(t,e);return await this.writeConfig(a)}async updateThemeOnly(t){let e=await this.readConfig(),a=this.presetModifier.updateThemeInConfig(e,t);return await this.writeConfig(a)}async updateFontOnly(t,e){let a=await this.readConfig(),o=this.presetModifier.updateFontInConfig(a,t,e);return await this.writeConfig(o)}async updateFeatureOnly(t,e){let a=await this.readConfig(),o=this.presetModifier.updateFeatureInConfig(a,t,e);return await this.writeConfig(o)}async triggerRebuild(){}getTemplatePreset(t){try{switch(t){case"standard":return mt;case"minimal":return ht;case"compact":return ft;default:return console.error(`Unknown template ID: ${t}`),null}}catch(e){return console.error("Error loading template preset:",e),null}}getTemplateConfig(t,e){return this.presetModifier.getTemplateConfig(t,e)}};var it=class{constructor(t){this.app=t}async getPluginStatus(){var o;let t=this.app.plugins,e=["astro-composer","insert-unsplash-image","obsidian-shellcommands"],a=[];for(let n of e){let s=(o=t==null?void 0:t.plugins)==null?void 0:o[n],r=(t==null?void 0:t.enabledPlugins)&&t.enabledPlugins.has(n),c=this.isPluginInstalled(n);a.push({name:this.getPluginDisplayName(n),installed:c,enabled:r||!1,configurable:this.isPluginConfigurable(n),currentSettings:s?await this.getPluginSettings(s):void 0})}return a}isPluginInstalled(t){var o,n;let e=(o=this.app.plugins)==null?void 0:o.communityPlugins;if(e&&Array.isArray(e))return e.includes(t);let a=this.app.plugins;return!!((n=a==null?void 0:a.plugins)!=null&&n[t])}getPluginDisplayName(t){return{"astro-composer":"Astro Composer","insert-unsplash-image":"Image Inserter","obsidian-shellcommands":"Shell Commands"}[t]||t}isPluginConfigurable(t){return["astro-composer","insert-unsplash-image"].includes(t)}async getPluginSettings(t){return{}}async configurePlugins(t){let e=0,a=0;try{return a++,await this.configureObsidianSettings(t.obsidianSettings),e++,a++,await this.configureAstroComposerSettings(t.astroComposerSettings),e++,a++,await this.configureImageInserterSettings(t.imageInserterSettings),e++,e>0}catch(o){return console.error("Plugin configuration failed:",o),!1}}async configureObsidianSettings(t){try{let e=this.app;if(e.setting&&typeof e.setting.set=="function")t.attachmentLocation==="subfolder"?(await e.setting.set("attachmentFolderPath",`./${t.subfolderName}`),await e.setting.set("newLinkFormat","relative")):(await e.setting.set("attachmentFolderPath","./"),await e.setting.set("newLinkFormat","relative")),typeof e.setting.save=="function"&&await e.setting.save();else{let a=this.app.vault.config;t.attachmentLocation==="subfolder"?(a.newLinkFormat="relative",a.attachmentFolderPath=`./${t.subfolderName}`):(a.newLinkFormat="relative",a.attachmentFolderPath="./"),await this.app.vault.saveConfig()}try{e.setting&&e.setting.open}catch(a){}}catch(e){throw console.error("Failed to configure Obsidian settings:",e),e}}async configureAstroComposerSettings(t){var e;try{let a=this.app.plugins,o=(e=a==null?void 0:a.plugins)==null?void 0:e["astro-composer"];o&&o.settings&&(o.settings.creationMode=t.creationMode,o.settings.indexFileName=t.indexFileName,await o.saveSettings())}catch(a){console.error("Failed to configure Astro Composer:",a)}}async configureImageInserterSettings(t){var e;try{let a=this.app.plugins,o=(e=a==null?void 0:a.plugins)==null?void 0:e["insert-unsplash-image"];o&&o.settings&&(o.settings.frontmatter&&(o.settings.frontmatter.valueFormat=t.valueFormat),await o.saveSettings())}catch(a){console.error("Failed to configure Image Inserter:",a)}}async getManualConfigurationInstructions(t){let e=`## Obsidian Settings
`;return e+=`1. Go to **Settings \u2192 Files & Links**
`,e+="2. Set **Default location for new attachments** to: ",e+=t.obsidianSettings.attachmentLocation==="subfolder"?`**"In subfolder under current folder"**
`:`**"Same folder as current file"**
`,t.obsidianSettings.attachmentLocation==="subfolder"&&(e+=`3. Set **Subfolder name** to: **"${t.obsidianSettings.subfolderName}"**
`),e+=`## Astro Composer Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Astro Composer**
`,e+=`2. Set **Creation mode** to: "${t.astroComposerSettings.creationMode==="file"?"File-based":"Folder-based"}"
`,t.astroComposerSettings.creationMode==="folder"&&(e+=`3. Set **Index file name** to: "${t.astroComposerSettings.indexFileName}"
`),e+=`## Image Inserter Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Image Inserter**
`,e+=`2. Set **Frontmatter \u2192 Value Format** to: "${t.imageInserterSettings.valueFormat}"
`,e+=`**Note**: After making these changes, you should see them reflected in Obsidian's settings interface. If the automatic configuration worked, these settings should already be applied.
`,e}};var rt=class extends St.Plugin{async onload(){await this.loadSettings(),this.configManager=new st(this.app),this.pluginManager=new it(this.app),Ct(this),this.settingsTab=new Qe(this.app,this),this.addSettingTab(this.settingsTab),this.addRibbonIcon("rocket","Astro Modular Settings",async()=>{await this.loadSettings(),new ge(this.app,this).open()}),this.settings.runWizardOnStartup&&(this.startupTimeoutId=window.setTimeout(async()=>{await this.loadSettings(),this.settings.runWizardOnStartup&&new ge(this.app,this).open()},2e3))}onunload(){this.startupTimeoutId&&(window.clearTimeout(this.startupTimeoutId),this.startupTimeoutId=void 0)}async loadSettings(){this.settings=Object.assign({},Ee,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}openSettings(){this.app.setting.open(),this.app.setting.openTabById(this.manifest.id)}async triggerSettingsRefresh(){await this.loadSettings(),this.settingsTab&&this.settingsTab.render()}};
