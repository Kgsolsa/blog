<!-- Theme toggle component -->
<button
  id="theme-toggle"
  class="p-2 text-primary-500 dark:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-800 rounded-lg transition-colors duration-200"
  aria-label="Toggle theme"
>
  <i data-lucide="sun" class="w-5 h-5 dark:hidden"></i>
  <i data-lucide="moon" class="w-5 h-5 hidden dark:block"></i>
</button>

<script>
  // Global theme toggle function
  function toggleTheme() {
    const html = document.documentElement;
    const isDark = html.classList.contains('dark');
    const newTheme = isDark ? 'light' : 'dark';

    // Update theme
    localStorage.setItem('theme', newTheme);
    html.classList.remove('light', 'dark');
    html.classList.add(newTheme);

    // Update favicon
    const favicon = document.getElementById('favicon');
    if (favicon) {
      favicon.href = newTheme === 'dark' ? '/favicon-dark.ico' : '/favicon-light.ico';
    }

    // Re-initialize Lucide icons to update the toggle icon
    if (window.lucide) {
      lucide.createIcons();
    }

    // Dispatch theme change event
    window.dispatchEvent(new CustomEvent('themechange', {
      detail: { theme: newTheme }
    }));
  }

  // Make toggle function globally accessible
  window.toggleTheme = toggleTheme;

  function initThemeToggle() {
    const themeToggle = document.getElementById('theme-toggle');

    if (themeToggle) {
      themeToggle.addEventListener('click', toggleTheme);
    }
  }

  // Initialize on load
  document.addEventListener('DOMContentLoaded', initThemeToggle);
</script>